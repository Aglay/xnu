<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>hfs_fsctl.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">hfs_fsctl.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2004-2014 Apple Computer, Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_HFS_FSCTL_H_</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">_HFS_FSCTL_H_</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/appleapiopts.h&gt;</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/param.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/ioccom.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/time.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;stdint.h&gt;</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__APPLE_API_UNSTABLE</span>

<span class="enscript-type">struct</span> hfs_backingstoreinfo {
	<span class="enscript-type">int</span>  signature;   <span class="enscript-comment">/* == 3419115 */</span>
	<span class="enscript-type">int</span>  version;     <span class="enscript-comment">/* version of this struct (1) */</span>
	<span class="enscript-type">int</span>  backingfd;   <span class="enscript-comment">/* disk image file (on backing fs) */</span>
	<span class="enscript-type">int</span>  bandsize;    <span class="enscript-comment">/* sparse disk image band size */</span>
};


<span class="enscript-type">typedef</span> <span class="enscript-type">char</span> pathname_t[MAXPATHLEN];

<span class="enscript-type">struct</span> hfs_journal_info {
	off_t	jstart;
	off_t	jsize;
};


<span class="enscript-comment">// Will be deprecated and replaced by hfs_fsinfo
</span><span class="enscript-type">struct</span> hfsinfo_metadata {
	uint32_t total;
	uint32_t extents;
	uint32_t catalog;
	uint32_t allocation;
	uint32_t attribute;
	uint32_t journal;
	uint32_t reserved[4];
};

<span class="enscript-comment">/*
 * Flags for hfs_fsinfo_data structure
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSINFO_CLASS_A</span>      0x0001	<span class="enscript-comment">/* Information for class A files requested */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSINFO_CLASS_B</span>      0x0002	<span class="enscript-comment">/* Information for class B files requested */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSINFO_CLASS_C</span>      0x0004	<span class="enscript-comment">/* Information for class C files requested */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSINFO_CLASS_D</span>      0x0008	<span class="enscript-comment">/* Information for class D files requested */</span>

<span class="enscript-comment">/*
 * Maximum number of buckets to represent range from 0 to 1TB (2^40) in
 * increments of power of 2, and one catch-all bucket for anything that
 * is greater than 1TB
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSINFO_DATA_MAX_BUCKETS</span>     42

<span class="enscript-comment">/*
 * Maximum number of buckets to represents percentage range from 0 to 100
 * in increments of 10.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSINFO_PERCENT_MAX_BUCKETS</span>  10

<span class="enscript-comment">/*
 * Maximum number of buckets to represent number of file/directory name characters
 * (range 1 to 255) in increments of 5.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSINFO_NAME_MAX_BUCKETS</span>     51

<span class="enscript-comment">/*
 * Version number to ensure that the caller and the kernel have same understanding
 * of the hfs_fsinfo_data structure.  This version needs to be bumped whenever the
 * number of buckets is changed.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSINFO_VERSION</span>              1

<span class="enscript-comment">/*
 * hfs_fsinfo_data is generic data structure to aggregate information like sizes
 * or counts in buckets of power of 2.  Each bucket represents a range of values
 * that is determined based on its index in the array.  Specifically, buckets[i]
 * represents values that are greater than or equal to 2^(i-1) and less than 2^i,
 * except the last bucket which represents range greater than or equal to 2^(i-1)
 *
 * The current maximum number of buckets is 41, so we can represent range from
 * 0 up to 1TB in increments of power of 2, and then a catch-all bucket of
 * anything that is greater than or equal to 1TB.
 *
 * For example,
 * bucket[0]  -&gt; greater than or equal to 0 and less than 1
 * bucket[1]  -&gt; greater than or equal to 1 and less than 2
 * bucket[10] -&gt; greater than or equal to 2^(10-1) = 512 and less than 2^10 = 1024
 * bucket[20] -&gt; greater than or equal to 2^(20-1) = 512KB and less than 2^20 = 1MB
 * bucket[41] -&gt; greater than or equal to 2^(41-1) = 1TB
 *
 * Note that fsctls that populate this data structure can take long time to
 * execute as this operation can be I/O intensive (traversing btrees) and compute
 * intensive.
 *
 * WARNING: Any changes to this structure should also update version number to
 * ensure that the clients and kernel are reading/writing correctly.
 */</span>

<span class="enscript-comment">/* 
 * The header includes the user input fields.
 */</span>
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> hfs_fsinfo_header {
	uint32_t request_type;
	uint16_t version;
	uint16_t flags;
} hfs_fsinfo_header_t;

<span class="enscript-type">struct</span> hfs_fsinfo_data {
	hfs_fsinfo_header_t header;
	uint32_t			bucket[HFS_FSINFO_DATA_MAX_BUCKETS];
};

<span class="enscript-comment">/*
 * Structure to represent information about metadata files
 *
 * WARNING: Any changes to this structure should also update version number to
 * ensure that the clients and kernel are reading/writing correctly.
 */</span>
<span class="enscript-type">struct</span> hfs_fsinfo_metadata {
	hfs_fsinfo_header_t header;
	uint32_t			extents;
	uint32_t			catalog;
	uint32_t			allocation;
	uint32_t			attribute;
	uint32_t			journal;
};

<span class="enscript-comment">/*
 * Structure to represent distribution of number of file name characters
 * in increments of 5s.  Each bucket represents a range of values that is
 * determined based on its index in the array.  So bucket[i] represents values
 * that are greater than or equal to (i*5) and less than ((i+1)*10).
 *
 * Since this structure represents range of file name characters and the
 * maximum number of unicode characters in HFS+ is 255, the maximum number
 * of buckets will be 52 [0..51].
 *
 * For example,
 * bucket[4] -&gt; greater than or equal to 20 and less than 25 characters
 * bucket[51] -&gt; equal to 255 characters
 *
 * WARNING: Any changes to this structure should also update version number to
 * ensure that the clients and kernel are reading/writing correctly.
 */</span>
<span class="enscript-type">struct</span> hfs_fsinfo_name {
	hfs_fsinfo_header_t	header;
	uint32_t			bucket[HFS_FSINFO_NAME_MAX_BUCKETS];
};

<span class="enscript-comment">/*
 * Structure to represent information about content protection classes
 *
 * WARNING: Any changes to this structure should also update version number to
 * ensure that the clients and kernel are reading/writing correctly.
 */</span>
<span class="enscript-type">struct</span> hfs_fsinfo_cprotect {
	hfs_fsinfo_header_t	header;
	uint32_t class_A;
	uint32_t class_B;
	uint32_t class_C;
	uint32_t class_D;
	uint32_t class_E;
	uint32_t class_F;
};

<span class="enscript-comment">/*
 * Union of all the different values returned by HFSIOC_FSINFO fsctl
 */</span>
<span class="enscript-type">union</span> hfs_fsinfo {
	hfs_fsinfo_header_t			header;
	<span class="enscript-type">struct</span> hfs_fsinfo_data		data;
	<span class="enscript-type">struct</span> hfs_fsinfo_metadata	metadata;
	<span class="enscript-type">struct</span> hfs_fsinfo_name		name;
	<span class="enscript-type">struct</span> hfs_fsinfo_cprotect cprotect;
};
<span class="enscript-type">typedef</span> <span class="enscript-type">union</span> hfs_fsinfo hfs_fsinfo;

<span class="enscript-comment">/*
 * Type of FSINFO requested, specified by the caller in request_type field
 */</span>
<span class="enscript-type">enum</span> {
	<span class="enscript-comment">/* Information about number of allocation blocks for each metadata file, returns struct hfs_fsinfo_metadata */</span>
	HFS_FSINFO_METADATA_BLOCKS_INFO	= 1,
	
	<span class="enscript-comment">/* Information about number of extents for each metadata file, returns struct hfs_fsinfo_metadata */</span>
	HFS_FSINFO_METADATA_EXTENTS		= 2,
	
	<span class="enscript-comment">/* Information about percentage of free nodes vs used nodes in metadata btrees, returns struct hfs_fsinfo_metadata */</span>
	HFS_FSINFO_METADATA_PERCENTFREE	= 3,
	
	<span class="enscript-comment">/* Distribution of number of extents for data files (data fork, no rsrc fork, no xattr), returns struct hfs_fsinfo_data */</span>
	HFS_FSINFO_FILE_EXTENT_COUNT	= 4,
	
	<span class="enscript-comment">/* Distribution of extent sizes for data files (data fork, no rsrc fork, no xattr), returns struct hfs_fsinfo_data */</span>
	HFS_FSINFO_FILE_EXTENT_SIZE		= 5,
	
	<span class="enscript-comment">/* Distribution of file sizes for data files (data fork, no rsrc fork, no xattr), returns struct hfs_fsinfo_data */</span>
	HFS_FSINFO_FILE_SIZE			= 6,

	<span class="enscript-comment">/* Distribution of valence for all directories, returns struct hfs_fsinfo_data */</span>
	HFS_FSINFO_DIR_VALENCE			= 7,
	
	<span class="enscript-comment">/* Distribution of file/directory name size in unicode characters, returns struct hfs_fsinfo_name */</span>
	HFS_FSINFO_NAME_SIZE			= 8,
	
	<span class="enscript-comment">/* Distribution of extended attribute sizes, returns hfs_fsinfo_data */</span>
	HFS_FSINFO_XATTR_SIZE			= 9,
	
	<span class="enscript-comment">/* Distribution of free space for the entire file system, returns struct hfs_fsinfo_data */</span>
	HFS_FSINFO_FREE_EXTENTS			= 10,

	<span class="enscript-comment">/* Information about number of files belonging to each class, returns hfs_fsinfo_cprotect */</span>
	HFS_FSINFO_FILE_CPROTECT_COUNT	= 11,

	<span class="enscript-comment">/*
	 * Distribution of symbolic link sizes for data files (data fork, no rsrc fork, no xattr),
	 * returns struct hfs_fsinfo_data
	 */</span>
	HFS_FSINFO_SYMLINK_SIZE			= 12,
};


<span class="enscript-comment">/* HFS FS CONTROL COMMANDS */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_RESIZE_PROGRESS</span>  _IOR(<span class="enscript-string">'h'</span>, 1, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_RESIZE_PROGRESS</span>  IOCBASECMD(HFSIOC_RESIZE_PROGRESS)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_RESIZE_VOLUME</span>  _IOW(<span class="enscript-string">'h'</span>, 2, u_int64_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_RESIZE_VOLUME</span>  IOCBASECMD(HFSIOC_RESIZE_VOLUME)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_CHANGE_NEXT_ALLOCATION</span>  _IOWR(<span class="enscript-string">'h'</span>, 3, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_CHANGE_NEXT_ALLOCATION</span>  IOCBASECMD(HFSIOC_CHANGE_NEXT_ALLOCATION)
<span class="enscript-comment">/* Magic value for next allocation to use with fcntl to set next allocation
 * to zero and never update it again on new block allocation.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_NO_UPDATE_NEXT_ALLOCATION</span> 	0xffffFFFF

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_GETCREATETIME</span>  _IOR(<span class="enscript-string">'h'</span>, 4, time_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_GETCREATETIME</span>  IOCBASECMD(HFSIOC_GETCREATETIME)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_SETBACKINGSTOREINFO</span>  _IOW(<span class="enscript-string">'h'</span>, 7, struct hfs_backingstoreinfo)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_SETBACKINGSTOREINFO</span>  IOCBASECMD(HFSIOC_SETBACKINGSTOREINFO)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_CLRBACKINGSTOREINFO</span>  _IO(<span class="enscript-string">'h'</span>, 8)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_CLRBACKINGSTOREINFO</span>  IOCBASECMD(HFSIOC_CLRBACKINGSTOREINFO)

<span class="enscript-comment">// 'h', 9 used to be HFSIOC_BULKACCESS which is now deprecated
</span>
<span class="enscript-comment">/* Unsupported - Previously used to enable/disable ACLs */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_UNSUPPORTED</span>  _IOW(<span class="enscript-string">'h'</span>, 10, int32_t)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_PREV_LINK</span>  _IOWR(<span class="enscript-string">'h'</span>, 11, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_PREV_LINK</span>  IOCBASECMD(HFSIOC_PREV_LINK)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_NEXT_LINK</span>  _IOWR(<span class="enscript-string">'h'</span>, 12, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_NEXT_LINK</span>  IOCBASECMD(HFSIOC_NEXT_LINK)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_GETPATH</span>  _IOWR(<span class="enscript-string">'h'</span>, 13, pathname_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_GETPATH</span>  IOCBASECMD(HFSIOC_GETPATH)
<span class="enscript-comment">/* By default, the path returned by HFS_GETPATH is an absolute path, 
 * i.e. it also contains the mount point of the volume on which the 
 * fileID exists.  If the following bit is set, the path returned is
 * relative to the root of the volume.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_GETPATH_VOLUME_RELATIVE</span>	0x1

<span class="enscript-comment">/* Enable/disable extent-based extended attributes */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_SET_XATTREXTENTS_STATE</span>  _IOW(<span class="enscript-string">'h'</span>, 14, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_SET_XATTREXTENTS_STATE</span>  IOCBASECMD(HFSIOC_SET_XATTREXTENTS_STATE)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_EXT_BULKACCESS</span> _IOW(<span class="enscript-string">'h'</span>, 15, struct user32_ext_access_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_EXT_BULKACCESS_FSCTL</span> IOCBASECMD(HFSIOC_EXT_BULKACCESS)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_MARK_BOOT_CORRUPT</span> _IO(<span class="enscript-string">'h'</span>, 16)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_MARK_BOOT_CORRUPT</span> IOCBASECMD(HFSIOC_MARK_BOOT_CORRUPT)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_GET_JOURNAL_INFO</span>	_IOR(<span class="enscript-string">'h'</span>, 17, struct hfs_journal_info)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">HFS_FSCTL_GET_JOURNAL_INFO</span>	IOCBASECMD(HFSIOC_GET_JOURNAL_INFO)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_SET_VERY_LOW_DISK</span> _IOW(<span class="enscript-string">'h'</span>, 20, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSCTL_SET_VERY_LOW_DISK</span> IOCBASECMD(HFSIOC_SET_VERY_LOW_DISK)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_SET_LOW_DISK</span> _IOW(<span class="enscript-string">'h'</span>, 21, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSCTL_SET_LOW_DISK</span> IOCBASECMD(HFSIOC_SET_LOW_DISK)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_SET_DESIRED_DISK</span> _IOW(<span class="enscript-string">'h'</span>, 22, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSCTL_SET_DESIRED_DISK</span> IOCBASECMD(HFSIOC_SET_DESIRED_DISK)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_SET_ALWAYS_ZEROFILL</span> _IOW(<span class="enscript-string">'h'</span>, 23, int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_SET_ALWAYS_ZEROFILL</span> IOCBASECMD(HFSIOC_SET_ALWAYS_ZEROFILL)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_VOLUME_STATUS</span>  _IOR(<span class="enscript-string">'h'</span>, 24, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_VOLUME_STATUS</span>  IOCBASECMD(HFSIOC_VOLUME_STATUS)

<span class="enscript-comment">/* Disable metadata zone for given volume */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_DISABLE_METAZONE</span>	_IO(<span class="enscript-string">'h'</span>, 25)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_DISABLE_METAZONE</span>	IOCBASECMD(HFSIOC_DISABLE_METAZONE)

<span class="enscript-comment">/* Change the next CNID value */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_CHANGE_NEXTCNID</span>	_IOWR(<span class="enscript-string">'h'</span>, 26, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_CHANGE_NEXTCNID</span>		IOCBASECMD(HFSIOC_CHANGE_NEXTCNID)
	
<span class="enscript-comment">/* Get the low disk space values */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">HFSIOC_GET_VERY_LOW_DISK</span>	_IOR(<span class="enscript-string">'h'</span>, 27, u_int32_t)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">HFS_FSCTL_GET_VERY_LOW_DISK</span>	IOCBASECMD(HFSIOC_GET_VERY_LOW_DISK)

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">HFSIOC_GET_LOW_DISK</span>	_IOR(<span class="enscript-string">'h'</span>, 28, u_int32_t)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">HFS_FSCTL_GET_LOW_DISK</span>	IOCBASECMD(HFSIOC_GET_LOW_DISK)

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">HFSIOC_GET_DESIRED_DISK</span>	_IOR(<span class="enscript-string">'h'</span>, 29, u_int32_t)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">HFS_FSCTL_GET_DESIRED_DISK</span>	IOCBASECMD(HFSIOC_GET_DESIRED_DISK)

<span class="enscript-comment">/* 30 was HFSIOC_GET_WRITE_GEN_COUNTER and is now deprecated */</span>

<span class="enscript-comment">/* 31 was HFSIOC_GET_DOCUMENT_ID and is now deprecated */</span>

<span class="enscript-comment">/* revisiond only uses this when something transforms in a way the kernel can't track such as &quot;foo.rtf&quot; -&gt; &quot;foo.rtfd&quot; */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_TRANSFER_DOCUMENT_ID</span>  _IOW(<span class="enscript-string">'h'</span>, 32, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_TRANSFER_DOCUMENT_ID</span>  IOCBASECMD(HFSIOC_TRANSFER_DOCUMENT_ID)


<span class="enscript-comment">/* 
 * XXX: Will be deprecated and replaced by HFSIOC_GET_FSINFO
 *
 * Get information about number of file system allocation blocks used by metadata 
 * files on the volume, including individual btrees and journal file.  The caller 
 * can determine the size of file system allocation block using value returned as 
 * f_bsize by statfs(2).
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_FSINFO_METADATA_BLOCKS</span>  _IOWR(<span class="enscript-string">'h'</span>, 38, struct hfsinfo_metadata)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_FSINFO_METADATA_BLOCKS</span>     IOCBASECMD(HFSIOC_FSINFO_METADATA_BLOCKS)

<span class="enscript-comment">/* Send TRIMs for all free blocks to the underlying device */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_CS_FREESPACE_TRIM</span> _IOWR(<span class="enscript-string">'h'</span>, 39, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_CS_FREESPACE_TRIM</span>    IOCBASECMD(HFSIOC_CS_FREESPACE_TRIM)


<span class="enscript-comment">/* Get file system information for the given volume */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_GET_FSINFO</span>        _IOWR(<span class="enscript-string">'h'</span>, 45, hfs_fsinfo)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_GET_FSINFO</span>           IOCBASECMD(HFSIOC_GET_FSINFO)

<span class="enscript-comment">/* Re-pin hotfile data; argument controls what state gets repinned */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_REPIN_HOTFILE_STATE</span> _IOWR(<span class="enscript-string">'h'</span>, 46, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_REPIN_HOTFILE_STATE</span>    IOCBASECMD(HFSIOC_REPIN_HOTFILE_STATE)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_REPIN_METADATA</span>      0x0001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_REPIN_USERDATA</span>      0x0002

<span class="enscript-comment">/* Mark a directory or file as worth caching on any underlying &quot;fast&quot; device */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFSIOC_SET_HOTFILE_STATE</span> _IOWR(<span class="enscript-string">'h'</span>, 47, u_int32_t)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_SET_HOTFILE_STATE</span>    IOCBASECMD(HFSIOC_SET_HOTFILE_STATE)

<span class="enscript-comment">/* flags to pass to SET_HOTFILE_STATE */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_MARK_FASTDEVCANDIDATE</span>   0x0001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_UNMARK_FASTDEVCANDIDATE</span> 0x0002
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">HFS_NEVER_FASTDEVCANDIDATE</span>  0x0004


#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* __APPLE_API_UNSTABLE */</span>

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* ! _HFS_FSCTL_H_ */</span>
</pre>
<hr />
</body></html>