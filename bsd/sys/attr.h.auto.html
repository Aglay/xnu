<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>attr.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">attr.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2000-2010 Apple Computer, Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>

<span class="enscript-comment">/*
 * attr.h - attribute data structures and interfaces
 *
 * Copyright (c) 1998, Apple Computer, Inc.  All Rights Reserved.
 */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_SYS_ATTR_H_</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">_SYS_ATTR_H_</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/appleapiopts.h&gt;</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__APPLE_API_UNSTABLE</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/types.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/ucred.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/time.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/cdefs.h&gt;</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FSOPT_NOFOLLOW</span> 		0x00000001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FSOPT_NOINMEMUPDATE</span> 	0x00000002
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FSOPT_REPORT_FULLSIZE</span>	0x00000004
<span class="enscript-comment">/* The following option only valid when requesting ATTR_CMN_RETURNED_ATTRS */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FSOPT_PACK_INVAL_ATTRS</span>	0x00000008

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">PRIVATE</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FSOPT_EXCHANGE_DATA_ONLY</span> 0x0000010
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FSOPT_ATTR_CMN_EXTENDED</span>	0x00000020

<span class="enscript-comment">/* we currently aren't anywhere near this amount for a valid
 * fssearchblock.sizeofsearchparams1 or fssearchblock.sizeofsearchparams2
 * but we put a sanity check in to avoid abuse of the value passed in from
 * user land.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SEARCHFS_MAX_SEARCHPARMS</span>  4096

<span class="enscript-type">typedef</span> u_int32_t text_encoding_t;

<span class="enscript-type">typedef</span> u_int32_t fsobj_type_t;

<span class="enscript-type">typedef</span> u_int32_t fsobj_tag_t;

<span class="enscript-type">typedef</span> u_int32_t fsfile_type_t;

<span class="enscript-type">typedef</span> u_int32_t fsvolid_t;

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> fsobj_id {
	u_int32_t		fid_objno;
	u_int32_t		fid_generation;
} fsobj_id_t;

<span class="enscript-type">typedef</span> u_int32_t attrgroup_t;

<span class="enscript-type">struct</span> attrlist {
	u_short bitmapcount;			<span class="enscript-comment">/* number of attr. bit sets in list (should be 5) */</span>
	u_int16_t reserved;			<span class="enscript-comment">/* (to maintain 4-byte alignment) */</span>
	attrgroup_t commonattr;			<span class="enscript-comment">/* common attribute group */</span>
	attrgroup_t volattr;			<span class="enscript-comment">/* Volume attribute group */</span>
	attrgroup_t dirattr;			<span class="enscript-comment">/* directory attribute group */</span>
	attrgroup_t fileattr;			<span class="enscript-comment">/* file attribute group */</span>
	attrgroup_t forkattr;			<span class="enscript-comment">/* fork attribute group */</span>
};
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_BIT_MAP_COUNT</span> 5

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> attribute_set {
	attrgroup_t commonattr;			<span class="enscript-comment">/* common attribute group */</span>
	attrgroup_t volattr;			<span class="enscript-comment">/* Volume attribute group */</span>
	attrgroup_t dirattr;			<span class="enscript-comment">/* directory attribute group */</span>
	attrgroup_t fileattr;			<span class="enscript-comment">/* file attribute group */</span>
	attrgroup_t forkattr;			<span class="enscript-comment">/* fork attribute group */</span>
} attribute_set_t;

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> attrreference {
	int32_t     attr_dataoffset;
	u_int32_t   attr_length;
} attrreference_t;

<span class="enscript-comment">/* XXX PPD This is derived from HFSVolumePriv.h and should perhaps be referenced from there? */</span>

<span class="enscript-type">struct</span> diskextent {
	u_int32_t					startblock;				<span class="enscript-comment">/* first block allocated */</span>
	u_int32_t					blockcount;				<span class="enscript-comment">/* number of blocks allocated */</span>
};

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> diskextent extentrecord[8];

<span class="enscript-type">typedef</span> u_int32_t vol_capabilities_set_t[4];

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAPABILITIES_FORMAT</span> 0
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAPABILITIES_INTERFACES</span> 1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAPABILITIES_RESERVED1</span> 2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAPABILITIES_RESERVED2</span> 3

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> vol_capabilities_attr {
	vol_capabilities_set_t capabilities;
	vol_capabilities_set_t valid;
} vol_capabilities_attr_t;

<span class="enscript-comment">/*
 * XXX this value needs to be raised - 3893388
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_MAX_BUFFER</span>		8192

<span class="enscript-comment">/*
 * VOL_CAP_FMT_PERSISTENTOBJECTIDS: When set, the volume has object IDs
 * that are persistent (retain their values even when the volume is
 * unmounted and remounted), and a file or directory can be looked up
 * by ID.  Volumes that support VolFS and can support Carbon File ID
 * references should set this bit.
 *
 * VOL_CAP_FMT_SYMBOLICLINKS: When set, the volume supports symbolic
 * links.  The symlink(), readlink(), and lstat() calls all use this
 * symbolic link.
 *
 * VOL_CAP_FMT_HARDLINKS: When set, the volume supports hard links.
 * The link() call creates hard links.
 *
 * VOL_CAP_FMT_JOURNAL: When set, the volume is capable of supporting
 * a journal used to speed recovery in case of unplanned shutdown
 * (such as a power outage or crash).  This bit does not necessarily
 * mean the volume is actively using a journal for recovery.
 *
 * VOL_CAP_FMT_JOURNAL_ACTIVE: When set, the volume is currently using
 * a journal for use in speeding recovery after an unplanned shutdown.
 * This bit can be set only if VOL_CAP_FMT_JOURNAL is also set.
 *
 * VOL_CAP_FMT_NO_ROOT_TIMES: When set, the volume format does not
 * store reliable times for the root directory, so you should not
 * depend on them to detect changes, etc.
 *
 * VOL_CAP_FMT_SPARSE_FILES: When set, the volume supports sparse files.
 * That is, files which can have &quot;holes&quot; that have never been written
 * to, and are not allocated on disk.  Sparse files may have an
 * allocated size that is less than the file's logical length.
 *
 * VOL_CAP_FMT_ZERO_RUNS: For security reasons, parts of a file (runs)
 * that have never been written to must appear to contain zeroes.  When
 * this bit is set, the volume keeps track of allocated but unwritten
 * runs of a file so that it can substitute zeroes without actually
 * writing zeroes to the media.  This provides performance similar to
 * sparse files, but not the space savings.
 *
 * VOL_CAP_FMT_CASE_SENSITIVE: When set, file and directory names are
 * case sensitive (upper and lower case are different).  When clear,
 * an upper case character is equivalent to a lower case character,
 * and you can't have two names that differ solely in the case of
 * the characters.
 *
 * VOL_CAP_FMT_CASE_PRESERVING: When set, file and directory names
 * preserve the difference between upper and lower case.  If clear,
 * the volume may change the case of some characters (typically
 * making them all upper or all lower case).  A volume that sets
 * VOL_CAP_FMT_CASE_SENSITIVE should also set VOL_CAP_FMT_CASE_PRESERVING.
 *
 * VOL_CAP_FMT_FAST_STATFS: This bit is used as a hint to upper layers
 * (especially Carbon) that statfs() is fast enough that its results
 * need not be cached by those upper layers.  A volume that caches
 * the statfs information in its in-memory structures should set this bit.
 * A volume that must always read from disk or always perform a network
 * transaction should not set this bit.  
 * 
 * VOL_CAP_FMT_2TB_FILESIZE: If this bit is set the volume format supports
 * file sizes larger than 4GB, and potentially up to 2TB; it does not
 * indicate whether the filesystem supports files larger than that.
 *
 * VOL_CAP_FMT_OPENDENYMODES: When set, the volume supports open deny
 * modes (e.g. &quot;open for read write, deny write&quot;; effectively, mandatory
 * file locking based on open modes).
 *
 * VOL_CAP_FMT_HIDDEN_FILES: When set, the volume supports the UF_HIDDEN
 * file flag, and the UF_HIDDEN flag is mapped to that volume's native
 * &quot;hidden&quot; or &quot;invisible&quot; bit (which may be the invisible bit from the
 * Finder Info extended attribute).
 *
 * VOL_CAP_FMT_PATH_FROM_ID:  When set, the volume supports the ability
 * to derive a pathname to the root of the file system given only the
 * id of an object.  This also implies that object ids on this file
 * system are persistent and not recycled.  This is a very specialized
 * capability and it is assumed that most file systems will not support
 * it.  Its use is for legacy non-posix APIs like ResolveFileIDRef.
 * 
 * VOL_CAP_FMT_NO_VOLUME_SIZES: When set, the volume does not support 
 * returning values for total data blocks, available blocks, or free blocks
 * (as in f_blocks, f_bavail, or f_bfree in &quot;struct statfs&quot;).  Historically,
 * those values were set to 0xFFFFFFFF for volumes that did not support them.
 * 
 * VOL_CAP_FMT_DECMPFS_COMPRESSION: When set, the volume supports transparent
 * decompression of compressed files using decmpfs.
 *
 * VOL_CAP_FMT_64BIT_OBJECT_IDS: When set, the volume uses object IDs that
 * are 64-bit. This means that ATTR_CMN_FILEID and ATTR_CMN_PARENTID are the
 * only legitimate attributes for obtaining object IDs from this volume and the
 * 32-bit fid_objno fields of the fsobj_id_t returned by ATTR_CMN_OBJID,
 * ATTR_CMN_OBJPERMID, and ATTR_CMN_PAROBJID are undefined.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_PERSISTENTOBJECTIDS</span>		0x00000001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_SYMBOLICLINKS</span> 		0x00000002
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_HARDLINKS</span>      		0x00000004
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_JOURNAL</span>       		0x00000008
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_JOURNAL_ACTIVE</span> 		0x00000010
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_NO_ROOT_TIMES</span> 		0x00000020
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_SPARSE_FILES</span> 		0x00000040
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_ZERO_RUNS</span>     		0x00000080
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_CASE_SENSITIVE</span> 		0x00000100
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_CASE_PRESERVING</span>		0x00000200
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_FAST_STATFS</span> 		0x00000400
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_2TB_FILESIZE</span>		0x00000800
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_OPENDENYMODES</span>		0x00001000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_HIDDEN_FILES</span>		0x00002000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_PATH_FROM_ID</span>		0x00004000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_NO_VOLUME_SIZES</span>		0x00008000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_DECMPFS_COMPRESSION</span>		0x00010000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_FMT_64BIT_OBJECT_IDS</span>		0x00020000


<span class="enscript-comment">/*
 * VOL_CAP_INT_SEARCHFS: When set, the volume implements the
 * searchfs() system call (the vnop_searchfs vnode operation).
 *
 * VOL_CAP_INT_ATTRLIST: When set, the volume implements the
 * getattrlist() and setattrlist() system calls (vnop_getattrlist
 * and vnop_setattrlist vnode operations) for the volume, files,
 * and directories.  The volume may or may not implement the
 * readdirattr() system call.  XXX Is there any minimum set
 * of attributes that should be supported?  To determine the
 * set of supported attributes, get the ATTR_VOL_ATTRIBUTES
 * attribute of the volume.
 *
 * VOL_CAP_INT_NFSEXPORT: When set, the volume implements exporting
 * of NFS volumes.
 *
 * VOL_CAP_INT_READDIRATTR: When set, the volume implements the
 * readdirattr() system call (vnop_readdirattr vnode operation).
 *
 * VOL_CAP_INT_EXCHANGEDATA: When set, the volume implements the
 * exchangedata() system call (VNOP_EXCHANGE vnode operation).
 *
 * VOL_CAP_INT_COPYFILE: When set, the volume implements the
 * VOP_COPYFILE vnode operation.  (XXX There should be a copyfile()
 * system call in &lt;unistd.h&gt;.)
 *
 * VOL_CAP_INT_ALLOCATE: When set, the volume implements the
 * VNOP_ALLOCATE vnode operation, which means it implements the
 * F_PREALLOCATE selector of fcntl(2).
 *
 * VOL_CAP_INT_VOL_RENAME: When set, the volume implements the
 * ATTR_VOL_NAME attribute for both getattrlist() and setattrlist().
 * The volume can be renamed by setting ATTR_VOL_NAME with setattrlist().
 *
 * VOL_CAP_INT_ADVLOCK: When set, the volume implements POSIX style
 * byte range locks via vnop_advlock (accessible from fcntl(2)).
 *
 * VOL_CAP_INT_FLOCK: When set, the volume implements whole-file flock(2)
 * style locks via vnop_advlock.  This includes the O_EXLOCK and O_SHLOCK
 * flags of the open(2) call.
 *
 * VOL_CAP_INT_EXTENDED_SECURITY: When set, the volume implements
 * extended security (ACLs).
 *
 * VOL_CAP_INT_USERACCESS:  When set, the volume supports the
 * ATTR_CMN_USERACCESS attribute (used to get the user's access
 * mode to the file).
 *
 * VOL_CAP_INT_MANLOCK: When set, the volume supports AFP-style
 * mandatory byte range locks via an ioctl().
 *
 * VOL_CAP_INT_EXTENDED_ATTR: When set, the volume implements
 * native extended attribues.
 *
 * VOL_CAP_INT_NAMEDSTREAMS: When set, the volume supports
 * native named streams.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_SEARCHFS</span>			0x00000001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_ATTRLIST</span>			0x00000002
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_NFSEXPORT</span>			0x00000004
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_READDIRATTR</span>			0x00000008
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_EXCHANGEDATA</span>		0x00000010
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_COPYFILE</span>			0x00000020
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_ALLOCATE</span>			0x00000040
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_VOL_RENAME</span>			0x00000080
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_ADVLOCK</span>			0x00000100
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_FLOCK</span>			0x00000200
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_EXTENDED_SECURITY</span>		0x00000400
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_USERACCESS</span>			0x00000800
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_MANLOCK</span>			0x00001000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_NAMEDSTREAMS</span>		0x00002000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_EXTENDED_ATTR</span>		0x00004000
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">PRIVATE</span>
<span class="enscript-comment">/* Volume supports kqueue notifications for remote events */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VOL_CAP_INT_REMOTE_EVENT</span>		0x00008000
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* PRIVATE */</span>

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> vol_attributes_attr {
	attribute_set_t validattr;
	attribute_set_t nativeattr;
} vol_attributes_attr_t;

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_NAME</span>				0x00000001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_DEVID</span>				0x00000002
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_FSID</span>				0x00000004
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_OBJTYPE</span>			0x00000008
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_OBJTAG</span>				0x00000010
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_OBJID</span>				0x00000020
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_OBJPERMANENTID</span>			0x00000040
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_PAROBJID</span>			0x00000080
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_SCRIPT</span>				0x00000100
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_CRTIME</span>				0x00000200
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_MODTIME</span>			0x00000400
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_CHGTIME</span>			0x00000800
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_ACCTIME</span>			0x00001000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_BKUPTIME</span>			0x00002000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_FNDRINFO</span>			0x00004000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_OWNERID</span>			0x00008000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_GRPID</span>				0x00010000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_ACCESSMASK</span>			0x00020000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_FLAGS</span>				0x00040000

<span class="enscript-comment">/* The following were defined as:				*/</span>
<span class="enscript-comment">/*  	#define ATTR_CMN_NAMEDATTRCOUNT		0x00080000	*/</span>
<span class="enscript-comment">/* 	#define ATTR_CMN_NAMEDATTRLIST		0x00100000	*/</span>
<span class="enscript-comment">/* These bits have been salvaged for use as:			*/</span>
<span class="enscript-comment">/*	#define ATTR_CMN_GEN_COUNT		0x00080000	*/</span>
<span class="enscript-comment">/*	#define ATTR_CMN_DOCUMENT_ID		0x00100000	*/</span>
<span class="enscript-comment">/* They can only be used with the  FSOPT_ATTR_CMN_EXTENDED	*/</span>
<span class="enscript-comment">/* option flag.                                           	*/</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_GEN_COUNT</span>			0x00080000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_DOCUMENT_ID</span>			0x00100000

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_USERACCESS</span>			0x00200000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_EXTENDED_SECURITY</span>		0x00400000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_UUID</span>				0x00800000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_GRPUUID</span>			0x01000000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_FILEID</span>				0x02000000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_PARENTID</span>			0x04000000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_FULLPATH</span>			0x08000000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_ADDEDTIME</span>			0x10000000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_ERROR</span>				0x20000000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_DATA_PROTECT_FLAGS</span>		0x40000000

<span class="enscript-comment">/*
 * ATTR_CMN_RETURNED_ATTRS is only valid with getattrlist(2) and
 * getattrlistbulk(2). It is always the first attribute in the return buffer.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_RETURNED_ATTRS</span> 		0x80000000	

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_VALIDMASK</span>			0xFFFFFFFF
<span class="enscript-comment">/*
 * The settable ATTR_CMN_* attributes include the following:
 * ATTR_CMN_SCRIPT
 * ATTR_CMN_CRTIME
 * ATTR_CMN_MODTIME
 * ATTR_CMN_CHGTIME
 * 
 * ATTR_CMN_ACCTIME
 * ATTR_CMN_BKUPTIME
 * ATTR_CMN_FNDRINFO
 * ATTR_CMN_OWNERID
 * 
 * ATTR_CMN_GRPID
 * ATTR_CMN_ACCESSMASK
 * ATTR_CMN_FLAGS
 * 
 * ATTR_CMN_EXTENDED_SECURITY
 * ATTR_CMN_UUID
 * 
 * ATTR_CMN_GRPUUID
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_SETMASK</span>			0x01C7FF00
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_VOLSETMASK</span>			0x00006700

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_FSTYPE</span>				0x00000001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_SIGNATURE</span>			0x00000002
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_SIZE</span>				0x00000004
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_SPACEFREE</span>			0x00000008
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_SPACEAVAIL</span>			0x00000010
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_MINALLOCATION</span>			0x00000020
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_ALLOCATIONCLUMP</span>		0x00000040
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_IOBLOCKSIZE</span>			0x00000080
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_OBJCOUNT</span>			0x00000100
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_FILECOUNT</span>			0x00000200
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_DIRCOUNT</span>			0x00000400
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_MAXOBJCOUNT</span>			0x00000800
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_MOUNTPOINT</span>			0x00001000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_NAME</span>				0x00002000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_MOUNTFLAGS</span>			0x00004000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_MOUNTEDDEVICE</span>			0x00008000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_ENCODINGSUSED</span>			0x00010000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_CAPABILITIES</span>			0x00020000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_UUID</span>				0x00040000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_ATTRIBUTES</span>			0x40000000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_INFO</span>				0x80000000

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_VALIDMASK</span>			0xC007FFFF

<span class="enscript-comment">/*
 * The list of settable ATTR_VOL_* attributes include the following:
 * ATTR_VOL_NAME
 * ATTR_VOL_INFO
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_VOL_SETMASK</span>			0x80002000


<span class="enscript-comment">/* File/directory attributes: */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_DIR_LINKCOUNT</span>			0x00000001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_DIR_ENTRYCOUNT</span>			0x00000002
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_DIR_MOUNTSTATUS</span>			0x00000004
<span class="enscript-comment">/* ATTR_DIR_MOUNTSTATUS Flags: */</span>
#<span class="enscript-reference">define</span>	  <span class="enscript-variable-name">DIR_MNTSTATUS_MNTPOINT</span>		0x00000001
#<span class="enscript-reference">define</span>	  <span class="enscript-variable-name">DIR_MNTSTATUS_TRIGGER</span>			0x00000002

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_DIR_VALIDMASK</span>			0x00000007
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_DIR_SETMASK</span>			0x00000000

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_LINKCOUNT</span>			0x00000001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_TOTALSIZE</span>			0x00000002
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_ALLOCSIZE</span>			0x00000004
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_IOBLOCKSIZE</span>			0x00000008
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_DEVTYPE</span>			0x00000020
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_FORKCOUNT</span>			0x00000080
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_FORKLIST</span>			0x00000100
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_DATALENGTH</span>			0x00000200
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_DATAALLOCSIZE</span>			0x00000400
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_RSRCLENGTH</span>			0x00001000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_RSRCALLOCSIZE</span>			0x00002000

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_VALIDMASK</span>			0x000037FF
<span class="enscript-comment">/* 
 * Settable ATTR_FILE_* attributes include:
 * ATTR_FILE_DEVTYPE
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_SETMASK</span>			0x00000020

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FORK_TOTALSIZE</span>			0x00000001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FORK_ALLOCSIZE</span>			0x00000002

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FORK_VALIDMASK</span>			0x00000003
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FORK_SETMASK</span>			0x00000000

<span class="enscript-comment">/* Obsolete, implemented, not supported */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_NAMEDATTRCOUNT</span>			0x00080000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_CMN_NAMEDATTRLIST</span>			0x00100000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_CLUMPSIZE</span>			0x00000010	<span class="enscript-comment">/* obsolete */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_FILETYPE</span>			0x00000040	<span class="enscript-comment">/* always zero */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_DATAEXTENTS</span>			0x00000800	<span class="enscript-comment">/* obsolete, HFS-specific */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_FILE_RSRCEXTENTS</span>			0x00004000	<span class="enscript-comment">/* obsolete, HFS-specific */</span>

<span class="enscript-comment">/* Required attributes for getattrlistbulk(2) */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ATTR_BULK_REQUIRED</span> (ATTR_CMN_NAME | ATTR_CMN_RETURNED_ATTRS)

<span class="enscript-comment">/*
 * Searchfs
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SRCHFS_START</span> 				0x00000001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SRCHFS_MATCHPARTIALNAMES</span> 		0x00000002
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SRCHFS_MATCHDIRS</span> 			0x00000004
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SRCHFS_MATCHFILES</span> 			0x00000008
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SRCHFS_SKIPLINKS</span> 			0x00000010
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SRCHFS_SKIPINVISIBLE</span>			0x00000020
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SRCHFS_SKIPPACKAGES</span>			0x00000040
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SRCHFS_SKIPINAPPROPRIATE</span>		0x00000080

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SRCHFS_NEGATEPARAMS</span> 			0x80000000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SRCHFS_VALIDOPTIONSMASK</span>			0x800000FF

<span class="enscript-type">struct</span> fssearchblock {
	<span class="enscript-type">struct</span> attrlist		*returnattrs;
	<span class="enscript-type">void</span>				*returnbuffer;
	size_t				returnbuffersize;
	u_long				maxmatches;
	<span class="enscript-type">struct</span> timeval		timelimit;
	<span class="enscript-type">void</span>				*searchparams1;
	size_t				sizeofsearchparams1;
	<span class="enscript-type">void</span>				*searchparams2;
	size_t				sizeofsearchparams2;
	<span class="enscript-type">struct</span> attrlist		searchattrs;
};

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL</span>
<span class="enscript-comment">/* LP64 version of fssearchblock.  all pointers and longs
 * grow when we're dealing with a 64-bit process.
 * WARNING - keep in sync with fssearchblock
 */</span>

<span class="enscript-type">struct</span> user64_fssearchblock {
	user64_addr_t         returnattrs;
	user64_addr_t         returnbuffer;
	user64_size_t         returnbuffersize;
	user64_ulong_t        maxmatches;
	<span class="enscript-type">struct</span> user64_timeval	timelimit;
	user64_addr_t         searchparams1;
	user64_size_t         sizeofsearchparams1;
	user64_addr_t         searchparams2;
	user64_size_t         sizeofsearchparams2;
	<span class="enscript-type">struct</span> attrlist		searchattrs;
};

<span class="enscript-type">struct</span> user32_fssearchblock {
	user32_addr_t         returnattrs;
	user32_addr_t         returnbuffer;
	user32_size_t         returnbuffersize;
	user32_ulong_t        maxmatches;
	<span class="enscript-type">struct</span> user32_timeval	timelimit;
	user32_addr_t         searchparams1;
	user32_size_t         sizeofsearchparams1;
	user32_addr_t         searchparams2;
	user32_size_t         sizeofsearchparams2;
	<span class="enscript-type">struct</span> attrlist		searchattrs;
};

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL */</span>

<span class="enscript-type">struct</span> searchstate {
	uint32_t			ss_union_flags;		<span class="enscript-comment">// for SRCHFS_START
</span>	uint32_t			ss_union_layer;		<span class="enscript-comment">// 0 = top
</span>	u_char				ss_fsstate[548];	<span class="enscript-comment">// fs private
</span>} __attribute__((packed));

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FST_EOF</span> (-1)				<span class="enscript-comment">/* end-of-file offset */</span>

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* __APPLE_API_UNSTABLE */</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* !_SYS_ATTR_H_ */</span>
</pre>
<hr />
</body></html>