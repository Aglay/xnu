<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>malloc.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">malloc.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2000-2013 Apple Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>
<span class="enscript-comment">/* Copyright (c) 1998, 1999 Apple Computer, Inc. All Rights Reserved */</span>
<span class="enscript-comment">/* Copyright (c) 1995, 1997 Apple Computer, Inc. All Rights Reserved */</span>
<span class="enscript-comment">/*
 * Copyright (c) 1987, 1993
 *	The Regents of the University of California.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@(#)malloc.h	8.5 (Berkeley) 5/3/95
 */</span>
<span class="enscript-comment">/*
 * NOTICE: This file was modified by SPARTA, Inc. in 2005 to introduce
 * support for mandatory and extensible security protections.  This notice
 * is included in support of clause 2.2 (b) of the Apple Public License,
 * Version 2.0.
 */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_SYS_MALLOC_H_</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">_SYS_MALLOC_H_</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/appleapiopts.h&gt;</span>


#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL</span>
<span class="enscript-comment">/*
 * flags to malloc
 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_WAITOK</span>	0x0000
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NOWAIT</span>	0x0001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_ZERO</span>          0x0004          <span class="enscript-comment">/* bzero the allocation */</span>


#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">BSD_KERNEL_PRIVATE</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">KMEMSTATS</span> 0

<span class="enscript-comment">/*
 * Types of memory to be allocated (not all are used by us)
 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_FREE</span>		0	<span class="enscript-comment">/* should be on free list */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MBUF</span>		1	<span class="enscript-comment">/* mbuf */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_DEVBUF</span>	2	<span class="enscript-comment">/* device driver memory */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_SOCKET</span>	3	<span class="enscript-comment">/* socket structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_PCB</span>		4	<span class="enscript-comment">/* protocol control block */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_RTABLE</span>	5	<span class="enscript-comment">/* routing tables */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_HTABLE</span>	6	<span class="enscript-comment">/* IMP host tables */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_FTABLE</span>	7	<span class="enscript-comment">/* fragment reassembly header */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_ZOMBIE</span>	8	<span class="enscript-comment">/* zombie proc status */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IFADDR</span>	9	<span class="enscript-comment">/* interface address */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_SOOPTS</span>	10	<span class="enscript-comment">/* socket options */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_SONAME</span>	11	<span class="enscript-comment">/* socket name */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NAMEI</span>		12	<span class="enscript-comment">/* namei path name buffer */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_GPROF</span>		13	<span class="enscript-comment">/* kernel profiling buffer */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IOCTLOPS</span>	14	<span class="enscript-comment">/* ioctl data buffer */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MAPMEM</span>	15	<span class="enscript-comment">/* mapped memory descriptors */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_CRED</span>		16	<span class="enscript-comment">/* credentials */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_PGRP</span>		17	<span class="enscript-comment">/* process group header */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_SESSION</span>	18	<span class="enscript-comment">/* session header */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IOV32</span>		19	<span class="enscript-comment">/* large iov's for 32 bit process */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MOUNT</span>		20	<span class="enscript-comment">/* vfs mount struct */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_FHANDLE</span>	21	<span class="enscript-comment">/* network file handle */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NFSREQ</span>	22	<span class="enscript-comment">/* NFS request header */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NFSMNT</span>	23	<span class="enscript-comment">/* NFS mount structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NFSNODE</span>	24	<span class="enscript-comment">/* NFS vnode private part */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_VNODE</span>		25	<span class="enscript-comment">/* Dynamically allocated vnodes */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_CACHE</span>		26	<span class="enscript-comment">/* Dynamically allocated cache entries */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_DQUOT</span>		27	<span class="enscript-comment">/* UFS quota entries */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_PROC_UUID_POLICY</span>	28	<span class="enscript-comment">/* proc UUID policy entries */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_SHM</span>		29	<span class="enscript-comment">/* SVID compatible shared memory segments */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_PLIMIT</span>	30	<span class="enscript-comment">/* plimit  structures */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_SIGACTS</span>	31	<span class="enscript-comment">/* sigacts structures */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_VMOBJ</span>		32	<span class="enscript-comment">/* VM object structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_VMOBJHASH</span>	33	<span class="enscript-comment">/* VM object hash structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_VMPMAP</span>	34	<span class="enscript-comment">/* VM pmap */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_VMPVENT</span>	35	<span class="enscript-comment">/* VM phys-virt mapping entry */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_VMPAGER</span>	36	<span class="enscript-comment">/* XXX: VM pager struct */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_VMPGDATA</span>	37	<span class="enscript-comment">/* XXX: VM pager private data */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_FILEPROC</span>	38	<span class="enscript-comment">/* Open file structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_FILEDESC</span>	39	<span class="enscript-comment">/* Open file descriptor table */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_LOCKF</span>		40	<span class="enscript-comment">/* Byte-range locking structures */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_PROC</span>		41	<span class="enscript-comment">/* Proc structures */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_PSTATS</span>	42	<span class="enscript-comment">/* pstats  proc sub-structures */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_SEGMENT</span>	43	<span class="enscript-comment">/* Segment for LFS */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_LFSNODE</span>	44	<span class="enscript-comment">/* LFS vnode private part */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_FFSNODE</span>	45	<span class="enscript-comment">/* FFS vnode private part */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MFSNODE</span>	46	<span class="enscript-comment">/* MFS vnode private part */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NQLEASE</span>	47	<span class="enscript-comment">/* XXX: Nqnfs lease */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NQMHOST</span>	48	<span class="enscript-comment">/* XXX: Nqnfs host address table */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NETADDR</span>	49	<span class="enscript-comment">/* Export host address structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NFSSVC</span>	50	<span class="enscript-comment">/* NFS server structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NFSUID</span>	51	<span class="enscript-comment">/* XXX: NFS uid mapping structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NFSD</span>		52	<span class="enscript-comment">/* NFS server daemon structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IPMOPTS</span>	53	<span class="enscript-comment">/* internet multicast options */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IPMADDR</span>	54	<span class="enscript-comment">/* internet multicast address */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IFMADDR</span>	55	<span class="enscript-comment">/* link-level multicast address */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MRTABLE</span>	56	<span class="enscript-comment">/* multicast routing tables */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_ISOFSMNT</span>	57	<span class="enscript-comment">/* ISOFS mount structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_ISOFSNODE</span>	58	<span class="enscript-comment">/* ISOFS vnode private part */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NFSRVDESC</span>	59	<span class="enscript-comment">/* NFS server socket descriptor */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NFSDIROFF</span>	60	<span class="enscript-comment">/* NFS directory offset data */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_NFSBIGFH</span>	61	<span class="enscript-comment">/* NFS version 3 file handle */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MSDOSFSMNT</span>	62	<span class="enscript-comment">/* MSDOS FS mount structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MSDOSFSFAT</span>	63	<span class="enscript-comment">/* MSDOS FS fat table */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MSDOSFSNODE</span>	64	<span class="enscript-comment">/* MSDOS FS vnode private part */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_TTYS</span>		65	<span class="enscript-comment">/* allocated tty structures */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_EXEC</span>		66	<span class="enscript-comment">/* argument lists &amp; other mem used by exec */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MISCFSMNT</span>	67	<span class="enscript-comment">/* miscfs mount structures */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MISCFSNODE</span>	68	<span class="enscript-comment">/* miscfs vnode private part */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_ADOSFSMNT</span>	69	<span class="enscript-comment">/* adosfs mount structures */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_ADOSFSNODE</span>	70	<span class="enscript-comment">/* adosfs vnode private part */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_ANODE</span>		71	<span class="enscript-comment">/* adosfs anode structures and tables. */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_BUFHDR</span>	72	<span class="enscript-comment">/* File buffer cache headers */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_OFILETABL</span>	73	<span class="enscript-comment">/* Open file descriptor table */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_MCLUST</span>	74	<span class="enscript-comment">/* mbuf cluster buffers */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_HFSMNT</span>	75	<span class="enscript-comment">/* HFS mount structure */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_HFSNODE</span>	76	<span class="enscript-comment">/* HFS catalog node */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_HFSFORK</span>	77	<span class="enscript-comment">/* HFS file fork */</span>
<span class="enscript-comment">/* unused	78 */</span>
<span class="enscript-comment">/* unused	79 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_TEMP</span>		80	<span class="enscript-comment">/* misc temporary data buffers */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_SECA</span>		81	<span class="enscript-comment">/* security associations, key management */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_DEVFS</span>		82
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_IPFW</span>		83	<span class="enscript-comment">/* IP Forwarding/NAT */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_UDFNODE</span>	84	<span class="enscript-comment">/* UDF inodes */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_UDFMNT</span>	85	<span class="enscript-comment">/* UDF mount structures */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_IP6NDP</span>	86	<span class="enscript-comment">/* IPv6 Neighbour Discovery*/</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_IP6OPT</span>	87	<span class="enscript-comment">/* IPv6 options management */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_IP6MISC</span>	88	<span class="enscript-comment">/* IPv6 misc. memory */</span>
<span class="enscript-comment">/* unused	89 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_IGMP</span>		90
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_JNL_JNL</span>   91  <span class="enscript-comment">/* Journaling: &quot;struct journal&quot; */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_JNL_TR</span>    92  <span class="enscript-comment">/* Journaling: &quot;struct transaction&quot; */</span> 
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_SPECINFO</span>	93	<span class="enscript-comment">/* special file node */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_KQUEUE</span>	94	<span class="enscript-comment">/* kqueue */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_HFSDIRHINT</span>	95	<span class="enscript-comment">/* HFS directory hint */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_CLRDAHEAD</span>	96	<span class="enscript-comment">/* storage for cluster read-ahead state */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_CLWRBEHIND</span>	97	<span class="enscript-comment">/* storage for cluster write-behind state */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IOV64</span>		98	<span class="enscript-comment">/* large iov's for 64 bit process */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_FILEGLOB</span>	99	<span class="enscript-comment">/* fileglobal */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_KAUTH</span>		100	<span class="enscript-comment">/* kauth subsystem */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_DUMMYNET</span>	101	<span class="enscript-comment">/* dummynet */</span>
<span class="enscript-comment">/* M_UNSAFEFS 102 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_MACPIPELABEL</span>	103	<span class="enscript-comment">/* MAC pipe labels */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_MACTEMP</span>	104	<span class="enscript-comment">/* MAC framework */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_SBUF</span>		105	<span class="enscript-comment">/* string buffers */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_EXTATTR</span>	106	<span class="enscript-comment">/* extended attribute */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_SELECT</span>	107	<span class="enscript-comment">/* per-thread select memory */</span>
<span class="enscript-comment">/* M_TRAFFIC_MGT	108 */</span>
#<span class="enscript-reference">if</span> <span class="enscript-variable-name">HFS_COMPRESSION</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_DECMPFS_CNODE</span>	109	<span class="enscript-comment">/* decmpfs cnode structures */</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* HFS_COMPRESSION */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_INMFILTER</span>	110	<span class="enscript-comment">/* IPv4 multicast PCB-layer source filter */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_IPMSOURCE</span>	111	<span class="enscript-comment">/* IPv4 multicast IGMP-layer source filter */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IN6MFILTER</span>	112	<span class="enscript-comment">/* IPv6 multicast PCB-layer source filter */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IP6MOPTS</span>	113	<span class="enscript-comment">/* IPv6 multicast options */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IP6MSOURCE</span>	114	<span class="enscript-comment">/* IPv6 multicast MLD-layer source filter */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_FLOW_DIVERT_PCB</span>	115 <span class="enscript-comment">/* flow divert control block */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_FLOW_DIVERT_GROUP</span>	116 <span class="enscript-comment">/* flow divert socket group */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_IP6CGA</span>	117
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_NECP</span>		118 <span class="enscript-comment">/* General NECP policy data */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_NECP_SESSION_POLICY</span> 119 <span class="enscript-comment">/* NECP session policies */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_NECP_SOCKET_POLICY</span> 120 <span class="enscript-comment">/* NECP socket-level policies */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_NECP_IP_POLICY</span> 121 <span class="enscript-comment">/* NECP IP-level policies */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_FD_VN_DATA</span>	122	<span class="enscript-comment">/* Per fd vnode data */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_FD_DIRBUF</span>	123	<span class="enscript-comment">/* Directory entries' buffer */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_NETAGENT</span>	124	<span class="enscript-comment">/* Network Agents */</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_LAST</span>		125	<span class="enscript-comment">/* Must be last type + 1 */</span>

#<span class="enscript-reference">else</span> <span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_RTABLE</span>	5	<span class="enscript-comment">/* routing tables */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_IFADDR</span>	9	<span class="enscript-comment">/* interface address (IOFireWireIP)*/</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_LOCKF</span>		40	<span class="enscript-comment">/* Byte-range locking structures (msdos) */</span> 
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_TEMP</span>		80	<span class="enscript-comment">/* misc temporary data buffers */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_HFSMNT</span>	75	<span class="enscript-comment">/* HFS mount structure (afpfs) */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_KAUTH</span>		100	<span class="enscript-comment">/* kauth subsystem (smb) */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_SONAME</span>	11	<span class="enscript-comment">/* socket name (smb) */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">M_PCB</span>		4	<span class="enscript-comment">/* protocol control block (smb) */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_UDFNODE</span>	84	<span class="enscript-comment">/* UDF inodes (udf)*/</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">M_UDFMNT</span>	85	<span class="enscript-comment">/* UDF mount structures (udf)*/</span>

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">BSD_KERNEL_PRIVATE</span>

#<span class="enscript-reference">if</span> <span class="enscript-variable-name">KMEMSTATS</span>
<span class="enscript-type">struct</span> kmemstats {
	<span class="enscript-type">long</span>	ks_inuse;	<span class="enscript-comment">/* # of packets of this type currently
				 * in use */</span>
	<span class="enscript-type">long</span>	ks_calls;	<span class="enscript-comment">/* total packets of this type ever allocated */</span>
	<span class="enscript-type">long</span> 	ks_memuse;	<span class="enscript-comment">/* total memory held in bytes */</span>
	u_short	ks_limblocks;	<span class="enscript-comment">/* number of times blocked for hitting limit */</span>
	u_short	ks_mapblocks;	<span class="enscript-comment">/* number of times blocked for kernel map */</span>
	<span class="enscript-type">long</span>	ks_maxused;	<span class="enscript-comment">/* maximum number ever used */</span>
	<span class="enscript-type">long</span>	ks_limit;	<span class="enscript-comment">/* most that are allowed to exist */</span>
	<span class="enscript-type">long</span>	ks_size;	<span class="enscript-comment">/* sizes of this thing that are allocated */</span>
	<span class="enscript-type">long</span>	ks_spare;
};

<span class="enscript-type">extern</span> <span class="enscript-type">struct</span> kmemstats kmemstats[];
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KMEMSTATS */</span>

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>

<span class="enscript-comment">/*
 * The malloc/free primatives used
 * by the BSD kernel code.
 */</span>
#<span class="enscript-reference">if</span> <span class="enscript-variable-name">XNU_KERNEL_PRIVATE</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;mach/vm_types.h&gt;</span>

#<span class="enscript-reference">define</span>	<span class="enscript-function-name">MALLOC</span>(space, cast, size, type, flags) \
	({ <span class="enscript-type">static</span> vm_allocation_site_t site __attribute__((section(<span class="enscript-string">&quot;__DATA, __data&quot;</span>))); \
	(space) = (cast)__MALLOC(size, type, flags, &amp;site); })
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">REALLOC</span>(space, cast, addr, size, type, flags) \
	({ <span class="enscript-type">static</span> vm_allocation_site_t site __attribute__((section(<span class="enscript-string">&quot;__DATA, __data&quot;</span>))); \
	(space) = (cast)__REALLOC(addr, size, type, flags, &amp;site); })

#<span class="enscript-reference">define</span>	<span class="enscript-function-name">_MALLOC</span>(size, type, flags) \
	({ <span class="enscript-type">static</span> vm_allocation_site_t site __attribute__((section(<span class="enscript-string">&quot;__DATA, __data&quot;</span>))); \
	__MALLOC(size, type, flags, &amp;site); })
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">_REALLOC</span>(addr, size, type, flags) \
	({ <span class="enscript-type">static</span> vm_allocation_site_t site __attribute__((section(<span class="enscript-string">&quot;__DATA, __data&quot;</span>))); \
	__REALLOC(addr, size, type, flags, &amp;site); })

#<span class="enscript-reference">define</span>	<span class="enscript-function-name">_MALLOC_ZONE</span>(size, type, flags) \
	({ <span class="enscript-type">static</span> vm_allocation_site_t site __attribute__((section(<span class="enscript-string">&quot;__DATA, __data&quot;</span>))); \
	__MALLOC_ZONE(size, type, flags, &amp;site); })

#<span class="enscript-reference">define</span> <span class="enscript-function-name">FREE</span>(addr, type) \
	_FREE((<span class="enscript-type">void</span> *)addr, type)

#<span class="enscript-reference">define</span> <span class="enscript-function-name">MALLOC_ZONE</span>(space, cast, size, type, flags) \
	(space) = (cast)_MALLOC_ZONE(size, type, flags)

#<span class="enscript-reference">define</span> <span class="enscript-function-name">FREE_ZONE</span>(addr, size, type) \
	_FREE_ZONE((<span class="enscript-type">void</span> *)addr, size, type)

<span class="enscript-type">extern</span> <span class="enscript-type">void</span>	*__MALLOC(
			size_t		      size,
			<span class="enscript-type">int</span>		      type,
			<span class="enscript-type">int</span>		      flags,
			vm_allocation_site_t *site);

<span class="enscript-type">extern</span> <span class="enscript-type">void</span>	_FREE(
			<span class="enscript-type">void</span>		*addr,
			<span class="enscript-type">int</span>		type);

<span class="enscript-type">extern</span> <span class="enscript-type">void</span>	*__REALLOC(
			<span class="enscript-type">void</span>		     *addr,
			size_t		      size,
			<span class="enscript-type">int</span>		      type,
			<span class="enscript-type">int</span>		      flags,
			vm_allocation_site_t *site);

<span class="enscript-type">extern</span> <span class="enscript-type">void</span>	*__MALLOC_ZONE(
			size_t		size,
			<span class="enscript-type">int</span>		type,
			<span class="enscript-type">int</span>		flags,
			vm_allocation_site_t *site);

<span class="enscript-type">extern</span> <span class="enscript-type">void</span>	_FREE_ZONE(
			<span class="enscript-type">void</span>		*elem,
			size_t		size,
			<span class="enscript-type">int</span>		type);

#<span class="enscript-reference">else</span> <span class="enscript-comment">/* XNU_KERNEL_PRIVATE */</span>

#<span class="enscript-reference">define</span>	<span class="enscript-function-name">MALLOC</span>(space, cast, size, type, flags) \
	(space) = (cast)_MALLOC(size, type, flags)

#<span class="enscript-reference">define</span> <span class="enscript-function-name">FREE</span>(addr, type) \
	_FREE((<span class="enscript-type">void</span> *)addr, type)

#<span class="enscript-reference">define</span>	<span class="enscript-function-name">REALLOC</span>(space, cast, addr, size, type, flags) \
	(space) = (cast)_REALLOC(addr, size, type, flags)

#<span class="enscript-reference">define</span> <span class="enscript-function-name">MALLOC_ZONE</span>(space, cast, size, type, flags) \
	(space) = (cast)_MALLOC_ZONE(size, type, flags)

#<span class="enscript-reference">define</span> <span class="enscript-function-name">FREE_ZONE</span>(addr, size, type) \
	_FREE_ZONE((<span class="enscript-type">void</span> *)addr, size, type)

<span class="enscript-type">extern</span> <span class="enscript-type">void</span>	*_MALLOC(
			size_t		size,
			<span class="enscript-type">int</span>		type,
			<span class="enscript-type">int</span>		flags);

<span class="enscript-type">extern</span> <span class="enscript-type">void</span>	_FREE(
			<span class="enscript-type">void</span>		*addr,
			<span class="enscript-type">int</span>		type);

<span class="enscript-type">extern</span> <span class="enscript-type">void</span>	*_REALLOC(
			<span class="enscript-type">void</span>		*addr,
			size_t		size,
			<span class="enscript-type">int</span>		type,
			<span class="enscript-type">int</span>		flags);

<span class="enscript-type">extern</span> <span class="enscript-type">void</span>	*_MALLOC_ZONE(
			size_t		size,
			<span class="enscript-type">int</span>		type,
			<span class="enscript-type">int</span>		flags);

<span class="enscript-type">extern</span> <span class="enscript-type">void</span>	_FREE_ZONE(
			<span class="enscript-type">void</span>		*elem,
			size_t		size,
			<span class="enscript-type">int</span>		type);


#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* !XNU_KERNEL_PRIVATE */</span>

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* KERNEL */</span>

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* _SYS_MALLOC_H_ */</span>
</pre>
<hr />
</body></html>