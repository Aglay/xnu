<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>proc_info.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">proc_info.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2005 Apple Computer, Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_SYS_PROC_INFO_H</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">_SYS_PROC_INFO_H</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/cdefs.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/param.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/types.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/stat.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/mount.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/socket.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/un.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/kern_control.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/event.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;net/if.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;net/route.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;netinet/in.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;netinet/tcp.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;mach/machine.h&gt;</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">PRIVATE</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;mach/coalition.h&gt;</span> <span class="enscript-comment">/* COALITION_NUM_TYPES */</span>
#<span class="enscript-reference">endif</span>

__BEGIN_DECLS


#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_ALL_PIDS</span>		1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PGRP_ONLY</span>		2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_TTY_ONLY</span>		3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_UID_ONLY</span>		4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_RUID_ONLY</span>		5
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PPID_ONLY</span>		6

<span class="enscript-type">struct</span> proc_bsdinfo {
	uint32_t		pbi_flags;		<span class="enscript-comment">/* 64bit; emulated etc */</span>
	uint32_t		pbi_status;
	uint32_t		pbi_xstatus;
	uint32_t		pbi_pid;
	uint32_t		pbi_ppid;
	uid_t			pbi_uid;
	gid_t			pbi_gid;
	uid_t			pbi_ruid;
	gid_t			pbi_rgid;
	uid_t			pbi_svuid;
	gid_t			pbi_svgid;
	uint32_t		rfu_1;			<span class="enscript-comment">/* reserved */</span>
	<span class="enscript-type">char</span>			pbi_comm[MAXCOMLEN];
	<span class="enscript-type">char</span>			pbi_name[2*MAXCOMLEN];	<span class="enscript-comment">/* empty if no name is registered */</span>
	uint32_t		pbi_nfiles;
	uint32_t		pbi_pgid;
	uint32_t		pbi_pjobc;
	uint32_t		e_tdev;			<span class="enscript-comment">/* controlling tty dev */</span>
	uint32_t		e_tpgid;		<span class="enscript-comment">/* tty process group id */</span>
	int32_t			pbi_nice;
	uint64_t		pbi_start_tvsec;
	uint64_t		pbi_start_tvusec;
};


<span class="enscript-type">struct</span> proc_bsdshortinfo {
        uint32_t                pbsi_pid;		<span class="enscript-comment">/* process id */</span>
        uint32_t                pbsi_ppid;		<span class="enscript-comment">/* process parent id */</span>
        uint32_t                pbsi_pgid;		<span class="enscript-comment">/* process perp id */</span>
	uint32_t                pbsi_status;		<span class="enscript-comment">/* p_stat value, SZOMB, SRUN, etc */</span>
	<span class="enscript-type">char</span>                    pbsi_comm[MAXCOMLEN];	<span class="enscript-comment">/* upto 16 characters of process name */</span>
	uint32_t                pbsi_flags;              <span class="enscript-comment">/* 64bit; emulated etc */</span>
        uid_t                   pbsi_uid;		<span class="enscript-comment">/* current uid on process */</span>
        gid_t                   pbsi_gid;		<span class="enscript-comment">/* current gid on process */</span>
        uid_t                   pbsi_ruid;		<span class="enscript-comment">/* current ruid on process */</span>
        gid_t                   pbsi_rgid;		<span class="enscript-comment">/* current tgid on process */</span>
        uid_t                   pbsi_svuid;		<span class="enscript-comment">/* current svuid on process */</span>
        gid_t                   pbsi_svgid;		<span class="enscript-comment">/* current svgid on process */</span>
        uint32_t                pbsi_rfu;		<span class="enscript-comment">/* reserved for future use*/</span>
};


#<span class="enscript-reference">ifdef</span>  <span class="enscript-variable-name">PRIVATE</span>
<span class="enscript-type">struct</span> proc_uniqidentifierinfo {
	uint8_t                 p_uuid[16];		<span class="enscript-comment">/* UUID of the main executable */</span>
	uint64_t                p_uniqueid;		<span class="enscript-comment">/* 64 bit unique identifier for process */</span>
	uint64_t                p_puniqueid;		<span class="enscript-comment">/* unique identifier for process's parent */</span>
	uint64_t                p_reserve2;		<span class="enscript-comment">/* reserved for future use */</span>
	uint64_t                p_reserve3;		<span class="enscript-comment">/* reserved for future use */</span>
	uint64_t                p_reserve4;		<span class="enscript-comment">/* reserved for future use */</span>
};


<span class="enscript-type">struct</span> proc_bsdinfowithuniqid {
	<span class="enscript-type">struct</span> proc_bsdinfo             pbsd;
	<span class="enscript-type">struct</span> proc_uniqidentifierinfo  p_uniqidentifier;
};

<span class="enscript-type">struct</span> proc_archinfo {
	cpu_type_t		p_cputype;	
	cpu_subtype_t		p_cpusubtype;
};

<span class="enscript-type">struct</span> proc_pidcoalitioninfo {
	uint64_t coalition_id[COALITION_NUM_TYPES];
	uint64_t reserved1;
	uint64_t reserved2;
	uint64_t reserved3;
};

<span class="enscript-type">struct</span> proc_originatorinfo {
	uuid_t                  originator_uuid;        <span class="enscript-comment">/* UUID of the originator process */</span>
	pid_t                   originator_pid;         <span class="enscript-comment">/* pid of the originator process */</span>
	uint64_t                p_reserve2;
	uint64_t                p_reserve3;
	uint64_t                p_reserve4;
};

#<span class="enscript-reference">endif</span>


<span class="enscript-comment">/* pbi_flags values */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_SYSTEM</span>	1	<span class="enscript-comment">/*  System process */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_TRACED</span>	2	<span class="enscript-comment">/* process currently being traced, possibly by gdb */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_INEXIT</span>	4	<span class="enscript-comment">/* process is working its way in exit() */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_PPWAIT</span>	8
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_LP64</span>		0x10	<span class="enscript-comment">/* 64bit process */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_SLEADER</span>	0x20	<span class="enscript-comment">/* The process is the session leader */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_CTTY</span>		0x40	<span class="enscript-comment">/* process has a control tty */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_CONTROLT</span>	0x80	<span class="enscript-comment">/* Has a controlling terminal */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_THCWD</span>		0x100	<span class="enscript-comment">/* process has a thread with cwd */</span>
<span class="enscript-comment">/* process control bits for resource starvation */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_PC_THROTTLE</span>	0x200	<span class="enscript-comment">/* In resource starvation situations, this process is to be throttled */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_PC_SUSP</span>	0x400	<span class="enscript-comment">/* In resource starvation situations, this process is to be suspended */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_PC_KILL</span>	0x600	<span class="enscript-comment">/* In resource starvation situations, this process is to be terminated */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_PC_MASK</span>	0x600
<span class="enscript-comment">/* process action bits for resource starvation */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_PA_THROTTLE</span>	0x800	<span class="enscript-comment">/* The process is currently throttled due to resource starvation */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_PA_SUSP</span>	0x1000	<span class="enscript-comment">/* The process is currently suspended due to resource starvation */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_PSUGID</span>        0x2000	 <span class="enscript-comment">/* process has set privileges since last exec */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_EXEC</span>		0x4000	 <span class="enscript-comment">/* process has called exec  */</span>
#<span class="enscript-reference">ifdef</span>  <span class="enscript-variable-name">PRIVATE</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_DARWINBG</span>	0x8000	<span class="enscript-comment">/* process in darwin background */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_EXT_DARWINBG</span>	0x10000	<span class="enscript-comment">/* process in darwin background - external enforcement */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_IOS_APPLEDAEMON</span> 0x20000	<span class="enscript-comment">/* Process is apple daemon  */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_DELAYIDLESLEEP</span> 0x40000	<span class="enscript-comment">/* Process is marked to delay idle sleep on disk IO */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_IOS_IMPPROMOTION</span> 0x80000	<span class="enscript-comment">/* Process is daemon which receives importane donation  */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_ADAPTIVE</span>              0x100000         <span class="enscript-comment">/* Process is adaptive */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_ADAPTIVE_IMPORTANT</span>    0x200000         <span class="enscript-comment">/* Process is adaptive, and is currently important */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_IMPORTANCE_DONOR</span>   0x400000 <span class="enscript-comment">/* Process is marked as an importance donor */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_SUPPRESSED</span>         0x800000 <span class="enscript-comment">/* Process is suppressed */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_APPLICATION</span> 0x1000000	<span class="enscript-comment">/* Process is an application */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FLAG_IOS_APPLICATION</span> PROC_FLAG_APPLICATION	<span class="enscript-comment">/* Process is an application */</span>
#<span class="enscript-reference">endif</span>


<span class="enscript-type">struct</span> proc_taskinfo {
	uint64_t		pti_virtual_size;	<span class="enscript-comment">/* virtual memory size (bytes) */</span>
	uint64_t		pti_resident_size;	<span class="enscript-comment">/* resident memory size (bytes) */</span>
	uint64_t		pti_total_user;		<span class="enscript-comment">/* total time */</span>
	uint64_t		pti_total_system;
	uint64_t		pti_threads_user;	<span class="enscript-comment">/* existing threads only */</span>
	uint64_t		pti_threads_system;
	int32_t			pti_policy;		<span class="enscript-comment">/* default policy for new threads */</span>
	int32_t			pti_faults;		<span class="enscript-comment">/* number of page faults */</span>
	int32_t			pti_pageins;		<span class="enscript-comment">/* number of actual pageins */</span>
	int32_t			pti_cow_faults;		<span class="enscript-comment">/* number of copy-on-write faults */</span>
	int32_t			pti_messages_sent;	<span class="enscript-comment">/* number of messages sent */</span>
	int32_t			pti_messages_received;	<span class="enscript-comment">/* number of messages received */</span>
	int32_t			pti_syscalls_mach;	<span class="enscript-comment">/* number of mach system calls */</span>
	int32_t			pti_syscalls_unix;	<span class="enscript-comment">/* number of unix system calls */</span>
	int32_t			pti_csw;          	<span class="enscript-comment">/* number of context switches */</span>
	int32_t			pti_threadnum;		<span class="enscript-comment">/* number of threads in the task */</span>
	int32_t			pti_numrunning;		<span class="enscript-comment">/* number of running threads */</span>
	int32_t			pti_priority;		<span class="enscript-comment">/* task priority*/</span>
};

<span class="enscript-type">struct</span> proc_taskallinfo {
	<span class="enscript-type">struct</span> proc_bsdinfo	pbsd;
	<span class="enscript-type">struct</span> proc_taskinfo	ptinfo;
};

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MAXTHREADNAMESIZE</span> 64

<span class="enscript-type">struct</span> proc_threadinfo {
	uint64_t		pth_user_time;    	<span class="enscript-comment">/* user run time */</span>
	uint64_t		pth_system_time;  	<span class="enscript-comment">/* system run time */</span>
	int32_t			pth_cpu_usage;    	<span class="enscript-comment">/* scaled cpu usage percentage */</span>
	int32_t			pth_policy;		<span class="enscript-comment">/* scheduling policy in effect */</span>
	int32_t			pth_run_state;    	<span class="enscript-comment">/* run state (see below) */</span>
	int32_t			pth_flags;        	<span class="enscript-comment">/* various flags (see below) */</span>
	int32_t			pth_sleep_time;   	<span class="enscript-comment">/* number of seconds that thread */</span>
	int32_t			pth_curpri;		<span class="enscript-comment">/* cur priority*/</span>
	int32_t			pth_priority;		<span class="enscript-comment">/*  priority*/</span>
	int32_t			pth_maxpriority;	<span class="enscript-comment">/* max priority*/</span>
	<span class="enscript-type">char</span>			pth_name[MAXTHREADNAMESIZE];	<span class="enscript-comment">/* thread name, if any */</span>
};

<span class="enscript-type">struct</span> proc_regioninfo {
	uint32_t		pri_protection;
	uint32_t		pri_max_protection;
	uint32_t		pri_inheritance;
	uint32_t		pri_flags;		<span class="enscript-comment">/* shared, external pager, is submap */</span>
	uint64_t		pri_offset;
	uint32_t		pri_behavior;
	uint32_t		pri_user_wired_count;
	uint32_t		pri_user_tag;
	uint32_t		pri_pages_resident;
	uint32_t		pri_pages_shared_now_private;
	uint32_t		pri_pages_swapped_out;
	uint32_t		pri_pages_dirtied;
	uint32_t		pri_ref_count;
	uint32_t		pri_shadow_depth;
	uint32_t		pri_share_mode;
	uint32_t		pri_private_pages_resident;
	uint32_t		pri_shared_pages_resident;
	uint32_t		pri_obj_id;
	uint32_t		pri_depth;
	uint64_t		pri_address;
	uint64_t		pri_size;
};

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_REGION_SUBMAP</span>	1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_REGION_SHARED</span>	2

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SM_COW</span>             1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SM_PRIVATE</span>         2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SM_EMPTY</span>           3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SM_SHARED</span>          4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SM_TRUESHARED</span>      5
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SM_PRIVATE_ALIASED</span> 6
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SM_SHARED_ALIASED</span>  7
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SM_LARGE_PAGE</span>      8


<span class="enscript-comment">/*
 *	Thread run states (state field).
 */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TH_STATE_RUNNING</span>	1	<span class="enscript-comment">/* thread is running normally */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TH_STATE_STOPPED</span>	2	<span class="enscript-comment">/* thread is stopped */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TH_STATE_WAITING</span>	3	<span class="enscript-comment">/* thread is waiting normally */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TH_STATE_UNINTERRUPTIBLE</span> 4	<span class="enscript-comment">/* thread is in an uninterruptible
					   wait */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TH_STATE_HALTED</span>		5	<span class="enscript-comment">/* thread is halted at a
					   clean point */</span>

<span class="enscript-comment">/*
 *	Thread flags (flags field).
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TH_FLAGS_SWAPPED</span>	0x1	<span class="enscript-comment">/* thread is swapped out */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TH_FLAGS_IDLE</span>		0x2	<span class="enscript-comment">/* thread is an idle thread */</span>


<span class="enscript-type">struct</span> proc_workqueueinfo {
	uint32_t	pwq_nthreads;		<span class="enscript-comment">/* total number of workqueue threads */</span>
	uint32_t	pwq_runthreads;		<span class="enscript-comment">/* total number of running workqueue threads */</span>
	uint32_t	pwq_blockedthreads;	<span class="enscript-comment">/* total number of blocked workqueue threads */</span>
	uint32_t	pwq_state;
};

<span class="enscript-comment">/*
 *	workqueue state (pwq_state field)
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">WQ_EXCEEDED_CONSTRAINED_THREAD_LIMIT</span>	0x1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">WQ_EXCEEDED_TOTAL_THREAD_LIMIT</span>		0x2


<span class="enscript-type">struct</span> proc_fileinfo {
	uint32_t		fi_openflags;
	uint32_t		fi_status;	
	off_t			fi_offset;
	int32_t			fi_type;
	uint32_t		fi_guardflags;
};

<span class="enscript-comment">/* stats flags in proc_fileinfo */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FP_SHARED</span>	1	<span class="enscript-comment">/* shared by more than one fd */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FP_CLEXEC</span>	2	<span class="enscript-comment">/* close on exec */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FP_GUARDED</span>	4	<span class="enscript-comment">/* guarded fd */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FP_CLFORK</span>	8	<span class="enscript-comment">/* close on fork */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FI_GUARD_CLOSE</span>		(1u &lt;&lt; 0)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FI_GUARD_DUP</span>		(1u &lt;&lt; 1)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FI_GUARD_SOCKET_IPC</span>	(1u &lt;&lt; 2)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_FI_GUARD_FILEPORT</span>		(1u &lt;&lt; 3)

<span class="enscript-comment">/*
 * A copy of stat64 with static sized fields.
 */</span>
<span class="enscript-type">struct</span> vinfo_stat {
	uint32_t	vst_dev;	<span class="enscript-comment">/* [XSI] ID of device containing file */</span>
	uint16_t	vst_mode;	<span class="enscript-comment">/* [XSI] Mode of file (see below) */</span>
	uint16_t	vst_nlink;	<span class="enscript-comment">/* [XSI] Number of hard links */</span>
	uint64_t	vst_ino;	<span class="enscript-comment">/* [XSI] File serial number */</span>
	uid_t		vst_uid;	<span class="enscript-comment">/* [XSI] User ID of the file */</span>
	gid_t		vst_gid;	<span class="enscript-comment">/* [XSI] Group ID of the file */</span>
	int64_t		vst_atime;	<span class="enscript-comment">/* [XSI] Time of last access */</span>
	int64_t		vst_atimensec;	<span class="enscript-comment">/* nsec of last access */</span>
	int64_t		vst_mtime;	<span class="enscript-comment">/* [XSI] Last data modification time */</span>
	int64_t		vst_mtimensec;	<span class="enscript-comment">/* last data modification nsec */</span>
	int64_t		vst_ctime;	<span class="enscript-comment">/* [XSI] Time of last status change */</span>
	int64_t		vst_ctimensec;	<span class="enscript-comment">/* nsec of last status change */</span>
	int64_t		vst_birthtime;	<span class="enscript-comment">/*  File creation time(birth)  */</span>
	int64_t		vst_birthtimensec;	<span class="enscript-comment">/* nsec of File creation time */</span>
	off_t		vst_size;	<span class="enscript-comment">/* [XSI] file size, in bytes */</span>
	int64_t		vst_blocks;	<span class="enscript-comment">/* [XSI] blocks allocated for file */</span>
	int32_t		vst_blksize;	<span class="enscript-comment">/* [XSI] optimal blocksize for I/O */</span>
	uint32_t	vst_flags;	<span class="enscript-comment">/* user defined flags for file */</span>
	uint32_t	vst_gen;	<span class="enscript-comment">/* file generation number */</span>
	uint32_t	vst_rdev;	<span class="enscript-comment">/* [XSI] Device ID */</span>
	int64_t		vst_qspare[2];	<span class="enscript-comment">/* RESERVED: DO NOT USE! */</span>
};

<span class="enscript-type">struct</span> vnode_info {
	<span class="enscript-type">struct</span> vinfo_stat	vi_stat;
	<span class="enscript-type">int</span>			vi_type;
	<span class="enscript-type">int</span>			vi_pad;
	fsid_t			vi_fsid;
};

<span class="enscript-type">struct</span> vnode_info_path {
	<span class="enscript-type">struct</span> vnode_info	vip_vi;
	<span class="enscript-type">char</span>			vip_path[MAXPATHLEN];	<span class="enscript-comment">/* tail end of it  */</span>
};

<span class="enscript-type">struct</span> vnode_fdinfo {
	<span class="enscript-type">struct</span> proc_fileinfo	pfi;
	<span class="enscript-type">struct</span> vnode_info	pvi;
};

<span class="enscript-type">struct</span> vnode_fdinfowithpath {
	<span class="enscript-type">struct</span> proc_fileinfo	pfi;
	<span class="enscript-type">struct</span> vnode_info_path	pvip;
};

<span class="enscript-type">struct</span> proc_regionwithpathinfo {
	<span class="enscript-type">struct</span> proc_regioninfo	prp_prinfo;
	<span class="enscript-type">struct</span> vnode_info_path	prp_vip;
};

<span class="enscript-type">struct</span> proc_vnodepathinfo {
	<span class="enscript-type">struct</span> vnode_info_path	pvi_cdir;
	<span class="enscript-type">struct</span> vnode_info_path	pvi_rdir;
};

<span class="enscript-type">struct</span> proc_threadwithpathinfo {
	<span class="enscript-type">struct</span> proc_threadinfo	pt;
	<span class="enscript-type">struct</span> vnode_info_path	pvip;
};

<span class="enscript-comment">/*
 *  Socket 
 */</span>


<span class="enscript-comment">/*
 * IPv4 and IPv6 Sockets
 */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">INI_IPV4</span>        0x1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">INI_IPV6</span>        0x2

<span class="enscript-type">struct</span> in4in6_addr {
	u_int32_t		i46a_pad32[3];
	<span class="enscript-type">struct</span> in_addr		i46a_addr4;
};

<span class="enscript-type">struct</span> in_sockinfo {
	<span class="enscript-type">int</span>					insi_fport;		<span class="enscript-comment">/* foreign port */</span>
	<span class="enscript-type">int</span>					insi_lport;		<span class="enscript-comment">/* local port */</span>
	uint64_t				insi_gencnt;		<span class="enscript-comment">/* generation count of this instance */</span>
	uint32_t				insi_flags;		<span class="enscript-comment">/* generic IP/datagram flags */</span>
	uint32_t				insi_flow;

	uint8_t					insi_vflag;		<span class="enscript-comment">/* ini_IPV4 or ini_IPV6 */</span>
	uint8_t					insi_ip_ttl;		<span class="enscript-comment">/* time to live proto */</span>
	uint32_t				rfu_1;			<span class="enscript-comment">/* reserved */</span>
	<span class="enscript-comment">/* protocol dependent part */</span>
	<span class="enscript-type">union</span> {
		<span class="enscript-type">struct</span> in4in6_addr	ina_46;
		<span class="enscript-type">struct</span> in6_addr		ina_6;
	}					insi_faddr;		<span class="enscript-comment">/* foreign host table entry */</span>
	<span class="enscript-type">union</span> {
		<span class="enscript-type">struct</span> in4in6_addr	ina_46;
		<span class="enscript-type">struct</span> in6_addr		ina_6;
	}					insi_laddr;		<span class="enscript-comment">/* local host table entry */</span>
	<span class="enscript-type">struct</span> {
		u_char			in4_tos;			<span class="enscript-comment">/* type of service */</span>
	}					insi_v4;
	<span class="enscript-type">struct</span> {
		uint8_t			in6_hlim;
		<span class="enscript-type">int</span>			in6_cksum;
		u_short			in6_ifindex;
		<span class="enscript-type">short</span>			in6_hops;
	}					insi_v6;
};

<span class="enscript-comment">/*
 * TCP Sockets
 */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_T_REXMT</span>		0	<span class="enscript-comment">/* retransmit */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_T_PERSIST</span>		1	<span class="enscript-comment">/* retransmit persistence */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_T_KEEP</span>		2	<span class="enscript-comment">/* keep alive */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_T_2MSL</span>		3	<span class="enscript-comment">/* 2*msl quiet time timer */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_T_NTIMERS</span>		4

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_CLOSED</span>		0	<span class="enscript-comment">/* closed */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_LISTEN</span>		1	<span class="enscript-comment">/* listening for connection */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_SYN_SENT</span>		2	<span class="enscript-comment">/* active, have sent syn */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_SYN_RECEIVED</span>	3	<span class="enscript-comment">/* have send and received syn */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_ESTABLISHED</span>	4	<span class="enscript-comment">/* established */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S__CLOSE_WAIT</span>	5	<span class="enscript-comment">/* rcvd fin, waiting for close */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_FIN_WAIT_1</span>	6	<span class="enscript-comment">/* have closed, sent fin */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_CLOSING</span>		7	<span class="enscript-comment">/* closed xchd FIN; await FIN ACK */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_LAST_ACK</span>		8	<span class="enscript-comment">/* had fin and close; await FIN ACK */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_FIN_WAIT_2</span>	9	<span class="enscript-comment">/* have closed, fin is acked */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_TIME_WAIT</span>		10	<span class="enscript-comment">/* in 2*msl quiet wait after close */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">TSI_S_RESERVED</span>		11	<span class="enscript-comment">/* pseudo state: reserved */</span>

<span class="enscript-type">struct</span> tcp_sockinfo {
	<span class="enscript-type">struct</span> in_sockinfo		tcpsi_ini;
	<span class="enscript-type">int</span>				tcpsi_state;
	<span class="enscript-type">int</span>				tcpsi_timer[TSI_T_NTIMERS];
	<span class="enscript-type">int</span>				tcpsi_mss;
	uint32_t			tcpsi_flags;
	uint32_t			rfu_1;		<span class="enscript-comment">/* reserved */</span>
	uint64_t			tcpsi_tp;	<span class="enscript-comment">/* opaque handle of TCP protocol control block */</span>
};

<span class="enscript-comment">/*
 * Unix Domain Sockets
 */</span>


<span class="enscript-type">struct</span> un_sockinfo {
	uint64_t				unsi_conn_so;	<span class="enscript-comment">/* opaque handle of connected socket */</span>
	uint64_t				unsi_conn_pcb;	<span class="enscript-comment">/* opaque handle of connected protocol control block */</span>
	<span class="enscript-type">union</span> {
		<span class="enscript-type">struct</span> sockaddr_un	ua_sun;
		<span class="enscript-type">char</span>			ua_dummy[SOCK_MAXADDRLEN];
	}					unsi_addr;	<span class="enscript-comment">/* bound address */</span>
	<span class="enscript-type">union</span> {
		<span class="enscript-type">struct</span> sockaddr_un	ua_sun;
		<span class="enscript-type">char</span>			ua_dummy[SOCK_MAXADDRLEN];
	}					unsi_caddr;	<span class="enscript-comment">/* address of socket connected to */</span>
};

<span class="enscript-comment">/*
 * PF_NDRV Sockets
 */</span>

<span class="enscript-type">struct</span> ndrv_info {
	uint32_t	ndrvsi_if_family;
	uint32_t	ndrvsi_if_unit;
	<span class="enscript-type">char</span>		ndrvsi_if_name[IF_NAMESIZE];
};

<span class="enscript-comment">/*
 * Kernel Event Sockets
 */</span>

<span class="enscript-type">struct</span> kern_event_info {
	uint32_t	kesi_vendor_code_filter;
	uint32_t	kesi_class_filter;
	uint32_t	kesi_subclass_filter;
};	

<span class="enscript-comment">/*
 * Kernel Control Sockets
 */</span>

<span class="enscript-type">struct</span> kern_ctl_info {
	uint32_t	kcsi_id;
	uint32_t	kcsi_reg_unit;
	uint32_t	kcsi_flags;                	<span class="enscript-comment">/* support flags */</span>
	uint32_t	kcsi_recvbufsize;          	<span class="enscript-comment">/* request more than the default buffer size */</span>
	uint32_t	kcsi_sendbufsize;          	<span class="enscript-comment">/* request more than the default buffer size */</span>
	uint32_t	kcsi_unit;
	<span class="enscript-type">char</span>		kcsi_name[MAX_KCTL_NAME];	<span class="enscript-comment">/* unique nke identifier, provided by DTS */</span>
};

<span class="enscript-comment">/* soi_state */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_NOFDREF</span>		0x0001	<span class="enscript-comment">/* no file table ref any more */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_ISCONNECTED</span>	0x0002	<span class="enscript-comment">/* socket connected to a peer */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_ISCONNECTING</span>	0x0004	<span class="enscript-comment">/* in process of connecting to peer */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_ISDISCONNECTING</span>	0x0008	<span class="enscript-comment">/* in process of disconnecting */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_CANTSENDMORE</span>	0x0010	<span class="enscript-comment">/* can't send more data to peer */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_CANTRCVMORE</span>	0x0020	<span class="enscript-comment">/* can't receive more data from peer */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_RCVATMARK</span>		0x0040	<span class="enscript-comment">/* at mark on input */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_PRIV</span>		0x0080	<span class="enscript-comment">/* privileged for broadcast, raw... */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_NBIO</span>		0x0100	<span class="enscript-comment">/* non-blocking ops */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_ASYNC</span>		0x0200	<span class="enscript-comment">/* async i/o notify */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_INCOMP</span>		0x0800	<span class="enscript-comment">/* Unaccepted, incomplete connection */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_COMP</span>		0x1000	<span class="enscript-comment">/* unaccepted, complete connection */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_ISDISCONNECTED</span>	0x2000	<span class="enscript-comment">/* socket disconnected from peer */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SOI_S_DRAINING</span>		0x4000	<span class="enscript-comment">/* close waiting for blocked system calls to drain */</span>

<span class="enscript-type">struct</span> sockbuf_info {
	uint32_t		sbi_cc;
	uint32_t		sbi_hiwat;			<span class="enscript-comment">/* SO_RCVBUF, SO_SNDBUF */</span>
	uint32_t		sbi_mbcnt;
	uint32_t		sbi_mbmax;
	uint32_t		sbi_lowat;
	<span class="enscript-type">short</span>			sbi_flags;
	<span class="enscript-type">short</span>			sbi_timeo;
};

<span class="enscript-type">enum</span> {
	SOCKINFO_GENERIC	= 0,
	SOCKINFO_IN		= 1,
	SOCKINFO_TCP		= 2,
	SOCKINFO_UN		= 3,
	SOCKINFO_NDRV		= 4,
	SOCKINFO_KERN_EVENT	= 5,
	SOCKINFO_KERN_CTL	= 6
};

<span class="enscript-type">struct</span> socket_info {
	<span class="enscript-type">struct</span> vinfo_stat			soi_stat;
	uint64_t				soi_so;		<span class="enscript-comment">/* opaque handle of socket */</span>
	uint64_t				soi_pcb;	<span class="enscript-comment">/* opaque handle of protocol control block */</span>
	<span class="enscript-type">int</span>					soi_type;
	<span class="enscript-type">int</span>					soi_protocol;
	<span class="enscript-type">int</span>					soi_family;
	<span class="enscript-type">short</span>					soi_options;
	<span class="enscript-type">short</span>					soi_linger;
	<span class="enscript-type">short</span>					soi_state;
	<span class="enscript-type">short</span>					soi_qlen;
	<span class="enscript-type">short</span>					soi_incqlen;
	<span class="enscript-type">short</span>					soi_qlimit;
	<span class="enscript-type">short</span>					soi_timeo;
	u_short					soi_error;
	uint32_t				soi_oobmark;
	<span class="enscript-type">struct</span> sockbuf_info			soi_rcv;
	<span class="enscript-type">struct</span> sockbuf_info			soi_snd;
	<span class="enscript-type">int</span>					soi_kind;
	uint32_t				rfu_1;		<span class="enscript-comment">/* reserved */</span>
	<span class="enscript-type">union</span> {
		<span class="enscript-type">struct</span> in_sockinfo	pri_in;			<span class="enscript-comment">/* SOCKINFO_IN */</span>
		<span class="enscript-type">struct</span> tcp_sockinfo	pri_tcp;		<span class="enscript-comment">/* SOCKINFO_TCP */</span>
		<span class="enscript-type">struct</span> un_sockinfo	pri_un;			<span class="enscript-comment">/* SOCKINFO_UN */</span>
		<span class="enscript-type">struct</span> ndrv_info	pri_ndrv;		<span class="enscript-comment">/* SOCKINFO_NDRV */</span>
		<span class="enscript-type">struct</span> kern_event_info	pri_kern_event;		<span class="enscript-comment">/* SOCKINFO_KERN_EVENT */</span>
		<span class="enscript-type">struct</span> kern_ctl_info	pri_kern_ctl;		<span class="enscript-comment">/* SOCKINFO_KERN_CTL */</span>
	}					soi_proto;
};

<span class="enscript-type">struct</span> socket_fdinfo {
	<span class="enscript-type">struct</span> proc_fileinfo	pfi;
	<span class="enscript-type">struct</span> socket_info	psi;
};



<span class="enscript-type">struct</span> psem_info {
	<span class="enscript-type">struct</span> vinfo_stat	psem_stat;
	<span class="enscript-type">char</span>			psem_name[MAXPATHLEN];
};

<span class="enscript-type">struct</span> psem_fdinfo {
	<span class="enscript-type">struct</span> proc_fileinfo	pfi;
	<span class="enscript-type">struct</span> psem_info	pseminfo;
};



<span class="enscript-type">struct</span> pshm_info  {
	<span class="enscript-type">struct</span> vinfo_stat	pshm_stat;
	uint64_t		pshm_mappaddr;
	<span class="enscript-type">char</span>			pshm_name[MAXPATHLEN];
};

<span class="enscript-type">struct</span> pshm_fdinfo {
	<span class="enscript-type">struct</span> proc_fileinfo	pfi;
	<span class="enscript-type">struct</span> pshm_info	pshminfo;
};


<span class="enscript-type">struct</span> pipe_info {
	<span class="enscript-type">struct</span> vinfo_stat	pipe_stat;
	uint64_t		pipe_handle;
	uint64_t		pipe_peerhandle;
	<span class="enscript-type">int</span>			pipe_status;
	<span class="enscript-type">int</span>			rfu_1;	<span class="enscript-comment">/* reserved */</span>
};

<span class="enscript-type">struct</span> pipe_fdinfo {
	<span class="enscript-type">struct</span> proc_fileinfo	pfi;
	<span class="enscript-type">struct</span> pipe_info	pipeinfo;
};


<span class="enscript-type">struct</span> kqueue_info {
	<span class="enscript-type">struct</span> vinfo_stat	kq_stat;
	uint32_t		kq_state;
	uint32_t		rfu_1;	<span class="enscript-comment">/* reserved */</span>
};

<span class="enscript-comment">/* keep in sync with KQ_* in sys/eventvar.h */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_KQUEUE_SELECT</span>	0x01
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_KQUEUE_SLEEP</span>	0x02
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_KQUEUE_32</span>		0x08
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_KQUEUE_64</span>		0x10
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_KQUEUE_QOS</span>		0x20

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">PRIVATE</span>
<span class="enscript-type">struct</span> kevent_extinfo {
	<span class="enscript-type">struct</span> kevent_qos_s kqext_kev;
	uint64_t kqext_sdata;
	<span class="enscript-type">int</span> kqext_status;
	<span class="enscript-type">int</span> kqext_sfflags;
	uint64_t kqext_reserved[2];
};
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* PRIVATE */</span>

<span class="enscript-type">struct</span> kqueue_fdinfo {
	<span class="enscript-type">struct</span> proc_fileinfo	pfi;
	<span class="enscript-type">struct</span> kqueue_info	kqueueinfo;
};

<span class="enscript-type">struct</span> appletalk_info {
	<span class="enscript-type">struct</span> vinfo_stat	atalk_stat;
};

<span class="enscript-type">struct</span> appletalk_fdinfo {
	<span class="enscript-type">struct</span> proc_fileinfo	pfi;
	<span class="enscript-type">struct</span> appletalk_info	appletalkinfo;
};



<span class="enscript-comment">/* defns of process file desc type */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROX_FDTYPE_ATALK</span>	0
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROX_FDTYPE_VNODE</span>	1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROX_FDTYPE_SOCKET</span>	2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROX_FDTYPE_PSHM</span>	3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROX_FDTYPE_PSEM</span>	4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROX_FDTYPE_KQUEUE</span>	5
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROX_FDTYPE_PIPE</span>	6
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROX_FDTYPE_FSEVENTS</span>	7

<span class="enscript-type">struct</span> proc_fdinfo {
	int32_t			proc_fd;
	uint32_t		proc_fdtype;	
};

<span class="enscript-type">struct</span> proc_fileportinfo {
	uint32_t		proc_fileport;
	uint32_t		proc_fdtype;
};

<span class="enscript-comment">/* Flavors for proc_pidinfo() */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDLISTFDS</span>			1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDLISTFD_SIZE</span>		(sizeof(struct proc_fdinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTASKALLINFO</span>		2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTASKALLINFO_SIZE</span>	(sizeof(struct proc_taskallinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTBSDINFO</span>		3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTBSDINFO_SIZE</span>		(sizeof(struct proc_bsdinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTASKINFO</span>		4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTASKINFO_SIZE</span>		(sizeof(struct proc_taskinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTHREADINFO</span>		5
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTHREADINFO_SIZE</span>		(sizeof(struct proc_threadinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDLISTTHREADS</span>		6
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDLISTTHREADS_SIZE</span>	(2* sizeof(uint32_t))


#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDREGIONINFO</span>		7
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDREGIONINFO_SIZE</span>		(sizeof(struct proc_regioninfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDREGIONPATHINFO</span>		8
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDREGIONPATHINFO_SIZE</span>	(sizeof(struct proc_regionwithpathinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDVNODEPATHINFO</span>		9
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDVNODEPATHINFO_SIZE</span>	(sizeof(struct proc_vnodepathinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTHREADPATHINFO</span>		10
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTHREADPATHINFO_SIZE</span>	(sizeof(struct proc_threadwithpathinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDPATHINFO</span>		11
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDPATHINFO_SIZE</span>		(MAXPATHLEN)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDPATHINFO_MAXSIZE</span>	(4*MAXPATHLEN)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDWORKQUEUEINFO</span>		12
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDWORKQUEUEINFO_SIZE</span>	(sizeof(struct proc_workqueueinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDT_SHORTBSDINFO</span>		13
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDT_SHORTBSDINFO_SIZE</span>	(sizeof(struct proc_bsdshortinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDLISTFILEPORTS</span>		14
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDLISTFILEPORTS_SIZE</span>	(sizeof(struct proc_fileportinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTHREADID64INFO</span>		15
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDTHREADID64INFO_SIZE</span>	(sizeof(struct proc_threadinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PID_RUSAGE</span>			16
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PID_RUSAGE_SIZE</span>		0

#<span class="enscript-reference">ifdef</span>  <span class="enscript-variable-name">PRIVATE</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDUNIQIDENTIFIERINFO</span>	17
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDUNIQIDENTIFIERINFO_SIZE</span> \
                                  	(<span class="enscript-keyword">sizeof</span>(<span class="enscript-type">struct</span> proc_uniqidentifierinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDT_BSDINFOWITHUNIQID</span>	18
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDT_BSDINFOWITHUNIQID_SIZE</span> \
                                 	(<span class="enscript-keyword">sizeof</span>(<span class="enscript-type">struct</span> proc_bsdinfowithuniqid))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDARCHINFO</span>		19
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDARCHINFO_SIZE</span>		\
					(<span class="enscript-keyword">sizeof</span>(<span class="enscript-type">struct</span> proc_archinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDCOALITIONINFO</span>		20
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDCOALITIONINFO_SIZE</span>	(sizeof(struct proc_pidcoalitioninfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDNOTEEXIT</span>		21
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDNOTEEXIT_SIZE</span>		(sizeof(uint32_t))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDREGIONPATHINFO2</span>		22
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDREGIONPATHINFO2_SIZE</span>	(sizeof(struct proc_regionwithpathinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDREGIONPATHINFO3</span>		23
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDREGIONPATHINFO3_SIZE</span>	(sizeof(struct proc_regionwithpathinfo))

#<span class="enscript-reference">endif</span>

<span class="enscript-comment">/* Flavors for proc_pidfdinfo */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDVNODEINFO</span>		1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDVNODEINFO_SIZE</span>	(sizeof(struct vnode_fdinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDVNODEPATHINFO</span>		2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDVNODEPATHINFO_SIZE</span>	(sizeof(struct vnode_fdinfowithpath))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDSOCKETINFO</span>		3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDSOCKETINFO_SIZE</span>	(sizeof(struct socket_fdinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDPSEMINFO</span>		4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDPSEMINFO_SIZE</span>		(sizeof(struct psem_fdinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDPSHMINFO</span>		5
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDPSHMINFO_SIZE</span>		(sizeof(struct pshm_fdinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDPIPEINFO</span>		6
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDPIPEINFO_SIZE</span>		(sizeof(struct pipe_fdinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDKQUEUEINFO</span>		7
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDKQUEUEINFO_SIZE</span>	(sizeof(struct kqueue_fdinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDATALKINFO</span>		8
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDATALKINFO_SIZE</span>	(sizeof(struct appletalk_fdinfo))

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">PRIVATE</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDKQUEUE_EXTINFO</span>	9
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFDKQUEUE_EXTINFO_SIZE</span>	(sizeof(struct kevent_extinfo))
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* PRIVATE */</span>

<span class="enscript-comment">/* Flavors for proc_pidfileportinfo */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFILEPORTVNODEPATHINFO</span>	2	<span class="enscript-comment">/* out: vnode_fdinfowithpath */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFILEPORTVNODEPATHINFO_SIZE</span>	\
					PROC_PIDFDVNODEPATHINFO_SIZE

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFILEPORTSOCKETINFO</span>	3	<span class="enscript-comment">/* out: socket_fdinfo */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFILEPORTSOCKETINFO_SIZE</span>	PROC_PIDFDSOCKETINFO_SIZE

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFILEPORTPSHMINFO</span>	5	<span class="enscript-comment">/* out: pshm_fdinfo */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFILEPORTPSHMINFO_SIZE</span>	PROC_PIDFDPSHMINFO_SIZE

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFILEPORTPIPEINFO</span>	6	<span class="enscript-comment">/* out: pipe_fdinfo */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDFILEPORTPIPEINFO_SIZE</span>	PROC_PIDFDPIPEINFO_SIZE

<span class="enscript-comment">/* used for proc_setcontrol */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_SELFSET_PCONTROL</span>		1

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_SELFSET_THREADNAME</span>		2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_SELFSET_THREADNAME_SIZE</span>	(MAXTHREADNAMESIZE -1)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_SELFSET_VMRSRCOWNER</span>	3

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_SELFSET_DELAYIDLESLEEP</span>	4

<span class="enscript-comment">/* used for proc_dirtycontrol */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTYCONTROL_TRACK</span>         1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTYCONTROL_SET</span>           2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTYCONTROL_GET</span>           3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTYCONTROL_CLEAR</span>         4

<span class="enscript-comment">/* proc_track_dirty() flags */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTY_TRACK</span>                0x1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTY_ALLOW_IDLE_EXIT</span>      0x2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTY_DEFER</span>                0x4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTY_LAUNCH_IN_PROGRESS</span>   0x8

<span class="enscript-comment">/* proc_get_dirty() flags */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTY_TRACKED</span>              0x1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTY_ALLOWS_IDLE_EXIT</span>     0x2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTY_IS_DIRTY</span>             0x4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_DIRTY_LAUNCH_IS_IN_PROGRESS</span>   0x8

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">PRIVATE</span>

<span class="enscript-comment">/* Flavors for proc_pidoriginatorinfo */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDORIGINATOR_UUID</span>		0x1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDORIGINATOR_UUID_SIZE</span>	(sizeof(uuid_t))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDORIGINATOR_BGSTATE</span>	0x2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDORIGINATOR_BGSTATE_SIZE</span> (sizeof(uint32_t))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDORIGINATOR_PID_UUID</span>     0x3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_PIDORIGINATOR_PID_UUID_SIZE</span> (sizeof(struct proc_originatorinfo))

<span class="enscript-comment">/* Flavors for proc_listcoalitions */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">LISTCOALITIONS_ALL_COALS</span>	1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">LISTCOALITIONS_ALL_COALS_SIZE</span>   (sizeof(struct procinfo_coalinfo))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">LISTCOALITIONS_SINGLE_TYPE</span>	2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">LISTCOALITIONS_SINGLE_TYPE_SIZE</span> (sizeof(struct procinfo_coalinfo))

<span class="enscript-comment">/* __proc_info() call numbers */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_LISTPIDS</span>         0x1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_PIDINFO</span>          0x2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_PIDFDINFO</span>        0x3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_KERNMSGBUF</span>       0x4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_SETCONTROL</span>       0x5
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_PIDFILEPORTINFO</span>  0x6
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_TERMINATE</span>        0x7
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_DIRTYCONTROL</span>     0x8
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_PIDRUSAGE</span>        0x9
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_PIDORIGINATORINFO</span> 0xa
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_INFO_CALL_LISTCOALITIONS</span>   0xb

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* PRIVATE */</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">XNU_KERNEL_PRIVATE</span>
#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">pshmnode</span>
<span class="enscript-type">struct</span> pshmnode;
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">psemnode</span>
<span class="enscript-type">struct</span> psemnode ;
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">pipe</span>
<span class="enscript-type">struct</span> pipe;
#<span class="enscript-reference">endif</span>

<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">fill_socketinfo</span>(socket_t so, <span class="enscript-type">struct</span> socket_info *si);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">fill_pshminfo</span>(<span class="enscript-type">struct</span> pshmnode * pshm, <span class="enscript-type">struct</span> pshm_info * pinfo);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">fill_pseminfo</span>(<span class="enscript-type">struct</span> psemnode * psem, <span class="enscript-type">struct</span> psem_info * pinfo);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">fill_pipeinfo</span>(<span class="enscript-type">struct</span> pipe * cpipe, <span class="enscript-type">struct</span> pipe_info * pinfo);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">fill_kqueueinfo</span>(<span class="enscript-type">struct</span> kqueue * kq, <span class="enscript-type">struct</span> kqueue_info * kinfo);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">pid_kqueue_extinfo</span>(proc_t, <span class="enscript-type">struct</span> kqueue * kq, user_addr_t buffer, uint32_t buffersize, int32_t * retval);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">fill_procworkqueue</span>(proc_t, <span class="enscript-type">struct</span> proc_workqueueinfo *);
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* XNU_KERNEL_PRIVATE */</span>

__END_DECLS

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/*_SYS_PROC_INFO_H */</span>
</pre>
<hr />
</body></html>