<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>param.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">param.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2000 Apple Computer, Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>
<span class="enscript-comment">/* Copyright (c) 1995, 1997 Apple Computer, Inc. All Rights Reserved */</span>
<span class="enscript-comment">/*-
 * Copyright (c) 1982, 1986, 1989, 1993
 *	The Regents of the University of California.  All rights reserved.
 * (c) UNIX System Laboratories, Inc.
 * All or some portions of this file are derived from material licensed
 * to the University of California by American Telephone and Telegraph
 * Co. or Unix System Laboratories, Inc. and are reproduced herein with
 * the permission of UNIX System Laboratories, Inc.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@(#)param.h	8.3 (Berkeley) 4/4/95
 */</span>

#<span class="enscript-reference">ifndef</span>	<span class="enscript-variable-name">_SYS_PARAM_H_</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">_SYS_PARAM_H_</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">BSD</span>	199506		<span class="enscript-comment">/* System version (year &amp; month). */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">BSD4_3</span>	1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">BSD4_4</span>	1

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">NeXTBSD</span>	1995064		<span class="enscript-comment">/* NeXTBSD version (year, month, release) */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">NeXTBSD4_0</span> 0		<span class="enscript-comment">/* NeXTBSD 4.0 */</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/_types.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/_types/_null.h&gt;</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">LOCORE</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/types.h&gt;</span>
#<span class="enscript-reference">endif</span>

<span class="enscript-comment">/*
 * Machine-independent constants (some used in following include files).
 * Redefined constants are from POSIX 1003.1 limits file.
 *
 * MAXCOMLEN should be &gt;= sizeof(ac_comm) (see &lt;acct.h&gt;)
 * MAXLOGNAME should be &gt;= UT_NAMESIZE (see &lt;utmp.h&gt;)
 */</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/syslimits.h&gt;</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">MAXCOMLEN</span>	16		<span class="enscript-comment">/* max command name remembered */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">MAXINTERP</span>	64		<span class="enscript-comment">/* max interpreter file name length */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">MAXLOGNAME</span>	255		<span class="enscript-comment">/* max login name length */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">MAXUPRC</span>		CHILD_MAX	<span class="enscript-comment">/* max simultaneous processes */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">NCARGS</span>		ARG_MAX		<span class="enscript-comment">/* max bytes for an exec function */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">NGROUPS</span>		NGROUPS_MAX	<span class="enscript-comment">/* max number groups */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">NOFILE</span>		256		<span class="enscript-comment">/* default max open files per process */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">NOGROUP</span>		65535		<span class="enscript-comment">/* marker for empty group set member */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MAXHOSTNAMELEN</span>	256		<span class="enscript-comment">/* max hostname size */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MAXDOMNAMELEN</span>	256		<span class="enscript-comment">/* maximum domain name length */</span>

<span class="enscript-comment">/* Machine type dependent parameters. */</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;machine/param.h&gt;</span>

<span class="enscript-comment">/* More types and definitions used throughout the kernel. */</span>
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;machine/limits.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/cdefs.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/errno.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/time.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/resource.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/ucred.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/uio.h&gt;</span>
#<span class="enscript-reference">else</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;limits.h&gt;</span>
#<span class="enscript-reference">endif</span>

<span class="enscript-comment">/* Signals. */</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/signal.h&gt;</span>

<span class="enscript-comment">/*
 * Priorities.  Note that with 32 run queues, differences less than 4 are
 * insignificant.
 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PSWP</span>	0
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PVM</span>	4
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PINOD</span>	8
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PRIBIO</span>	16
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PVFS</span>	20
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PZERO</span>	22		<span class="enscript-comment">/* No longer magic, shouldn't be here.  XXX */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PSOCK</span>	24
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PWAIT</span>	32
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PLOCK</span>	36
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PPAUSE</span>	40
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PUSER</span>	50
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">MAXPRI</span>	127		<span class="enscript-comment">/* Priorities range from 0 through MAXPRI. */</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PRIMASK</span>	0x0ff
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">PCATCH</span>	0x100		<span class="enscript-comment">/* OR'd with pri for tsleep to check signals */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PTTYBLOCK</span> 0x200		<span class="enscript-comment">/* for tty SIGTTOU and SIGTTIN blocking */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PDROP</span>	0x400		<span class="enscript-comment">/* OR'd with pri to stop re-aquistion of mutex upon wakeup */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PSPIN</span>	0x800		<span class="enscript-comment">/* OR'd with pri to require mutex in spin mode upon wakeup */</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">NBPW</span>	sizeof(int)	<span class="enscript-comment">/* number of bytes per word (integer) */</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CMASK</span>	022		<span class="enscript-comment">/* default file mask: S_IWGRP|S_IWOTH */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">NODEV</span>	(dev_t)(-1)	<span class="enscript-comment">/* non-existent device */</span>

<span class="enscript-comment">/*
 * Clustering of hardware pages on machines with ridiculously small
 * page sizes is done here.  The paging subsystem deals with units of
 * CLSIZE pte's describing NBPG (from machine/param.h) pages each.
 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLBYTES</span>		(CLSIZE*NBPG)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLOFSET</span>		(CLSIZE*NBPG-1)	<span class="enscript-comment">/* for clusters, like PGOFSET */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">claligned</span>(x)	((((int)(x))&amp;CLOFSET)==0)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLOFF</span>		CLOFSET
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLSHIFT</span>		(PGSHIFT+CLSIZELOG2)

#<span class="enscript-reference">if</span> <span class="enscript-variable-name">CLSIZE</span>==1
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">clbase</span>(i)	(i)
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">clrnd</span>(i)	(i)
#<span class="enscript-reference">else</span>
<span class="enscript-comment">/* Give the base virtual address (first of CLSIZE). */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">clbase</span>(i)	((i) &amp;~ (CLSIZE-1))
<span class="enscript-comment">/* Round a number of clicks up to a whole cluster. */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">clrnd</span>(i)	(((i) + (CLSIZE-1)) &amp;~ (CLSIZE-1))
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CBLOCK</span>	64		<span class="enscript-comment">/* Clist block size, must be a power of 2. */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">CBQSIZE</span>	(CBLOCK/NBBY)	<span class="enscript-comment">/* Quote bytes/cblock - can do better. */</span>
				<span class="enscript-comment">/* Data chars/clist. */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CBSIZE</span>	(CBLOCK - sizeof(struct cblock *) - CBQSIZE)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CROUND</span>	(CBLOCK - 1)	<span class="enscript-comment">/* Clist rounding. */</span>

<span class="enscript-comment">/*
 * File system parameters and macros.
 *
 * The file system is made out of blocks of at most MAXPHYS units, with
 * smaller units (fragments) only in the last direct block.  MAXBSIZE
 * primarily determines the size of buffers in the buffer pool.  It may be
 * made larger than MAXPHYS without any effect on existing file systems;
 * however making it smaller may make some file systems unmountable.
 * We set this to track the value of MAX_UPL_TRANSFER_BYTES from
 * osfmk/mach/memory_object_types.h to bound it at the maximum UPL size.
 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">MAXBSIZE</span>	(256 * 4096)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MAXPHYSIO</span>	MAXPHYS
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MAXFRAG</span> 	8

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">MAXPHYSIO_WIRED</span>	(16 * 1024 * 1024)

<span class="enscript-comment">/*
 * MAXPATHLEN defines the longest permissable path length after expanding
 * symbolic links. It is used to allocate a temporary buffer from the buffer
 * pool in which to do the name expansion, hence should be a power of two,
 * and must be less than or equal to MAXBSIZE.  MAXSYMLINKS defines the
 * maximum number of symbolic links that may be expanded in a path name.
 * It should be set high enough to allow all legitimate uses, but halt
 * infinite loops reasonably quickly.
 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">MAXPATHLEN</span>	PATH_MAX
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MAXSYMLINKS</span>	32

<span class="enscript-comment">/* Bit map related macros. */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">setbit</span>(a,i)	(((char *)(a))[(i)/NBBY] |= 1&lt;&lt;((i)%NBBY))
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">clrbit</span>(a,i)	(((char *)(a))[(i)/NBBY] &amp;= ~(1&lt;&lt;((i)%NBBY)))
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">isset</span>(a,i)	(((char *)(a))[(i)/NBBY] &amp; (1&lt;&lt;((i)%NBBY)))
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">isclr</span>(a,i)	((((char *)(a))[(i)/NBBY] &amp; (1&lt;&lt;((i)%NBBY))) == 0)

<span class="enscript-comment">/* Macros for counting and rounding. */</span>
#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">howmany</span>
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">howmany</span>(x, y)	((((x) % (y)) == 0) ? ((x) / (y)) : (((x) / (y)) + 1))
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">roundup</span>(x, y)	((((x) % (y)) == 0) ? \
			(x) : ((x) + ((y) - ((x) % (y)))))
#<span class="enscript-reference">define</span> <span class="enscript-function-name">powerof2</span>(x)	((((x)-1)&amp;(x))==0)

<span class="enscript-comment">/* Macros for min/max. */</span>
#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">MIN</span>
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">MIN</span>(a,b) (((a)&lt;(b))?(a):(b))
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* MIN */</span>
#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">MAX</span>
#<span class="enscript-reference">define</span>	<span class="enscript-function-name">MAX</span>(a,b) (((a)&gt;(b))?(a):(b))
#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* MAX */</span>

<span class="enscript-comment">/*
 * Constants for setting the parameters of the kernel memory allocator.
 *
 * 2 ** MINBUCKET is the smallest unit of memory that will be
 * allocated. It must be at least large enough to hold a pointer.
 *
 * Units of memory less or equal to MAXALLOCSAVE will permanently
 * allocate physical memory; requests for these size pieces of
 * memory are quite fast. Allocations greater than MAXALLOCSAVE must
 * always allocate and free physical memory; requests for these
 * size allocations should be done infrequently as they will be slow.
 *
 * Constraints: CLBYTES &lt;= MAXALLOCSAVE &lt;= 2 ** (MINBUCKET + 14), and
 * MAXALLOCSIZE must be a power of two.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MINBUCKET</span>	4		<span class="enscript-comment">/* 4 =&gt; min allocation of 16 bytes */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MAXALLOCSAVE</span>	(2 * CLBYTES)

<span class="enscript-comment">/*
 * Scale factor for scaled integers used to count %cpu time and load avgs.
 *
 * The number of CPU `tick's that map to a unique `%age' can be expressed
 * by the formula (1 / (2 ^ (FSHIFT - 11))).  The maximum load average that
 * can be calculated (assuming 32 bits) can be closely approximated using
 * the formula (2 ^ (2 * (16 - FSHIFT))) for (FSHIFT &lt; 15).
 *
 * For the scheduler to maintain a 1:1 mapping of CPU `tick' to `%age',
 * FSHIFT must be at least 11; this gives us a maximum load avg of ~1024.
 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">FSHIFT</span>	11		<span class="enscript-comment">/* bits to right of fixed binary point */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FSCALE</span>	(1&lt;&lt;FSHIFT)

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* _SYS_PARAM_H_ */</span>
</pre>
<hr />
</body></html>