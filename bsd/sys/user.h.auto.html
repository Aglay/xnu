<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>user.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">user.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2000-2012 Apple Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>
<span class="enscript-comment">/* Copyright (c) 1995, 1997 Apple Computer, Inc. All Rights Reserved */</span>
<span class="enscript-comment">/*
 * Copyright (c) 1982, 1986, 1989, 1991, 1993
 *	The Regents of the University of California.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@(#)user.h	8.2 (Berkeley) 9/23/93
 */</span>

#<span class="enscript-reference">ifndef</span>	<span class="enscript-variable-name">_SYS_USER_H_</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">_SYS_USER_H_</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/appleapiopts.h&gt;</span>
<span class="enscript-type">struct</span> waitq_set;
#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">KERNEL</span>
<span class="enscript-comment">/* stuff that *used* to be included by user.h, or is now needed */</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;errno.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/time.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/resource.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/ucred.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/uio.h&gt;</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">XNU_KERNEL_PRIVATE</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/resourcevar.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/signalvar.h&gt;</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/vm.h&gt;</span>		<span class="enscript-comment">/* XXX */</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/sysctl.h&gt;</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL</span>
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">BSD_KERNEL_PRIVATE</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/pthread_internal.h&gt;</span> <span class="enscript-comment">/* for uu_kwe entry */</span>
#<span class="enscript-reference">endif</span>  <span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__APPLE_API_PRIVATE</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/eventvar.h&gt;</span>

#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__LP64__</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">XNU_KERNEL_PRIVATE</span>)
<span class="enscript-comment">/*
 * VFS context structure (part of uthread)
 */</span>
<span class="enscript-type">struct</span> vfs_context {
	thread_t	vc_thread;		<span class="enscript-comment">/* pointer to Mach thread */</span>
	kauth_cred_t	vc_ucred;		<span class="enscript-comment">/* per thread credential */</span>
};

<span class="enscript-comment">/*
 * struct representing a document &quot;tombstone&quot; that's recorded
 * when a thread manipulates files marked with a document-id.
 * if the thread recreates the same item, this tombstone is
 * used to preserve the document_id on the new file.
 *
 * It is a separate structure because of its size - we want to
 * allocate it on demand instead of just stuffing it into the
 * uthread structure.
 */</span>
<span class="enscript-type">struct</span> doc_tombstone {
	<span class="enscript-type">struct</span> vnode	 *t_lastop_parent;
	<span class="enscript-type">struct</span> vnode	 *t_lastop_item;
	uint32_t 	  t_lastop_parent_vid;
	uint32_t 	  t_lastop_item_vid;
	uint64_t          t_lastop_fileid;
	uint64_t          t_lastop_document_id;
	<span class="enscript-type">unsigned</span> <span class="enscript-type">char</span>     t_lastop_filename[NAME_MAX+1];
};

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* !__LP64 || XNU_KERNEL_PRIVATE */</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">BSD_KERNEL_PRIVATE</span>
<span class="enscript-comment">/* XXX Deprecated: xnu source compatability */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">uu_ucred</span>	uu_context.vc_ucred

<span class="enscript-type">struct</span> label;		<span class="enscript-comment">/* MAC label dummy struct */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MAXTHREADNAMESIZE</span> 64
<span class="enscript-comment">/*
 *	Per-thread U area.
 */</span>
 
<span class="enscript-type">struct</span> uthread {
	<span class="enscript-comment">/* syscall parameters, results and catches */</span>
	u_int64_t uu_arg[8]; <span class="enscript-comment">/* arguments to current system call */</span>
    <span class="enscript-type">int</span> uu_rval[2];
	<span class="enscript-type">unsigned</span> <span class="enscript-type">int</span> syscall_code; <span class="enscript-comment">/* current syscall code */</span>

	<span class="enscript-comment">/* thread exception handling */</span>
	mach_exception_code_t uu_code;	<span class="enscript-comment">/* ``code'' to trap */</span>
	mach_exception_subcode_t uu_subcode;
	<span class="enscript-type">int</span>	uu_exception;
	<span class="enscript-type">char</span> uu_cursig;			<span class="enscript-comment">/* p_cursig for exc. */</span>
	<span class="enscript-comment">/* support for syscalls which use continuations */</span>
	<span class="enscript-type">union</span> {
		<span class="enscript-type">struct</span> _select_data {
			u_int64_t abstime;
			uint64_t *wqp;
			<span class="enscript-type">int</span> count;
			<span class="enscript-type">struct</span> select_nocancel_args *args;	<span class="enscript-comment">/* original syscall arguments */</span>
			int32_t *retval;					<span class="enscript-comment">/* place to store return val */</span>
		} ss_select_data;
		<span class="enscript-type">struct</span> _kqueue_scan {
			kevent_callback_t call; <span class="enscript-comment">/* per-event callback */</span>
			kqueue_continue_t cont; <span class="enscript-comment">/* whole call continuation */</span>
			uint64_t deadline;	<span class="enscript-comment">/* computed deadline for operation */</span>
			<span class="enscript-type">void</span> *data;		<span class="enscript-comment">/* caller's private data */</span>
		} ss_kqueue_scan;		<span class="enscript-comment">/* saved state for kevent_scan() */</span>
		<span class="enscript-type">struct</span> _kevent {
			<span class="enscript-type">struct</span> _kqueue_scan scan;<span class="enscript-comment">/* space for the generic data */</span>
			<span class="enscript-type">struct</span> fileproc *fp;	 <span class="enscript-comment">/* fileproc we hold iocount on */</span>
			<span class="enscript-type">int</span> fd;			         <span class="enscript-comment">/* filedescriptor for kq */</span>
			<span class="enscript-type">unsigned</span> <span class="enscript-type">int</span> eventflags; <span class="enscript-comment">/* flags to determine kevent size/direction */</span>
			<span class="enscript-type">int</span> eventcount;	 	     <span class="enscript-comment">/* user-level event count */</span>
			<span class="enscript-type">int</span> eventout;		     <span class="enscript-comment">/* number of events output */</span>
			int32_t *retval;	     <span class="enscript-comment">/* place to store return val */</span>
			user_addr_t eventlist;	 <span class="enscript-comment">/* user-level event list address */</span>
		} ss_kevent;			 <span class="enscript-comment">/* saved state for kevent() */</span>

		<span class="enscript-type">struct</span> _kauth {
			user_addr_t message;	<span class="enscript-comment">/* message in progress */</span>
		} uu_kauth;

		<span class="enscript-type">struct</span> ksyn_waitq_element  uu_kwe;		<span class="enscript-comment">/* user for pthread synch */</span>

		<span class="enscript-type">struct</span> _waitid_data {
			<span class="enscript-type">struct</span> waitid_nocancel_args *args;	<span class="enscript-comment">/* original syscall arguments */</span>
			int32_t *retval;			<span class="enscript-comment">/* place to store return val */</span>
		} uu_waitid_data;

		<span class="enscript-type">struct</span> _wait4_data {
			<span class="enscript-type">struct</span> wait4_nocancel_args *args;	<span class="enscript-comment">/* original syscall arguments */</span>
			int32_t *retval;			<span class="enscript-comment">/* place to store return val */</span>
		} uu_wait4_data;
	} uu_kevent;

	<span class="enscript-comment">/* Persistent memory allocations across system calls */</span>
	<span class="enscript-type">struct</span> _select {
			u_int32_t	*ibits, *obits; <span class="enscript-comment">/* bits to select on */</span>
			uint	nbytes;	<span class="enscript-comment">/* number of bytes in ibits and obits */</span>
	} uu_select;			<span class="enscript-comment">/* saved state for select() */</span>

  <span class="enscript-comment">/* internal support for continuation framework */</span>
    <span class="enscript-type">int</span> (*uu_continuation)(<span class="enscript-type">int</span>);
    <span class="enscript-type">int</span> uu_pri;
    <span class="enscript-type">int</span> uu_timo;
	caddr_t uu_wchan;			<span class="enscript-comment">/* sleeping thread wait channel */</span>
	<span class="enscript-type">const</span> <span class="enscript-type">char</span> *uu_wmesg;			<span class="enscript-comment">/* ... wait message */</span>
	<span class="enscript-type">struct</span> proc * uu_proc;
	thread_t uu_thread;
	<span class="enscript-type">void</span> * uu_userstate;
	<span class="enscript-type">struct</span> waitq_set *uu_wqset;		<span class="enscript-comment">/* waitq state cached across select calls */</span>
	size_t uu_wqstate_sz;			<span class="enscript-comment">/* ...size of uu_wqset buffer */</span>
	<span class="enscript-type">int</span> uu_flag;
	sigset_t uu_siglist;				<span class="enscript-comment">/* signals pending for the thread */</span>
	sigset_t  uu_sigwait;				<span class="enscript-comment">/*  sigwait on this thread*/</span>
	sigset_t  uu_sigmask;				<span class="enscript-comment">/* signal mask for the thread */</span>
	sigset_t  uu_oldmask;				<span class="enscript-comment">/* signal mask saved before sigpause */</span>
	sigset_t  uu_vforkmask;				<span class="enscript-comment">/* saved signal mask during vfork */</span>
	<span class="enscript-type">struct</span> vfs_context uu_context;			<span class="enscript-comment">/* thread + cred */</span>

	TAILQ_ENTRY(uthread) uu_list;		<span class="enscript-comment">/* List of uthreads in proc */</span>

	<span class="enscript-type">struct</span> kaudit_record 	*uu_ar;			<span class="enscript-comment">/* audit record */</span>
	<span class="enscript-type">struct</span> task*	uu_aio_task;			<span class="enscript-comment">/* target task for async io */</span>
    
	lck_mtx_t	*uu_mtx;

	TAILQ_ENTRY(uthread) uu_throttlelist;	<span class="enscript-comment">/* List of uthreads currently throttled */</span>
	<span class="enscript-type">void</span>	*	uu_throttle_info; 	<span class="enscript-comment">/* pointer to throttled I/Os info */</span>
	<span class="enscript-type">int</span>		uu_on_throttlelist;
	<span class="enscript-type">int</span>		uu_lowpri_window;
	boolean_t	uu_throttle_bc;

	u_int32_t	uu_network_marks;	<span class="enscript-comment">/* network control flow marks */</span>

	<span class="enscript-type">struct</span> kern_sigaltstack uu_sigstk;
        vnode_t		uu_vreclaims;
	vnode_t		uu_cdir;		<span class="enscript-comment">/* per thread CWD */</span>
	<span class="enscript-type">int</span>		uu_dupfd;		<span class="enscript-comment">/* fd in fdesc_open/dupfdopen */</span>
        <span class="enscript-type">int</span>		uu_defer_reclaims;

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">JOE_DEBUG</span>
        <span class="enscript-type">int</span>		uu_iocount;
        <span class="enscript-type">int</span>		uu_vpindex;
        <span class="enscript-type">void</span> 	*	uu_vps[32];
        <span class="enscript-type">void</span>    *       uu_pcs[32][10];
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">if</span> <span class="enscript-variable-name">PROC_REF_DEBUG</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">NUM_PROC_REFS_TO_TRACK</span> 32
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_REF_STACK_DEPTH</span> 10
	<span class="enscript-type">int</span>		uu_proc_refcount;
	<span class="enscript-type">int</span>		uu_pindex;
	<span class="enscript-type">void</span>	*	uu_proc_ps[NUM_PROC_REFS_TO_TRACK];
	uintptr_t	uu_proc_pcs[NUM_PROC_REFS_TO_TRACK][PROC_REF_STACK_DEPTH];
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">if</span> <span class="enscript-variable-name">CONFIG_DTRACE</span>
	uint32_t	t_dtrace_errno; <span class="enscript-comment">/* Most recent errno */</span>
	siginfo_t	t_dtrace_siginfo;
        uint64_t        t_dtrace_resumepid; <span class="enscript-comment">/* DTrace's pidresume() pid */</span>
        uint8_t         t_dtrace_stop;  <span class="enscript-comment">/* indicates a DTrace desired stop */</span>
        uint8_t         t_dtrace_sig;   <span class="enscript-comment">/* signal sent via DTrace's raise() */</span>
			     
        <span class="enscript-type">union</span> __tdu {
                <span class="enscript-type">struct</span> __tds {
                        uint8_t _t_dtrace_on;   <span class="enscript-comment">/* hit a fasttrap tracepoint */</span>
                        uint8_t _t_dtrace_step; <span class="enscript-comment">/* about to return to kernel */</span>
                        uint8_t _t_dtrace_ret;  <span class="enscript-comment">/* handling a return probe */</span>
                        uint8_t _t_dtrace_ast;  <span class="enscript-comment">/* saved ast flag */</span>
#<span class="enscript-reference">if</span> <span class="enscript-variable-name">__sol64</span> || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__APPLE__</span>)
                        uint8_t _t_dtrace_reg;  <span class="enscript-comment">/* modified register */</span>
#<span class="enscript-reference">endif</span>
                } _tds;
                u_int32_t _t_dtrace_ft;           <span class="enscript-comment">/* bitwise or of these flags */</span>
        } _tdu;
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">t_dtrace_ft</span>     _tdu._t_dtrace_ft
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">t_dtrace_on</span>     _tdu._tds._t_dtrace_on
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">t_dtrace_step</span>   _tdu._tds._t_dtrace_step
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">t_dtrace_ret</span>    _tdu._tds._t_dtrace_ret
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">t_dtrace_ast</span>    _tdu._tds._t_dtrace_ast
#<span class="enscript-reference">if</span> <span class="enscript-variable-name">__sol64</span> || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__APPLE__</span>)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">t_dtrace_reg</span>    _tdu._tds._t_dtrace_reg
#<span class="enscript-reference">endif</span>

        user_addr_t	t_dtrace_pc;    <span class="enscript-comment">/* DTrace saved pc from fasttrap */</span>
        user_addr_t	t_dtrace_npc;   <span class="enscript-comment">/* DTrace next pc from fasttrap */</span>
        user_addr_t	t_dtrace_scrpc; <span class="enscript-comment">/* DTrace per-thread scratch location */</span>
        user_addr_t	t_dtrace_astpc; <span class="enscript-comment">/* DTrace return sequence location */</span>

	<span class="enscript-type">struct</span> dtrace_ptss_page_entry*	t_dtrace_scratch; <span class="enscript-comment">/* scratch space entry */</span>

#<span class="enscript-reference">if</span> <span class="enscript-variable-name">__sol64</span> || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__APPLE__</span>)
        uint64_t        t_dtrace_regv;  <span class="enscript-comment">/* DTrace saved reg from fasttrap */</span>
#<span class="enscript-reference">endif</span>
	<span class="enscript-type">void</span> *		t_dtrace_syscall_args;
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* CONFIG_DTRACE */</span>
	<span class="enscript-type">void</span> *		uu_threadlist;
	<span class="enscript-type">char</span> *		pth_name;

	<span class="enscript-comment">/* Document Tracking struct used to track a &quot;tombstone&quot; for a document */</span>
	<span class="enscript-type">struct</span> doc_tombstone *t_tombstone;
};

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> uthread * uthread_t;

<span class="enscript-comment">/* Definition of uu_flag */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">UT_SAS_OLDMASK</span>	0x00000001	<span class="enscript-comment">/* need to restore mask before pause */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">UT_NO_SIGMASK</span>	0x00000002	<span class="enscript-comment">/* exited thread; invalid sigmask */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">UT_NOTCANCELPT</span>	0x00000004             <span class="enscript-comment">/* not a cancelation point */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">UT_CANCEL</span>	0x00000008             <span class="enscript-comment">/* thread marked for cancel */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">UT_CANCELED</span>	0x00000010            <span class="enscript-comment">/* thread cancelled */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">UT_CANCELDISABLE</span> 0x00000020            <span class="enscript-comment">/* thread cancel disabled */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">UT_ALTSTACK</span>	0x00000040	<span class="enscript-comment">/* this thread has alt stack for signals */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">UT_THROTTLE_IO</span>	0x00000080	<span class="enscript-comment">/* this thread issues throttle I/O */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">UT_PASSIVE_IO</span>	0x00000100	<span class="enscript-comment">/* this thread issues passive I/O */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">UT_PROCEXIT</span>	0x00000200	<span class="enscript-comment">/* this thread completed the  proc exit */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">UT_RAGE_VNODES</span>	0x00000400	<span class="enscript-comment">/* rapid age any vnodes created by this thread */</span>	
<span class="enscript-comment">/* 0x00000800 unused, used to be UT_BACKGROUND */</span>
<span class="enscript-comment">/* 0x00001000 unused, used to be UT_BACKGROUND_TRAFFIC_MGT */</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">UT_VFORK</span>	0x02000000	<span class="enscript-comment">/* thread has vfork children */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">UT_SETUID</span>	0x04000000	<span class="enscript-comment">/* thread is settugid() */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">UT_WASSETUID</span>	0x08000000	<span class="enscript-comment">/* thread was settugid() (in vfork) */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">UT_VFORKING</span>	0x10000000	<span class="enscript-comment">/* thread in vfork() syscall */</span>

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* __APPLE_API_PRIVATE */</span>

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* KERNEL */</span>

<span class="enscript-comment">/*
 * Per process structure containing data that isn't needed in core
 * when the process isn't running (esp. when swapped out).
 * This structure may or may not be at the same kernel address
 * in all processes.
 */</span>
 
<span class="enscript-type">struct</span>	user {
  <span class="enscript-comment">/* NOT USED ANYMORE */</span>
};

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* !_SYS_USER_H_ */</span>
</pre>
<hr />
</body></html>