<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>signal.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">signal.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2000-2006 Apple Computer, Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>
<span class="enscript-comment">/* Copyright (c) 1995 NeXT Computer, Inc. All Rights Reserved */</span>
<span class="enscript-comment">/*
 * Copyright (c) 1982, 1986, 1989, 1991, 1993
 *	The Regents of the University of California.  All rights reserved.
 * (c) UNIX System Laboratories, Inc.
 * All or some portions of this file are derived from material licensed
 * to the University of California by American Telephone and Telegraph
 * Co. or Unix System Laboratories, Inc. and are reproduced herein with
 * the permission of UNIX System Laboratories, Inc.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@(#)signal.h	8.2 (Berkeley) 1/21/94
 */</span>

#<span class="enscript-reference">ifndef</span>	<span class="enscript-variable-name">_SYS_SIGNAL_H_</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">_SYS_SIGNAL_H_</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/cdefs.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/appleapiopts.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;Availability.h&gt;</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">__DARWIN_NSIG</span>	32	<span class="enscript-comment">/* counting 0; could be 33 (mask is 1-32) */</span>

#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_ANSI_SOURCE</span>) &amp;&amp; (!<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>))
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">NSIG</span>	__DARWIN_NSIG
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;machine/signal.h&gt;</span>	<span class="enscript-comment">/* sigcontext; codes for SIGILL, SIGFPE */</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGHUP</span>	1	<span class="enscript-comment">/* hangup */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGINT</span>	2	<span class="enscript-comment">/* interrupt */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGQUIT</span>	3	<span class="enscript-comment">/* quit */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGILL</span>	4	<span class="enscript-comment">/* illegal instruction (not reset when caught) */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGTRAP</span>	5	<span class="enscript-comment">/* trace trap (not reset when caught) */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGABRT</span>	6	<span class="enscript-comment">/* abort() */</span>
#<span class="enscript-reference">if</span>  (<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) &amp;&amp; !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>))
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGPOLL</span>	7	<span class="enscript-comment">/* pollable event ([XSR] generated, not supported) */</span>
#<span class="enscript-reference">else</span>	<span class="enscript-comment">/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGIOT</span>	SIGABRT	<span class="enscript-comment">/* compatibility */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGEMT</span>	7	<span class="enscript-comment">/* EMT instruction */</span>
#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGFPE</span>	8	<span class="enscript-comment">/* floating point exception */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGKILL</span>	9	<span class="enscript-comment">/* kill (cannot be caught or ignored) */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGBUS</span>	10	<span class="enscript-comment">/* bus error */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGSEGV</span>	11	<span class="enscript-comment">/* segmentation violation */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGSYS</span>	12	<span class="enscript-comment">/* bad argument to system call */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGPIPE</span>	13	<span class="enscript-comment">/* write on a pipe with no one to read it */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGALRM</span>	14	<span class="enscript-comment">/* alarm clock */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGTERM</span>	15	<span class="enscript-comment">/* software termination signal from kill */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGURG</span>	16	<span class="enscript-comment">/* urgent condition on IO channel */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGSTOP</span>	17	<span class="enscript-comment">/* sendable stop signal not from tty */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGTSTP</span>	18	<span class="enscript-comment">/* stop signal from tty */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGCONT</span>	19	<span class="enscript-comment">/* continue a stopped process */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGCHLD</span>	20	<span class="enscript-comment">/* to parent on child stop or exit */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGTTIN</span>	21	<span class="enscript-comment">/* to readers pgrp upon background tty read */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGTTOU</span>	22	<span class="enscript-comment">/* like TTIN for output if (tp-&gt;t_local&amp;LTOSTOP) */</span>
#<span class="enscript-reference">if</span>  (!<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>))
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGIO</span>	23	<span class="enscript-comment">/* input/output possible signal */</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGXCPU</span>	24	<span class="enscript-comment">/* exceeded CPU time limit */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGXFSZ</span>	25	<span class="enscript-comment">/* exceeded file size limit */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGVTALRM</span> 26	<span class="enscript-comment">/* virtual time alarm */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGPROF</span>	27	<span class="enscript-comment">/* profiling time alarm */</span>
#<span class="enscript-reference">if</span>  (!<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>))
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SIGWINCH</span> 28	<span class="enscript-comment">/* window size changes */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SIGINFO</span>	29	<span class="enscript-comment">/* information request */</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SIGUSR1</span> 30	<span class="enscript-comment">/* user defined signal 1 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SIGUSR2</span> 31	<span class="enscript-comment">/* user defined signal 2 */</span>

#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_ANSI_SOURCE</span>) || <span class="enscript-variable-name">__DARWIN_UNIX03</span> || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__cplusplus</span>)
<span class="enscript-comment">/*
 * Language spec sez we must list exactly one parameter, even though we
 * actually supply three.  Ugh!
 * SIG_HOLD is chosen to avoid KERN_SIG_* values in &lt;sys/signalvar.h&gt;
 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_DFL</span>		(void (*)(int))0
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_IGN</span>		(void (*)(int))1
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_HOLD</span>	(void (*)(int))5
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_ERR</span>		((void (*)(int))-1)
#<span class="enscript-reference">else</span>
<span class="enscript-comment">/* DO NOT REMOVE THE COMMENTED OUT int: fixincludes needs to see them */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_DFL</span>		(void (*)(<span class="enscript-comment">/*int*/</span>))0
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_IGN</span>		(void (*)(<span class="enscript-comment">/*int*/</span>))1
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_HOLD</span>	(void (*)(<span class="enscript-comment">/*int*/</span>))5
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_ERR</span>		((void (*)(<span class="enscript-comment">/*int*/</span>))-1)
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_ANSI_SOURCE</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/_types.h&gt;</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;machine/_mcontext.h&gt;</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">KERNEL</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/_pthread/_pthread_attr_t.h&gt;</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL */</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/_types/_sigaltstack.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/_types/_ucontext.h&gt;</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/_types/_pid_t.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/_types/_sigset_t.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/_types/_size_t.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/_types/_uid_t.h&gt;</span>

<span class="enscript-type">union</span> sigval {
	<span class="enscript-comment">/* Members as suggested by Annex C of POSIX 1003.1b. */</span>
	<span class="enscript-type">int</span>	sival_int;
	<span class="enscript-type">void</span>	*sival_ptr;
};

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGEV_NONE</span>	0	<span class="enscript-comment">/* No async notification */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGEV_SIGNAL</span>	1	<span class="enscript-comment">/* aio - completion notification */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGEV_THREAD</span>	3	<span class="enscript-comment">/* [NOTIMP] [RTS] call notification function */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">KERNEL</span>
<span class="enscript-type">struct</span> sigevent {
	<span class="enscript-type">int</span>				sigev_notify;				<span class="enscript-comment">/* Notification type */</span>
	<span class="enscript-type">int</span>				sigev_signo;				<span class="enscript-comment">/* Signal number */</span>
	<span class="enscript-type">union</span> sigval	sigev_value;				<span class="enscript-comment">/* Signal value */</span>
	<span class="enscript-type">void</span>			(*sigev_notify_function)(<span class="enscript-type">union</span> sigval);	  <span class="enscript-comment">/* Notification function */</span>
	pthread_attr_t	*sigev_notify_attributes;	<span class="enscript-comment">/* Notification attributes */</span>
};
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL */</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">BSD_KERNEL_PRIVATE</span>

<span class="enscript-type">union</span> user64_sigval {
	<span class="enscript-type">struct</span> {
		uint32_t		pad;	<span class="enscript-comment">/* assumes Motorola byte order */</span>
		int32_t			sival_int;
	} size_equivalent;
	user64_addr_t	sival_ptr;
};

<span class="enscript-type">union</span> user32_sigval {
	<span class="enscript-comment">/* Members as suggested by Annex C of POSIX 1003.1b. */</span>
	int32_t	sival_int;
	user32_addr_t sival_ptr;
};

<span class="enscript-type">union</span> user_sigval {
	<span class="enscript-type">struct</span> {
		uint32_t		pad;	<span class="enscript-comment">/* assumes Motorola byte order */</span>
		int32_t			sival_int;
	} size_equivalent;
	user_addr_t sival_ptr;
};

<span class="enscript-type">struct</span> user64_sigevent {
	<span class="enscript-type">int</span>		sigev_notify;			<span class="enscript-comment">/* Notification type */</span>
	<span class="enscript-type">int</span>		sigev_signo;			<span class="enscript-comment">/* Signal number */</span>
	<span class="enscript-type">union</span> user64_sigval sigev_value;			<span class="enscript-comment">/* Signal value */</span>
	user64_addr_t	sigev_notify_function;	  	<span class="enscript-comment">/* Notify function */</span>
	user64_addr_t 	sigev_notify_attributes;	<span class="enscript-comment">/* Notify attributes */</span>
};

<span class="enscript-type">struct</span> user32_sigevent {
	<span class="enscript-type">int</span>		sigev_notify;			<span class="enscript-comment">/* Notification type */</span>
	<span class="enscript-type">int</span>		sigev_signo;			<span class="enscript-comment">/* Signal number */</span>
	<span class="enscript-type">union</span> user32_sigval sigev_value;			<span class="enscript-comment">/* Signal value */</span>
	user32_addr_t	sigev_notify_function;	  	<span class="enscript-comment">/* Notify function */</span>
	user32_addr_t 	sigev_notify_attributes;	<span class="enscript-comment">/* Notify attributes */</span>
};

<span class="enscript-type">struct</span> user_sigevent {
	<span class="enscript-type">int</span>		sigev_notify;			<span class="enscript-comment">/* Notification type */</span>
	<span class="enscript-type">int</span>		sigev_signo;			<span class="enscript-comment">/* Signal number */</span>
	<span class="enscript-type">union</span> user_sigval sigev_value;			<span class="enscript-comment">/* Signal value */</span>
	user_addr_t	sigev_notify_function;	  	<span class="enscript-comment">/* Notify function */</span>
	user_addr_t 	sigev_notify_attributes;	<span class="enscript-comment">/* Notify attributes */</span>
};

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> __siginfo {
	<span class="enscript-type">int</span>	si_signo;		<span class="enscript-comment">/* signal number */</span>
	<span class="enscript-type">int</span>	si_errno;		<span class="enscript-comment">/* errno association */</span>
	<span class="enscript-type">int</span>	si_code;		<span class="enscript-comment">/* signal code */</span>
	pid_t	si_pid;			<span class="enscript-comment">/* sending process */</span>
	uid_t	si_uid;			<span class="enscript-comment">/* sender's ruid */</span>
	<span class="enscript-type">int</span>	si_status;		<span class="enscript-comment">/* exit value */</span>
	<span class="enscript-type">void</span>	*si_addr;		<span class="enscript-comment">/* faulting instruction */</span>
	<span class="enscript-type">union</span> sigval si_value;		<span class="enscript-comment">/* signal value */</span>
	<span class="enscript-type">long</span>	si_band;		<span class="enscript-comment">/* band event for SIGPOLL */</span>
	<span class="enscript-type">unsigned</span> <span class="enscript-type">long</span>	__pad[7];	<span class="enscript-comment">/* Reserved for Future Use */</span>
} siginfo_t;

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">BSD_KERNEL_PRIVATE</span>

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> user_siginfo {
	<span class="enscript-type">int</span>		si_signo;	<span class="enscript-comment">/* signal number */</span>
	<span class="enscript-type">int</span>		si_errno;	<span class="enscript-comment">/* errno association */</span>
	<span class="enscript-type">int</span>		si_code;	<span class="enscript-comment">/* signal code */</span>
	pid_t		si_pid;		<span class="enscript-comment">/* sending process */</span>
	uid_t		si_uid;		<span class="enscript-comment">/* sender's ruid */</span>
	<span class="enscript-type">int</span>		si_status;	<span class="enscript-comment">/* exit value */</span>
	user_addr_t	si_addr;	<span class="enscript-comment">/* faulting instruction (see below) */</span>
	<span class="enscript-type">union</span> user_sigval si_value;	<span class="enscript-comment">/* signal value */</span>
	user_long_t	si_band;	<span class="enscript-comment">/* band event for SIGPOLL */</span>
	user_ulong_t	pad[7];		<span class="enscript-comment">/* Reserved for Future Use */</span>
} user_siginfo_t;

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> user64_siginfo {
	<span class="enscript-type">int</span>		si_signo;	<span class="enscript-comment">/* signal number */</span>
	<span class="enscript-type">int</span>		si_errno;	<span class="enscript-comment">/* errno association */</span>
	<span class="enscript-type">int</span>		si_code;	<span class="enscript-comment">/* signal code */</span>
	pid_t		si_pid;		<span class="enscript-comment">/* sending process */</span>
	uid_t		si_uid;		<span class="enscript-comment">/* sender's ruid */</span>
	<span class="enscript-type">int</span>		si_status;	<span class="enscript-comment">/* exit value */</span>
	user64_addr_t	si_addr;	<span class="enscript-comment">/* faulting instruction (see below) */</span>
	<span class="enscript-type">union</span> user64_sigval si_value;	<span class="enscript-comment">/* signal value */</span>
	user64_long_t	si_band;	<span class="enscript-comment">/* band event for SIGPOLL */</span>
	user64_ulong_t	__pad[7];		<span class="enscript-comment">/* Reserved for Future Use */</span>
} user64_siginfo_t;

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> user32_siginfo {
	<span class="enscript-type">int</span>		si_signo;	<span class="enscript-comment">/* signal number */</span>
	<span class="enscript-type">int</span>		si_errno;	<span class="enscript-comment">/* errno association */</span>
	<span class="enscript-type">int</span>		si_code;	<span class="enscript-comment">/* signal code */</span>
	pid_t		si_pid;		<span class="enscript-comment">/* sending process */</span>
	uid_t		si_uid;		<span class="enscript-comment">/* sender's ruid */</span>
	<span class="enscript-type">int</span>		si_status;	<span class="enscript-comment">/* exit value */</span>
	user32_addr_t	si_addr;	<span class="enscript-comment">/* faulting instruction (see below) */</span>
	<span class="enscript-type">union</span> user32_sigval	si_value;	<span class="enscript-comment">/* signal value */</span>
	user32_long_t	si_band;	<span class="enscript-comment">/* band event for SIGPOLL */</span>
	user32_ulong_t	__pad[7];		<span class="enscript-comment">/* Reserved for Future Use */</span>
} user32_siginfo_t;

<span class="enscript-type">void</span> <span class="enscript-function-name">siginfo_user_to_user32</span>(user_siginfo_t *, user32_siginfo_t *);
<span class="enscript-type">void</span> <span class="enscript-function-name">siginfo_user_to_user64</span>(user_siginfo_t *, user64_siginfo_t *);

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>

<span class="enscript-comment">/* 
 * When the signal is SIGILL or SIGFPE, si_addr contains the address of 
 * the faulting instruction.
 * When the signal is SIGSEGV or SIGBUS, si_addr contains the address of 
 * the faulting memory reference. Although for x86 there are cases of SIGSEGV
 * for which si_addr cannot be determined and is NULL. 
 * If the signal is SIGCHLD, the si_pid field will contain the child process ID,
 *  si_status contains the exit value or signal and
 *  si_uid contains the real user ID of the process that sent the signal.
 */</span>

<span class="enscript-comment">/* Values for si_code */</span>

<span class="enscript-comment">/* Codes for SIGILL */</span>
#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">ILL_NOOP</span>	0	<span class="enscript-comment">/* if only I knew... */</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">ILL_ILLOPC</span>	1	<span class="enscript-comment">/* [XSI] illegal opcode */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">ILL_ILLTRP</span>	2	<span class="enscript-comment">/* [XSI] illegal trap */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">ILL_PRVOPC</span>	3	<span class="enscript-comment">/* [XSI] privileged opcode */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">ILL_ILLOPN</span>	4	<span class="enscript-comment">/* [XSI] illegal operand -NOTIMP */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">ILL_ILLADR</span>	5	<span class="enscript-comment">/* [XSI] illegal addressing mode -NOTIMP */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">ILL_PRVREG</span>	6	<span class="enscript-comment">/* [XSI] privileged register -NOTIMP */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">ILL_COPROC</span>	7	<span class="enscript-comment">/* [XSI] coprocessor error -NOTIMP */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">ILL_BADSTK</span>	8	<span class="enscript-comment">/* [XSI] internal stack error -NOTIMP */</span>

<span class="enscript-comment">/* Codes for SIGFPE */</span>
#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">FPE_NOOP</span>	0	<span class="enscript-comment">/* if only I knew... */</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FPE_FLTDIV</span>	1	<span class="enscript-comment">/* [XSI] floating point divide by zero */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FPE_FLTOVF</span>	2	<span class="enscript-comment">/* [XSI] floating point overflow */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FPE_FLTUND</span>	3	<span class="enscript-comment">/* [XSI] floating point underflow */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FPE_FLTRES</span>	4	<span class="enscript-comment">/* [XSI] floating point inexact result */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">FPE_FLTINV</span>	5	<span class="enscript-comment">/* [XSI] invalid floating point operation */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">FPE_FLTSUB</span>	6	<span class="enscript-comment">/* [XSI] subscript out of range -NOTIMP */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">FPE_INTDIV</span>	7	<span class="enscript-comment">/* [XSI] integer divide by zero */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">FPE_INTOVF</span>	8	<span class="enscript-comment">/* [XSI] integer overflow */</span>

<span class="enscript-comment">/* Codes for SIGSEGV */</span>
#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SEGV_NOOP</span>	0	<span class="enscript-comment">/* if only I knew... */</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SEGV_MAPERR</span>	1	<span class="enscript-comment">/* [XSI] address not mapped to object */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SEGV_ACCERR</span>	2	<span class="enscript-comment">/* [XSI] invalid permission for mapped object */</span>

<span class="enscript-comment">/* Codes for SIGBUS */</span>
#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">BUS_NOOP</span>	0	<span class="enscript-comment">/* if only I knew... */</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">BUS_ADRALN</span>	1	<span class="enscript-comment">/* [XSI] Invalid address alignment */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">BUS_ADRERR</span>	2	<span class="enscript-comment">/* [XSI] Nonexistent physical address -NOTIMP */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">BUS_OBJERR</span>	3	<span class="enscript-comment">/* [XSI] Object-specific HW error - NOTIMP */</span>

<span class="enscript-comment">/* Codes for SIGTRAP */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">TRAP_BRKPT</span>	1	<span class="enscript-comment">/* [XSI] Process breakpoint -NOTIMP */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">TRAP_TRACE</span>	2	<span class="enscript-comment">/* [XSI] Process trace trap -NOTIMP */</span>

<span class="enscript-comment">/* Codes for SIGCHLD */</span>
#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLD_NOOP</span>	0	<span class="enscript-comment">/* if only I knew... */</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLD_EXITED</span>	1	<span class="enscript-comment">/* [XSI] child has exited */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLD_KILLED</span>	2	<span class="enscript-comment">/* [XSI] terminated abnormally, no core file */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLD_DUMPED</span>	3	<span class="enscript-comment">/* [XSI] terminated abnormally, core file */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLD_TRAPPED</span>	4	<span class="enscript-comment">/* [XSI] traced child has trapped */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLD_STOPPED</span>	5	<span class="enscript-comment">/* [XSI] child has stopped */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">CLD_CONTINUED</span>	6	<span class="enscript-comment">/* [XSI] stopped child has continued */</span>

<span class="enscript-comment">/* Codes for SIGPOLL */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">POLL_IN</span>		1	<span class="enscript-comment">/* [XSR] Data input available */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">POLL_OUT</span>	2	<span class="enscript-comment">/* [XSR] Output buffers available */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">POLL_MSG</span>	3	<span class="enscript-comment">/* [XSR] Input message available */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">POLL_ERR</span>	4	<span class="enscript-comment">/* [XSR] I/O error */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">POLL_PRI</span>	5	<span class="enscript-comment">/* [XSR] High priority input available */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">POLL_HUP</span>	6	<span class="enscript-comment">/* [XSR] Device disconnected */</span>

<span class="enscript-comment">/* union for signal handlers */</span>
<span class="enscript-type">union</span> __sigaction_u {
	<span class="enscript-type">void</span>    (*__sa_handler)(<span class="enscript-type">int</span>);
	<span class="enscript-type">void</span>    (*__sa_sigaction)(<span class="enscript-type">int</span>, <span class="enscript-type">struct</span> __siginfo *,
		       <span class="enscript-type">void</span> *);
};

<span class="enscript-comment">/* Signal vector template for Kernel user boundary */</span>
<span class="enscript-type">struct</span>	__sigaction {
	<span class="enscript-type">union</span> __sigaction_u __sigaction_u;  <span class="enscript-comment">/* signal handler */</span>
	<span class="enscript-type">void</span>    (*sa_tramp)(<span class="enscript-type">void</span> *, <span class="enscript-type">int</span>, <span class="enscript-type">int</span>, siginfo_t *, <span class="enscript-type">void</span> *);
	sigset_t sa_mask;		<span class="enscript-comment">/* signal mask to apply */</span>
	<span class="enscript-type">int</span>	sa_flags;		<span class="enscript-comment">/* see signal options below */</span>
};

<span class="enscript-comment">/*
 * Signal vector &quot;template&quot; used in sigaction call.
 */</span>
<span class="enscript-type">struct</span>	sigaction {
	<span class="enscript-type">union</span> __sigaction_u __sigaction_u;  <span class="enscript-comment">/* signal handler */</span>
	sigset_t sa_mask;		<span class="enscript-comment">/* signal mask to apply */</span>
	<span class="enscript-type">int</span>	sa_flags;		<span class="enscript-comment">/* see signal options below */</span>
};

#<span class="enscript-reference">ifdef</span>	<span class="enscript-variable-name">BSD_KERNEL_PRIVATE</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;machine/types.h&gt;</span>

<span class="enscript-type">union</span> __user32_sigaction_u {
	user32_addr_t __sa_handler;
	user32_addr_t __sa_sigaction;
};

<span class="enscript-type">struct</span>	user32_sigaction {
	<span class="enscript-type">union</span> __user32_sigaction_u __sigaction_u;  <span class="enscript-comment">/* signal handler */</span>
	sigset_t sa_mask;		<span class="enscript-comment">/* signal mask to apply */</span>
	<span class="enscript-type">int</span>	sa_flags;		<span class="enscript-comment">/* see signal options below */</span>
};

<span class="enscript-type">struct</span>	__user32_sigaction {
	<span class="enscript-type">union</span> __user32_sigaction_u __sigaction_u;  <span class="enscript-comment">/* signal handler */</span>
	user32_addr_t sa_tramp;
	sigset_t sa_mask;		<span class="enscript-comment">/* signal mask to apply */</span>
	<span class="enscript-type">int</span>	sa_flags;		<span class="enscript-comment">/* see signal options below */</span>
};

<span class="enscript-type">union</span> __user64_sigaction_u {
	user64_addr_t	__sa_handler;
	user64_addr_t	__sa_sigaction;
};

<span class="enscript-type">struct</span>	user64_sigaction {
	<span class="enscript-type">union</span> __user64_sigaction_u __sigaction_u;  <span class="enscript-comment">/* signal handler */</span>
	sigset_t sa_mask;		<span class="enscript-comment">/* signal mask to apply */</span>
	<span class="enscript-type">int</span>	sa_flags;		<span class="enscript-comment">/* see signal options below */</span>
};

<span class="enscript-type">struct</span>	__user64_sigaction {
	<span class="enscript-type">union</span> __user64_sigaction_u __sigaction_u;  <span class="enscript-comment">/* signal handler */</span>
	user64_addr_t	sa_tramp;	<span class="enscript-comment">/* signal mask to apply */</span>
	sigset_t sa_mask;		<span class="enscript-comment">/* signal mask to apply */</span>
	<span class="enscript-type">int</span>	sa_flags;		<span class="enscript-comment">/* see signal options below */</span>
};

<span class="enscript-type">union</span> __kern_sigaction_u {
	user_addr_t	__sa_handler;
	user_addr_t	__sa_sigaction;
};

<span class="enscript-type">struct</span>	kern_sigaction {
	<span class="enscript-type">union</span> __kern_sigaction_u __sigaction_u;  <span class="enscript-comment">/* signal handler */</span>
	sigset_t sa_mask;		<span class="enscript-comment">/* signal mask to apply */</span>
	<span class="enscript-type">int</span>	sa_flags;		<span class="enscript-comment">/* see signal options below */</span>
};

<span class="enscript-type">struct</span>	__kern_sigaction {
	<span class="enscript-type">union</span> __kern_sigaction_u __sigaction_u;  <span class="enscript-comment">/* signal handler */</span>
	user_addr_t	sa_tramp;	<span class="enscript-comment">/* signal mask to apply */</span>
	sigset_t sa_mask;		<span class="enscript-comment">/* signal mask to apply */</span>
	<span class="enscript-type">int</span>	sa_flags;		<span class="enscript-comment">/* see signal options below */</span>
};

#<span class="enscript-reference">undef</span> <span class="enscript-variable-name">SIG_DFL</span>
#<span class="enscript-reference">undef</span> <span class="enscript-variable-name">SIG_IGN</span>
#<span class="enscript-reference">undef</span> <span class="enscript-variable-name">SIG_ERR</span>
#<span class="enscript-reference">define</span>  <span class="enscript-variable-name">SIG_DFL</span>	((user_addr_t)0LL)
#<span class="enscript-reference">define</span>  <span class="enscript-variable-name">SIG_IGN</span>	((user_addr_t)1LL)
#<span class="enscript-reference">define</span>  <span class="enscript-variable-name">SIG_ERR</span>	((user_addr_t)-1LL)

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>


<span class="enscript-comment">/* if SA_SIGINFO is set, sa_sigaction is to be used instead of sa_handler. */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">sa_handler</span>	__sigaction_u.__sa_handler
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">sa_sigaction</span>	__sigaction_u.__sa_sigaction

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SA_ONSTACK</span>	0x0001	<span class="enscript-comment">/* take signal on signal stack */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SA_RESTART</span>	0x0002	<span class="enscript-comment">/* restart system on signal return */</span>
#<span class="enscript-reference">ifdef</span>	<span class="enscript-variable-name">BSD_KERNEL_PRIVATE</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SA_DISABLE</span>	0x0004	<span class="enscript-comment">/* disable taking signals on alternate stack - for user_sigaltstack.ss_flags only */</span>
#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SA_RESETHAND</span>	0x0004	<span class="enscript-comment">/* reset to SIG_DFL when taking signal */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SA_NOCLDSTOP</span>	0x0008	<span class="enscript-comment">/* do not generate SIGCHLD on child stop */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SA_NODEFER</span>	0x0010	<span class="enscript-comment">/* don't mask the signal we're delivering */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SA_NOCLDWAIT</span>	0x0020	<span class="enscript-comment">/* don't keep zombies around */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SA_SIGINFO</span>	0x0040	<span class="enscript-comment">/* signal handler with SA_SIGINFO args */</span>
#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SA_USERTRAMP</span>	0x0100	<span class="enscript-comment">/* do not bounce off kernel's sigtramp */</span>
<span class="enscript-comment">/* This will provide 64bit register set in a 32bit user address space */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SA_64REGSET</span>	0x0200	<span class="enscript-comment">/* signal handler with SA_SIGINFO args with 64bit regs information */</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */</span>

<span class="enscript-comment">/* the following are the only bits we support from user space, the 
 * rest are for kernel use only.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SA_USERSPACE_MASK</span> (SA_ONSTACK | SA_RESTART | SA_RESETHAND | SA_NOCLDSTOP | SA_NODEFER | SA_NOCLDWAIT | SA_SIGINFO)

<span class="enscript-comment">/*
 * Flags for sigprocmask:
 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_BLOCK</span>	1	<span class="enscript-comment">/* block specified signal set */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_UNBLOCK</span>	2	<span class="enscript-comment">/* unblock specified signal set */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIG_SETMASK</span>	3	<span class="enscript-comment">/* set specified signal set */</span>

<span class="enscript-comment">/* POSIX 1003.1b required values. */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SI_USER</span>		0x10001	<span class="enscript-comment">/* [CX] signal from kill() */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SI_QUEUE</span>	0x10002	<span class="enscript-comment">/* [CX] signal from sigqueue() */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SI_TIMER</span>	0x10003	<span class="enscript-comment">/* [CX] timer expiration */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SI_ASYNCIO</span>	0x10004	<span class="enscript-comment">/* [CX] aio request completion */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SI_MESGQ</span>	0x10005	<span class="enscript-comment">/* [CX]	from message arrival on empty queue */</span>

#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>)
<span class="enscript-type">typedef</span>	<span class="enscript-type">void</span> (*sig_t)(<span class="enscript-type">int</span>);	<span class="enscript-comment">/* type of signal function */</span>
#<span class="enscript-reference">endif</span>

<span class="enscript-comment">/*
 * Structure used in sigaltstack call.
 */</span>
#<span class="enscript-reference">ifdef</span>	<span class="enscript-variable-name">BSD_KERNEL_PRIVATE</span>

<span class="enscript-type">struct</span>  user32_sigaltstack {
	user32_addr_t	ss_sp;		<span class="enscript-comment">/* signal stack base */</span>
	user32_size_t	ss_size;	<span class="enscript-comment">/* signal stack length */</span>
	<span class="enscript-type">int</span>	 	    ss_flags;	<span class="enscript-comment">/* SA_DISABLE and/or SA_ONSTACK */</span>
};

<span class="enscript-type">struct</span>  user64_sigaltstack {
	user64_addr_t	ss_sp;		<span class="enscript-comment">/* signal stack base */</span>
	user64_size_t	ss_size;	<span class="enscript-comment">/* signal stack length */</span>
	<span class="enscript-type">int</span>		ss_flags;	<span class="enscript-comment">/* SA_DISABLE and/or SA_ONSTACK */</span>
};

<span class="enscript-type">struct</span>  kern_sigaltstack {
	user_addr_t	ss_sp;		<span class="enscript-comment">/* signal stack base */</span>
	user_size_t	ss_size;	<span class="enscript-comment">/* signal stack length */</span>
	<span class="enscript-type">int</span>		ss_flags;	<span class="enscript-comment">/* SA_DISABLE and/or SA_ONSTACK */</span>
};

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SS_ONSTACK</span>	0x0001	<span class="enscript-comment">/* take signal on signal stack */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SS_DISABLE</span>	0x0004	<span class="enscript-comment">/* disable taking signals on alternate stack */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">MINSIGSTKSZ</span>	32768	<span class="enscript-comment">/* (32K)minimum allowable stack */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">SIGSTKSZ</span>	131072	<span class="enscript-comment">/* (128K)recommended stack size */</span>

#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>)
<span class="enscript-comment">/*
 * 4.3 compatibility:
 * Signal vector &quot;template&quot; used in sigvec call.
 */</span>
<span class="enscript-type">struct</span>	sigvec {
	<span class="enscript-type">void</span>	(*sv_handler)(<span class="enscript-type">int</span>);	<span class="enscript-comment">/* signal handler */</span>
	<span class="enscript-type">int</span>	sv_mask;		<span class="enscript-comment">/* signal mask to apply */</span>
	<span class="enscript-type">int</span>	sv_flags;		<span class="enscript-comment">/* see signal options below */</span>
};

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SV_ONSTACK</span>	SA_ONSTACK
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SV_INTERRUPT</span>	SA_RESTART	<span class="enscript-comment">/* same bit, opposite sense */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SV_RESETHAND</span>	SA_RESETHAND
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SV_NODEFER</span>	SA_NODEFER
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SV_NOCLDSTOP</span>	SA_NOCLDSTOP
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SV_SIGINFO</span>	SA_SIGINFO

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">sv_onstack</span> sv_flags	<span class="enscript-comment">/* isn't compatibility wonderful! */</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */</span>

<span class="enscript-comment">/*
 * Structure used in sigstack call.
 */</span>
<span class="enscript-type">struct</span>	sigstack {
	<span class="enscript-type">char</span>	*ss_sp;			<span class="enscript-comment">/* signal stack pointer */</span>
	<span class="enscript-type">int</span>	ss_onstack;		<span class="enscript-comment">/* current status */</span>
};

#<span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_POSIX_C_SOURCE</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_DARWIN_C_SOURCE</span>)
<span class="enscript-comment">/*
 * Macro for converting signal number to a mask suitable for
 * sigblock().
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-function-name">sigmask</span>(m)	(1 &lt;&lt; ((m)-1))

#<span class="enscript-reference">ifdef</span>	<span class="enscript-variable-name">KERNEL_PRIVATE</span>
<span class="enscript-comment">/*
 *	signals delivered on a per-thread basis.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">threadmask</span> (sigmask(SIGILL)|sigmask(SIGTRAP)|\
		    sigmask(SIGIOT)|sigmask(SIGEMT)|\
		    sigmask(SIGFPE)|sigmask(SIGBUS)|\
		    sigmask(SIGSEGV)|sigmask(SIGSYS)|\
		    sigmask(SIGPIPE)|sigmask(SIGKILL))

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">workq_threadmask</span> (threadmask | sigcantmask)

<span class="enscript-comment">/*
 * Signals carried across exec.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">execmask</span>   (sigmask(SIGHUP)|sigmask(SIGINT)|\
		    sigmask(SIGQUIT)|sigmask(SIGKILL)|\
		    sigmask(SIGTERM)|sigmask(SIGSTOP)|\
		    sigmask(SIGTSTP)|sigmask(SIGCONT)|\
		    sigmask(SIGTTIN)|sigmask(SIGTTOU)|\
		    sigmask(SIGUSR1)|sigmask(SIGUSR2))

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* KERNEL_PRIVATE */</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">BADSIG</span>		SIG_ERR

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */</span>
#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* !_ANSI_SOURCE */</span>

<span class="enscript-comment">/*
 * For historical reasons; programs expect signal's return value to be
 * defined by &lt;sys/signal.h&gt;.
 */</span>
__BEGIN_DECLS
<span class="enscript-function-name">void</span>	(*signal(<span class="enscript-type">int</span>, <span class="enscript-type">void</span> (*)(<span class="enscript-type">int</span>)))(<span class="enscript-type">int</span>);
__END_DECLS
#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* !_SYS_SIGNAL_H_ */</span>
</pre>
<hr />
</body></html>