<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>pktsched_rmclass.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">pktsched_rmclass.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2011 Apple Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 *
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 *
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 *
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>

<span class="enscript-comment">/* $OpenBSD: altq_rmclass.h,v 1.10 2007/06/17 19:58:58 jasper Exp $	*/</span>
<span class="enscript-comment">/* $KAME: altq_rmclass.h,v 1.6 2000/12/09 09:22:44 kjc Exp $	*/</span>

<span class="enscript-comment">/*
 * Copyright (c) 1991-1997 Regents of the University of California.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the Network Research
 *	Group at Lawrence Berkeley Laboratory.
 * 4. Neither the name of the University nor of the Laboratory may be used
 *    to endorse or promote products derived from this software without
 *    specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_NET_PKTSCHED_PKTSCHED_RMCLASS_H_</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">_NET_PKTSCHED_PKTSCHED_RMCLASS_H_</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">PRIVATE</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;net/classq/classq.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;net/pktsched/pktsched.h&gt;</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__cplusplus</span>
<span class="enscript-type">extern</span> <span class="enscript-string">&quot;C&quot;</span> {
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RM_MAXPRIO</span>	8	<span class="enscript-comment">/* Max priority */</span>

<span class="enscript-comment">/* flags for rmc_init and rmc_newclass */</span>
<span class="enscript-comment">/* class flags */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_RED</span>		0x0001	<span class="enscript-comment">/* use RED */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_ECN</span>		0x0002	<span class="enscript-comment">/* use ECN with RED/BLUE/SFB */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_RIO</span>		0x0004	<span class="enscript-comment">/* use RIO */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_FLOWVALVE</span>		0x0008	<span class="enscript-comment">/* use flowvalve (aka penalty-box) */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_CLEARDSCP</span>		0x0010  <span class="enscript-comment">/* clear diffserv codepoint */</span>

<span class="enscript-comment">/* flags for rmc_init */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_WRR</span>		0x0100
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_EFFICIENT</span>		0x0200

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_BLUE</span>		0x10000	<span class="enscript-comment">/* use BLUE */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_SFB</span>		0x20000	<span class="enscript-comment">/* use SFB */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_FLOWCTL</span>		0x40000	<span class="enscript-comment">/* enable flow control advisories */</span>
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">BSD_KERNEL_PRIVATE</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RMCF_LAZY</span>		0x10000000 <span class="enscript-comment">/* on-demand resource allocation */</span>

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> rm_ifdat		rm_ifdat_t;
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> rm_class		rm_class_t;

<span class="enscript-type">struct</span> red;
<span class="enscript-type">struct</span> rio;
<span class="enscript-type">struct</span> blue;
<span class="enscript-type">struct</span> sfb;

<span class="enscript-comment">/*
 * Macros for dealing with time values.  We assume all times are
 * 'timevals'.  `microuptime' is used to get the best available clock
 * resolution.  If `microuptime' *doesn't* return a value that's about
 * ten times smaller than the average packet time on the fastest
 * link that will use these routines, a slightly different clock
 * scheme than this one should be used.
 * (Bias due to truncation error in this scheme will overestimate utilization
 * and discriminate against high bandwidth classes.  To remove this bias an
 * integrator needs to be added.  The simplest integrator uses a history of
 * 10 * avg.packet.time / min.tick.time packet completion entries.  This is
 * straight forward to add but we don't want to pay the extra memory
 * traffic to maintain it if it's not necessary (occasionally a vendor
 * accidentally builds a workstation with a decent clock - e.g., Sun &amp; HP).)
 */</span>

#<span class="enscript-reference">define</span>	<span class="enscript-function-name">RM_GETTIME</span>(now) microuptime(&amp;now)

#<span class="enscript-reference">define</span>	<span class="enscript-function-name">TV_LT</span>(a, b) (((a)-&gt;tv_sec &lt; (b)-&gt;tv_sec) ||  \
	(((a)-&gt;tv_usec &lt; (b)-&gt;tv_usec) &amp;&amp; ((a)-&gt;tv_sec &lt;= (b)-&gt;tv_sec)))

#<span class="enscript-reference">define</span>	<span class="enscript-function-name">TV_DELTA</span>(a, b, delta) {						\
	<span class="enscript-type">int</span>	xxs;							\
									\
	delta = (a)-&gt;tv_usec - (b)-&gt;tv_usec;				\
	<span class="enscript-keyword">if</span> ((xxs = (a)-&gt;tv_sec - (b)-&gt;tv_sec)) {			\
		<span class="enscript-keyword">switch</span> (xxs) {						\
		<span class="enscript-reference">default</span>:						\
			<span class="enscript-comment">/*						\
			 * if (xxs &lt; 0)					\
			 *	printf(&quot;rm_class: bogus time values\n&quot;); \
			 */</span>						\
			delta = 0;					\
			<span class="enscript-comment">/* fall through */</span>				\
		<span class="enscript-keyword">case</span> <span class="enscript-reference">2</span>:							\
			delta += 1000000;				\
			<span class="enscript-comment">/* fall through */</span>				\
		<span class="enscript-keyword">case</span> <span class="enscript-reference">1</span>:							\
			delta += 1000000;				\
			<span class="enscript-keyword">break</span>;						\
		}							\
	}								\
}

#<span class="enscript-reference">define</span>	<span class="enscript-function-name">TV_ADD_DELTA</span>(a, delta, res) {					\
	<span class="enscript-type">int</span> xxus = (a)-&gt;tv_usec + (delta);				\
									\
	(res)-&gt;tv_sec = (a)-&gt;tv_sec;					\
	<span class="enscript-keyword">while</span> (xxus &gt;= 1000000) {					\
		++((res)-&gt;tv_sec);					\
		xxus -= 1000000;					\
	}								\
	(res)-&gt;tv_usec = xxus;						\
}

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RM_TIMEOUT</span>	2	<span class="enscript-comment">/* 1 Clock tick. */</span>

#<span class="enscript-reference">if</span> 1
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RM_MAXQUEUED</span>	1	<span class="enscript-comment">/* this isn't used in ALTQ/CBQ */</span>
#<span class="enscript-reference">else</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RM_MAXQUEUED</span>	16	<span class="enscript-comment">/* Max number of packets downstream of CBQ */</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RM_MAXQUEUE</span>	64	<span class="enscript-comment">/* Max queue length */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RM_FILTER_GAIN</span>	5	<span class="enscript-comment">/* log2 of gain, e.g., 5 =&gt; 31/32 */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RM_POWER</span>	(1 &lt;&lt; RM_FILTER_GAIN)
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RM_MAXDEPTH</span>	32
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">RM_NS_PER_SEC</span>	(1000000000)

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> _rm_class_stats_ {
	u_int32_t	handle;
	u_int32_t	depth;

	<span class="enscript-type">struct</span> pktcntr	xmit_cnt;	<span class="enscript-comment">/* packets sent in this class */</span>
	<span class="enscript-type">struct</span> pktcntr	drop_cnt;	<span class="enscript-comment">/* dropped packets */</span>
	u_int32_t	over;		<span class="enscript-comment">/* # times went over limit */</span>
	u_int32_t	borrows;	<span class="enscript-comment">/* # times tried to borrow */</span>
	u_int32_t	overactions;	<span class="enscript-comment">/* # times invoked overlimit action */</span>
	u_int32_t	delays;		<span class="enscript-comment">/* # times invoked delay actions */</span>
} rm_class_stats_t;

<span class="enscript-comment">/*
 * CBQ Class state structure
 */</span>
<span class="enscript-type">struct</span> rm_class {
	class_queue_t	q_;		<span class="enscript-comment">/* Queue of packets */</span>
	rm_ifdat_t	*ifdat_;
	<span class="enscript-type">int</span>		pri_;		<span class="enscript-comment">/* Class priority. */</span>
	<span class="enscript-type">int</span>		depth_;		<span class="enscript-comment">/* Class depth */</span>
	u_int32_t	ns_per_byte_;	<span class="enscript-comment">/* NanoSeconds per byte. */</span>
	u_int32_t	maxrate_;	<span class="enscript-comment">/* Bytes per second for this class. */</span>
	u_int32_t	allotment_;	<span class="enscript-comment">/* Fraction of link bandwidth. */</span>
	u_int32_t	w_allotment_;	<span class="enscript-comment">/* Weighted allotment for WRR */</span>
	<span class="enscript-type">int</span>		bytes_alloc_;	<span class="enscript-comment">/* Allocation for round of WRR */</span>

	<span class="enscript-type">int</span>		avgidle_;
	<span class="enscript-type">int</span>		maxidle_;
	<span class="enscript-type">int</span>		minidle_;
	<span class="enscript-type">int</span>		offtime_;
	<span class="enscript-type">int</span>		sleeping_;	<span class="enscript-comment">/* != 0 if delaying */</span>
	u_int32_t	qthresh_;	<span class="enscript-comment">/* Threshold for formal link sharing */</span>
	<span class="enscript-type">int</span>		leaf_;		<span class="enscript-comment">/* Note whether leaf class or not */</span>

	rm_class_t	*children_;	<span class="enscript-comment">/* Children of this class */</span>
	rm_class_t	*next_;		<span class="enscript-comment">/* Next pointer, used if child */</span>

	rm_class_t	*peer_;		<span class="enscript-comment">/* Peer class */</span>
	rm_class_t	*borrow_;	<span class="enscript-comment">/* Borrow class */</span>
	rm_class_t	*parent_;	<span class="enscript-comment">/* Parent class */</span>

	<span class="enscript-type">void</span>	(*overlimit)(<span class="enscript-type">struct</span> rm_class *, <span class="enscript-type">struct</span> rm_class *);
	<span class="enscript-type">void</span>	(*drop)(<span class="enscript-type">struct</span> rm_class *); <span class="enscript-comment">/* Class drop action. */</span>

	<span class="enscript-type">union</span> {
		<span class="enscript-type">void</span>		*ptr;
		<span class="enscript-type">struct</span> red	*red;	<span class="enscript-comment">/* RED state */</span>
		<span class="enscript-type">struct</span> rio	*rio;	<span class="enscript-comment">/* RIO state */</span>
		<span class="enscript-type">struct</span> blue	*blue;	<span class="enscript-comment">/* BLUE state */</span>
		<span class="enscript-type">struct</span> sfb	*sfb;	<span class="enscript-comment">/* SFB state */</span>
	} qalg_;
	<span class="enscript-type">int</span>		flags_;
	u_int32_t	qflags_;

	<span class="enscript-type">int</span>		last_pkttime_;	<span class="enscript-comment">/* saved pkt_time */</span>
	<span class="enscript-type">struct</span> timeval	undertime_;	<span class="enscript-comment">/* time can next send */</span>
	<span class="enscript-type">struct</span> timeval	last_;		<span class="enscript-comment">/* time last packet sent */</span>
	<span class="enscript-type">struct</span> timeval	overtime_;
	<span class="enscript-type">struct</span> callout	callout_;	<span class="enscript-comment">/* for timeout() calls */</span>

	rm_class_stats_t stats_;	<span class="enscript-comment">/* Class Statistics */</span>
};

#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">red_</span>	qalg_.red
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">rio_</span>	qalg_.rio
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">blue_</span>	qalg_.blue
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">sfb_</span>	qalg_.sfb

<span class="enscript-comment">/*
 * CBQ Interface state
 */</span>
<span class="enscript-type">struct</span> rm_ifdat {
	<span class="enscript-type">int</span>		queued_;	<span class="enscript-comment">/* # pkts queued downstream */</span>
	<span class="enscript-type">int</span>		efficient_;	<span class="enscript-comment">/* Link Efficency bit */</span>
	<span class="enscript-type">int</span>		wrr_;		<span class="enscript-comment">/* Enable Weighted Round-Robin */</span>
	u_long		ns_per_byte_;	<span class="enscript-comment">/* Link byte speed. */</span>
	<span class="enscript-type">int</span>		maxqueued_;	<span class="enscript-comment">/* Max packets to queue */</span>
	<span class="enscript-type">int</span>		maxpkt_;	<span class="enscript-comment">/* Max packet size. */</span>
	<span class="enscript-type">int</span>		qi_;		<span class="enscript-comment">/* In/out pointers for downstream */</span>
	<span class="enscript-type">int</span>		qo_;		<span class="enscript-comment">/* packets */</span>

	<span class="enscript-comment">/*
	 * Active class state and WRR state.
	 */</span>
	rm_class_t	*active_[RM_MAXPRIO];	<span class="enscript-comment">/* Active cl's in each pri */</span>
	<span class="enscript-type">int</span>		na_[RM_MAXPRIO];	<span class="enscript-comment">/* # of active cl's in a pri */</span>
	<span class="enscript-type">int</span>		num_[RM_MAXPRIO];	<span class="enscript-comment">/* # of cl's per pri */</span>
	<span class="enscript-type">int</span>		alloc_[RM_MAXPRIO];	<span class="enscript-comment">/* Byte Allocation */</span>
	u_long		M_[RM_MAXPRIO];		<span class="enscript-comment">/* WRR weights. */</span>

	<span class="enscript-comment">/*
	 * Network Interface/Solaris Queue state pointer.
	 */</span>
	<span class="enscript-type">struct</span> ifclassq	*ifq_;
	rm_class_t	*default_;	<span class="enscript-comment">/* Default Pkt class, BE */</span>
	rm_class_t	*root_;		<span class="enscript-comment">/* Root Link class. */</span>
	rm_class_t	*ctl_;		<span class="enscript-comment">/* Control Traffic class. */</span>
	<span class="enscript-type">void</span>		(*restart)(<span class="enscript-type">struct</span> ifclassq *);	<span class="enscript-comment">/* Restart routine. */</span>

	<span class="enscript-comment">/*
	 * Current packet downstream packet state and dynamic state.
	 */</span>
	rm_class_t	*borrowed_[RM_MAXQUEUED]; <span class="enscript-comment">/* Class borrowed last */</span>
	rm_class_t	*class_[RM_MAXQUEUED];	<span class="enscript-comment">/* class sending */</span>
	<span class="enscript-type">int</span>		curlen_[RM_MAXQUEUED];	<span class="enscript-comment">/* Current pktlen */</span>
	<span class="enscript-type">struct</span> timeval	now_[RM_MAXQUEUED];	<span class="enscript-comment">/* Current packet time */</span>
	<span class="enscript-type">int</span>		is_overlimit_[RM_MAXQUEUED]; <span class="enscript-comment">/* Current packet time */</span>

	<span class="enscript-type">int</span>		cutoff_;	<span class="enscript-comment">/* Cut-off depth for borrowing */</span>

	<span class="enscript-type">struct</span> timeval	ifnow_;		<span class="enscript-comment">/* expected xmit completion time */</span>
#<span class="enscript-reference">if</span> 1 <span class="enscript-comment">/* ALTQ4PPP */</span>
	<span class="enscript-type">int</span>		maxiftime_;	<span class="enscript-comment">/* max delay inside interface */</span>
#<span class="enscript-reference">endif</span>
	rm_class_t	*pollcache_;	<span class="enscript-comment">/* cached rm_class by poll operation */</span>
};

#<span class="enscript-reference">define</span>	<span class="enscript-function-name">RMC_IS_A_PARENT_CLASS</span>(cl)	((cl)-&gt;children_ != NULL)

<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">rmclass_init</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> rm_class_t *<span class="enscript-function-name">rmc_newclass</span>(<span class="enscript-type">int</span>, <span class="enscript-type">struct</span> rm_ifdat *, u_int32_t,
    <span class="enscript-type">void</span> (*)(<span class="enscript-type">struct</span> rm_class *, <span class="enscript-type">struct</span> rm_class *), u_int32_t,
    u_int32_t, <span class="enscript-type">struct</span> rm_class *, <span class="enscript-type">struct</span> rm_class *,
    u_int32_t, <span class="enscript-type">int</span>, u_int32_t, <span class="enscript-type">int</span>, <span class="enscript-type">int</span>);
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">rmc_delete_class</span>(<span class="enscript-type">struct</span> rm_ifdat *, <span class="enscript-type">struct</span> rm_class *);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">rmc_modclass</span>(<span class="enscript-type">struct</span> rm_class *, u_int32_t, <span class="enscript-type">int</span>, u_int32_t,
    <span class="enscript-type">int</span>, u_int32_t, <span class="enscript-type">int</span>);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">rmc_init</span>(<span class="enscript-type">struct</span> ifclassq *, <span class="enscript-type">struct</span> rm_ifdat *, u_int32_t,
    <span class="enscript-type">void</span> (*)(<span class="enscript-type">struct</span> ifclassq *), u_int32_t, <span class="enscript-type">int</span>, <span class="enscript-type">int</span>, u_int32_t,
    <span class="enscript-type">int</span>, u_int32_t, <span class="enscript-type">int</span>);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">rmc_queue_packet</span>(<span class="enscript-type">struct</span> rm_class *, <span class="enscript-type">struct</span> mbuf *, <span class="enscript-type">struct</span> pf_mtag *);
<span class="enscript-type">extern</span> <span class="enscript-type">struct</span> mbuf *<span class="enscript-function-name">rmc_dequeue_next</span>(<span class="enscript-type">struct</span> rm_ifdat *, cqdq_op_t);
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">rmc_update_class_util</span>(<span class="enscript-type">struct</span> rm_ifdat *);
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">rmc_delay_action</span>(<span class="enscript-type">struct</span> rm_class *, <span class="enscript-type">struct</span> rm_class *);
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">rmc_drop</span>(<span class="enscript-type">struct</span> rm_class *, u_int32_t, u_int32_t *, u_int32_t *);
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">rmc_dropall</span>(<span class="enscript-type">struct</span> rm_class *);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">rmc_get_weight</span>(<span class="enscript-type">struct</span> rm_ifdat *, <span class="enscript-type">int</span>);
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">rmc_updateq</span>(<span class="enscript-type">struct</span> rm_class *, cqev_t);

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* BSD_KERNEL_PRIVATE */</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__cplusplus</span>
}
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* PRIVATE */</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* _NET_PKTSCHED_PKTSCHED_RMCLASS_H_ */</span>
</pre>
<hr />
</body></html>