<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>zutil.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">zutil.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2008 Apple Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>
<span class="enscript-comment">/* zutil.h -- internal interface and configuration of the compression library
 * Copyright (C) 1995-2005 Jean-loup Gailly.
 * For conditions of distribution and use, see copyright notice in zlib.h
 */</span>

<span class="enscript-comment">/* WARNING: this file should *not* be used by applications. It is
   part of the implementation of the compression library and is
   subject to change. Applications should only use zlib.h.
 */</span>

<span class="enscript-comment">/* @(#) $Id$ */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">ZUTIL_H</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ZUTIL_H</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">ZLIB_INTERNAL</span>

#<span class="enscript-reference">if</span> <span class="enscript-variable-name">KERNEL</span>
#  <span class="enscript-reference">include</span> <span class="enscript-string">&lt;libkern/zlib.h&gt;</span>
#  <span class="enscript-reference">include</span> <span class="enscript-string">&lt;string.h&gt;</span>
#  <span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">NO_ERRNO_H</span>
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">NO_ERRNO_H</span> 1
#  <span class="enscript-reference">endif</span>
#  <span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">NO_ZCFUNCS</span>
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">NO_ZCFUNCS</span> 1
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">else</span>
#  <span class="enscript-reference">include</span> <span class="enscript-string">&quot;zlib.h&quot;</span>
#  <span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">STDC</span>
#    <span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_WIN32_WCE</span>
#      <span class="enscript-reference">include</span> <span class="enscript-string">&lt;stddef.h&gt;</span>
#    <span class="enscript-reference">endif</span>
#    <span class="enscript-reference">include</span> <span class="enscript-string">&lt;string.h&gt;</span>
#    <span class="enscript-reference">include</span> <span class="enscript-string">&lt;stdlib.h&gt;</span>
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL */</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">NO_ERRNO_H</span>
#   <span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">_WIN32_WCE</span>
      <span class="enscript-comment">/* The Microsoft C Run-Time Library for Windows CE doesn't have
       * errno.  We define it as a global variable to simplify porting.
       * Its value is always 0 and should not be used.  We rename it to
       * avoid conflict with other libraries that use the same workaround.
       */</span>
#     <span class="enscript-reference">define</span> <span class="enscript-variable-name">errno</span> z_errno
#   <span class="enscript-reference">endif</span>
    <span class="enscript-type">extern</span> <span class="enscript-type">int</span> errno;
#<span class="enscript-reference">else</span>
#  <span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_WIN32_WCE</span>
#    <span class="enscript-reference">include</span> <span class="enscript-string">&lt;errno.h&gt;</span>
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">local</span>
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">local</span> static
#<span class="enscript-reference">endif</span>
<span class="enscript-comment">/* compile with -Dlocal if your debugger can't find static symbols */</span>

<span class="enscript-type">typedef</span> <span class="enscript-type">unsigned</span> <span class="enscript-type">char</span>  uch;
<span class="enscript-type">typedef</span> uch FAR uchf;
<span class="enscript-type">typedef</span> <span class="enscript-type">unsigned</span> <span class="enscript-type">short</span> ush;
<span class="enscript-type">typedef</span> ush FAR ushf;
<span class="enscript-type">typedef</span> <span class="enscript-type">unsigned</span> <span class="enscript-type">long</span>  ulg;

<span class="enscript-type">extern</span> <span class="enscript-type">const</span> <span class="enscript-type">char</span> * <span class="enscript-type">const</span> z_errmsg[10]; <span class="enscript-comment">/* indexed by 2-zlib_error */</span>
<span class="enscript-comment">/* (size given to avoid silly warnings with Visual C++) */</span>

#<span class="enscript-reference">define</span> <span class="enscript-function-name">ERR_MSG</span>(err) z_errmsg[Z_NEED_DICT-(err)]

#<span class="enscript-reference">define</span> <span class="enscript-function-name">ERR_RETURN</span>(strm,err) \
  <span class="enscript-keyword">return</span> (strm-&gt;msg = (<span class="enscript-type">char</span>*)ERR_MSG(err), (err))
<span class="enscript-comment">/* To be used only when the state is known to be valid */</span>

        <span class="enscript-comment">/* common constants */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">DEF_WBITS</span>
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">DEF_WBITS</span> MAX_WBITS
#<span class="enscript-reference">endif</span>
<span class="enscript-comment">/* default windowBits for decompression. MAX_WBITS is for compression only */</span>

#<span class="enscript-reference">if</span> <span class="enscript-variable-name">MAX_MEM_LEVEL</span> &gt;= 8
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">DEF_MEM_LEVEL</span> 8
#<span class="enscript-reference">else</span>
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">DEF_MEM_LEVEL</span>  MAX_MEM_LEVEL
#<span class="enscript-reference">endif</span>
<span class="enscript-comment">/* default memLevel */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">STORED_BLOCK</span> 0
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">STATIC_TREES</span> 1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">DYN_TREES</span>    2
<span class="enscript-comment">/* The three kinds of block type */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MIN_MATCH</span>  3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">MAX_MATCH</span>  258
<span class="enscript-comment">/* The minimum and maximum match lengths */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PRESET_DICT</span> 0x20 <span class="enscript-comment">/* preset dictionary flag in zlib header */</span>

        <span class="enscript-comment">/* target dependencies */</span>

#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">MSDOS</span>) || (<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">WINDOWS</span>) &amp;&amp; !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">WIN32</span>))
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">OS_CODE</span>  0x00
#  <span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__TURBOC__</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__BORLANDC__</span>)
#    <span class="enscript-reference">if(__STDC__</span> == 1) &amp;&amp; (<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__LARGE__</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__COMPACT__</span>))
       <span class="enscript-comment">/* Allow compilation with ANSI keywords only enabled */</span>
       <span class="enscript-type">void</span> _Cdecl farfree( <span class="enscript-type">void</span> *block );
       <span class="enscript-type">void</span> *_Cdecl farmalloc( <span class="enscript-type">unsigned</span> <span class="enscript-type">long</span> nbytes );
#    <span class="enscript-reference">else</span>
#      <span class="enscript-reference">include</span> <span class="enscript-string">&lt;alloc.h&gt;</span>
#    <span class="enscript-reference">endif</span>
#  <span class="enscript-reference">else</span> <span class="enscript-comment">/* MSC or DJGPP */</span>
#    <span class="enscript-reference">include</span> <span class="enscript-string">&lt;malloc.h&gt;</span>
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">AMIGA</span>
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">OS_CODE</span>  0x01
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">VAXC</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">VMS</span>)
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">OS_CODE</span>  0x02
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">F_OPEN</span>(name, mode) \
     fopen((name), (mode), <span class="enscript-string">&quot;mbc=60&quot;</span>, <span class="enscript-string">&quot;ctx=stm&quot;</span>, <span class="enscript-string">&quot;rfm=fix&quot;</span>, <span class="enscript-string">&quot;mrs=512&quot;</span>)
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">ATARI</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">atarist</span>)
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">OS_CODE</span>  0x05
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">OS2</span>
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">OS_CODE</span>  0x06
#  <span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">M_I86</span>
     #include &lt;malloc.h&gt;
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">MACOS</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">TARGET_OS_MAC</span>)
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">OS_CODE</span>  0x07
#  <span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__MWERKS__</span>) &amp;&amp; <span class="enscript-variable-name">__dest_os</span> != <span class="enscript-variable-name">__be_os</span> &amp;&amp; <span class="enscript-variable-name">__dest_os</span> != <span class="enscript-variable-name">__win32_os</span>
#    <span class="enscript-reference">include</span> <span class="enscript-string">&lt;unix.h&gt;</span> <span class="enscript-comment">/* for fdopen */</span>
#  <span class="enscript-reference">else</span>
#    <span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">fdopen</span>
#      <span class="enscript-reference">define</span> <span class="enscript-function-name">fdopen</span>(fd,mode) NULL <span class="enscript-comment">/* No fdopen() */</span>
#    <span class="enscript-reference">endif</span>
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">TOPS20</span>
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">OS_CODE</span>  0x0a
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">WIN32</span>
#  <span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">__CYGWIN__</span>  <span class="enscript-comment">/* Cygwin is Unix, not Win32 */</span>
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">OS_CODE</span>  0x0b
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__50SERIES</span> <span class="enscript-comment">/* Prime/PRIMOS */</span>
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">OS_CODE</span>  0x0f
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_BEOS_</span>) || <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">RISCOS</span>)
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">fdopen</span>(fd,mode) NULL <span class="enscript-comment">/* No fdopen() */</span>
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">if</span> <span class="enscript-variable-name">KERNEL</span>
    <span class="enscript-type">typedef</span> <span class="enscript-type">long</span> ptrdiff_t;
#<span class="enscript-reference">elif</span> (<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_MSC_VER</span>) &amp;&amp; (<span class="enscript-variable-name">_MSC_VER</span> &gt; 600))
#  <span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_WIN32_WCE</span>)
#    <span class="enscript-reference">define</span> <span class="enscript-function-name">fdopen</span>(fd,mode) NULL <span class="enscript-comment">/* No fdopen() */</span>
#    <span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_PTRDIFF_T_DEFINED</span>
       <span class="enscript-type">typedef</span> <span class="enscript-type">int</span> ptrdiff_t;
#      <span class="enscript-reference">define</span> <span class="enscript-variable-name">_PTRDIFF_T_DEFINED</span>
#    <span class="enscript-reference">endif</span>
#  <span class="enscript-reference">else</span>
#    <span class="enscript-reference">define</span> <span class="enscript-function-name">fdopen</span>(fd,type)  _fdopen(fd,type)
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span>


        <span class="enscript-comment">/* common defaults */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">OS_CODE</span>
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">OS_CODE</span>  0x03  <span class="enscript-comment">/* assume Unix */</span>
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">F_OPEN</span>
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">F_OPEN</span>(name, mode) fopen((name), (mode))
#<span class="enscript-reference">endif</span>

         <span class="enscript-comment">/* functions */</span>

#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">STDC99</span>) || (<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__TURBOC__</span>) &amp;&amp; <span class="enscript-variable-name">__TURBOC__</span> &gt;= 0x550)
#  <span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">HAVE_VSNPRINTF</span>
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">HAVE_VSNPRINTF</span>
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__CYGWIN__</span>)
#  <span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">HAVE_VSNPRINTF</span>
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">HAVE_VSNPRINTF</span>
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">HAVE_VSNPRINTF</span>
#  <span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">MSDOS</span>
     <span class="enscript-comment">/* vsnprintf may exist on some MS-DOS compilers (DJGPP?),
        but for now we just assume it doesn't. */</span>
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">NO_vsnprintf</span>
#  <span class="enscript-reference">endif</span>
#  <span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__TURBOC__</span>
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">NO_vsnprintf</span>
#  <span class="enscript-reference">endif</span>
#  <span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">WIN32</span>
     <span class="enscript-comment">/* In Win32, vsnprintf is available as the &quot;non-ANSI&quot; _vsnprintf. */</span>
#    <span class="enscript-reference">if</span> !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">vsnprintf</span>) &amp;&amp; !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">NO_vsnprintf</span>)
#      <span class="enscript-reference">define</span> <span class="enscript-variable-name">vsnprintf</span> _vsnprintf
#    <span class="enscript-reference">endif</span>
#  <span class="enscript-reference">endif</span>
#  <span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__SASC</span>
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">NO_vsnprintf</span>
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">VMS</span>
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">NO_vsnprintf</span>
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">pyr</span>)
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">NO_MEMCPY</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">SMALL_MEDIUM</span>) &amp;&amp; !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_MSC_VER</span>) &amp;&amp; !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__SC__</span>)
 <span class="enscript-comment">/* Use our own functions for small and medium model with MSC &lt;= 5.0.
  * You may have to use the same strategy for Borland C (untested).
  * The __SC__ check is for Symantec.
  */</span>
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">NO_MEMCPY</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">STDC</span>) &amp;&amp; !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">HAVE_MEMCPY</span>) &amp;&amp; !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">NO_MEMCPY</span>)
#  <span class="enscript-reference">define</span> <span class="enscript-variable-name">HAVE_MEMCPY</span>
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">HAVE_MEMCPY</span>
#  <span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">SMALL_MEDIUM</span> <span class="enscript-comment">/* MSDOS small or medium model */</span>
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">zmemcpy</span> _fmemcpy
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">zmemcmp</span> _fmemcmp
#    <span class="enscript-reference">define</span> <span class="enscript-function-name">zmemzero</span>(dest, len) _fmemset(dest, 0, len)
#  <span class="enscript-reference">else</span>
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">zmemcpy</span> memcpy
#    <span class="enscript-reference">define</span> <span class="enscript-variable-name">zmemcmp</span> memcmp
#    <span class="enscript-reference">define</span> <span class="enscript-function-name">zmemzero</span>(dest, len) memset(dest, 0, len)
#  <span class="enscript-reference">endif</span>
#<span class="enscript-reference">else</span>
   <span class="enscript-type">extern</span> <span class="enscript-type">void</span> zmemcpy  OF((Bytef* dest, <span class="enscript-type">const</span> Bytef* source, uInt len));
   <span class="enscript-type">extern</span> <span class="enscript-type">int</span>  zmemcmp  OF((<span class="enscript-type">const</span> Bytef* s1, <span class="enscript-type">const</span> Bytef* s2, uInt len));
   <span class="enscript-type">extern</span> <span class="enscript-type">void</span> zmemzero OF((Bytef* dest, uInt len));
#<span class="enscript-reference">endif</span>

<span class="enscript-comment">/* Diagnostic functions */</span>
#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">DEBUG</span>) &amp;&amp; !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">KERNEL</span>)
#  <span class="enscript-reference">include</span> <span class="enscript-string">&lt;stdio.h&gt;</span>
   <span class="enscript-type">extern</span> <span class="enscript-type">int</span> z_verbose;
   <span class="enscript-type">extern</span> <span class="enscript-type">void</span> z_error    OF((<span class="enscript-type">char</span> *m));
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Assert</span>(cond,msg) {if(!(cond)) z_error(msg);}
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Trace</span>(x) {if (z_verbose&gt;=0) fprintf x ;}
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Tracev</span>(x) {if (z_verbose&gt;0) fprintf x ;}
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Tracevv</span>(x) {if (z_verbose&gt;1) fprintf x ;}
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Tracec</span>(c,x) {if (z_verbose&gt;0 &amp;&amp; (c)) fprintf x ;}
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Tracecv</span>(c,x) {if (z_verbose&gt;1 &amp;&amp; (c)) fprintf x ;}
#<span class="enscript-reference">else</span>
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Assert</span>(cond,msg)
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Trace</span>(x)
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Tracev</span>(x)
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Tracevv</span>(x)
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Tracec</span>(c,x)
#  <span class="enscript-reference">define</span> <span class="enscript-function-name">Tracecv</span>(c,x)
#<span class="enscript-reference">endif</span>
#<span class="enscript-reference">undef</span> <span class="enscript-variable-name">DEBUG</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">NO_ZCFUNCS</span>
voidpf zcalloc <span class="enscript-function-name">OF</span>((voidpf opaque, <span class="enscript-type">unsigned</span> items, <span class="enscript-type">unsigned</span> size));
<span class="enscript-type">void</span>   zcfree  <span class="enscript-function-name">OF</span>((voidpf opaque, voidpf ptr));
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* NO_ZCFUNCS */</span>

#<span class="enscript-reference">define</span> <span class="enscript-function-name">ZALLOC</span>(strm, items, size) \
           (*((strm)-&gt;zalloc))((strm)-&gt;opaque, (items), (size))
#<span class="enscript-reference">define</span> <span class="enscript-function-name">ZFREE</span>(strm, addr)  (*((strm)-&gt;zfree))((strm)-&gt;opaque, (voidpf)(addr))
#<span class="enscript-reference">define</span> <span class="enscript-function-name">TRY_FREE</span>(s, p) {if (p) ZFREE(s, p);}

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* ZUTIL_H */</span>
</pre>
<hr />
</body></html>