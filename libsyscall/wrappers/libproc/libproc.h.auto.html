<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>libproc.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">libproc.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2006, 2007, 2010 Apple Inc. All rights reserved.
 *
 * @APPLE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this
 * file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_LICENSE_HEADER_END@
 */</span>
#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_LIBPROC_H_</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">_LIBPROC_H_</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/cdefs.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/param.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/types.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/stat.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/mount.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/resource.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;stdint.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;stdbool.h&gt;</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;sys/proc_info.h&gt;</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;Availability.h&gt;</span>

<span class="enscript-comment">/*
 * This header file contains private interfaces to obtain process information.  
 * These interfaces are subject to change in future releases.
 */</span>

<span class="enscript-comment">/*!
	@define PROC_LISTPIDSPATH_PATH_IS_VOLUME
	@discussion This flag indicates that all processes that hold open
		file references on the volume associated with the specified
		path should be returned.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_LISTPIDSPATH_PATH_IS_VOLUME</span>	1


<span class="enscript-comment">/*!
	@define PROC_LISTPIDSPATH_EXCLUDE_EVTONLY
	@discussion This flag indicates that file references that were opened
		with the O_EVTONLY flag should be excluded from the matching
		criteria.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_LISTPIDSPATH_EXCLUDE_EVTONLY</span>	2

__BEGIN_DECLS


<span class="enscript-comment">/*!
	@function proc_listpidspath
	@discussion A function which will search through the current
		processes looking for open file references which match
		a specified path or volume.
	@param type types of processes to be searched (see proc_listpids)
	@param typeinfo adjunct information for type
	@param path file or volume path
	@param pathflags flags to control which files should be considered
		during the process search.
	@param buffer a C array of int-sized values to be filled with
		process identifiers that hold an open file reference
		matching the specified path or volume.  Pass NULL to
		obtain the minimum buffer size needed to hold the
		currently active processes.
	@param buffersize the size (in bytes) of the provided buffer.
	@result the number of bytes of data returned in the provided buffer;
		-1 if an error was encountered;
 */</span>
<span class="enscript-type">int</span>	proc_listpidspath(uint32_t	type,
			  uint32_t	typeinfo,
			  <span class="enscript-type">const</span> <span class="enscript-type">char</span>	*path,
			  uint32_t	pathflags,
			  <span class="enscript-type">void</span>		*buffer,
			  <span class="enscript-type">int</span>		buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);

<span class="enscript-type">int</span> <span class="enscript-function-name">proc_listpids</span>(uint32_t type, uint32_t typeinfo, <span class="enscript-type">void</span> *buffer, <span class="enscript-type">int</span> buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_listallpids</span>(<span class="enscript-type">void</span> * buffer, <span class="enscript-type">int</span> buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_4_1);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_listpgrppids</span>(pid_t pgrpid, <span class="enscript-type">void</span> * buffer, <span class="enscript-type">int</span> buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_4_1);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_listchildpids</span>(pid_t ppid, <span class="enscript-type">void</span> * buffer, <span class="enscript-type">int</span> buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_4_1);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_pidinfo</span>(<span class="enscript-type">int</span> pid, <span class="enscript-type">int</span> flavor, uint64_t arg,  <span class="enscript-type">void</span> *buffer, <span class="enscript-type">int</span> buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_pidfdinfo</span>(<span class="enscript-type">int</span> pid, <span class="enscript-type">int</span> fd, <span class="enscript-type">int</span> flavor, <span class="enscript-type">void</span> * buffer, <span class="enscript-type">int</span> buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_pidfileportinfo</span>(<span class="enscript-type">int</span> pid, uint32_t fileport, <span class="enscript-type">int</span> flavor, <span class="enscript-type">void</span> *buffer, <span class="enscript-type">int</span> buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_4_3);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_name</span>(<span class="enscript-type">int</span> pid, <span class="enscript-type">void</span> * buffer, uint32_t buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_regionfilename</span>(<span class="enscript-type">int</span> pid, uint64_t address, <span class="enscript-type">void</span> * buffer, uint32_t buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_kmsgbuf</span>(<span class="enscript-type">void</span> * buffer, uint32_t buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_pidpath</span>(<span class="enscript-type">int</span> pid, <span class="enscript-type">void</span> * buffer, uint32_t  buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_libversion</span>(<span class="enscript-type">int</span> *major, <span class="enscript-type">int</span> * minor) __OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);

<span class="enscript-comment">/*
 * Return resource usage information for the given pid, which can be a live process or a zombie.
 *
 * Returns 0 on success; or -1 on failure, with errno set to indicate the specific error.
 */</span>
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_pid_rusage</span>(<span class="enscript-type">int</span> pid, <span class="enscript-type">int</span> flavor, rusage_info_t *buffer) __OSX_AVAILABLE_STARTING(__MAC_10_9, __IPHONE_7_0);

<span class="enscript-comment">/* 
 * A process can use the following api to set its own process control 
 * state on resoure starvation. The argument can have one of the PROC_SETPC_XX values
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_SETPC_NONE</span>		0
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_SETPC_THROTTLEMEM</span>	1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_SETPC_SUSPEND</span>	2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">PROC_SETPC_TERMINATE</span>	3

<span class="enscript-type">int</span> <span class="enscript-function-name">proc_setpcontrol</span>(<span class="enscript-type">const</span> <span class="enscript-type">int</span> control) __OSX_AVAILABLE_STARTING(__MAC_10_6, __IPHONE_3_2);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_setpcontrol</span>(<span class="enscript-type">const</span> <span class="enscript-type">int</span> control);

<span class="enscript-type">int</span> <span class="enscript-function-name">proc_track_dirty</span>(pid_t pid, uint32_t flags);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_set_dirty</span>(pid_t pid, bool dirty);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_get_dirty</span>(pid_t pid, uint32_t *flags);
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_clear_dirty</span>(pid_t pid, uint32_t flags);

<span class="enscript-type">int</span> <span class="enscript-function-name">proc_terminate</span>(pid_t pid, <span class="enscript-type">int</span> *sig);

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">PRIVATE</span>
<span class="enscript-comment">/*
 * Enumerate potential userspace pointers embedded in kernel data structures.
 * Currently inspects kqueues only.
 *
 * NOTE: returned &quot;pointers&quot; are opaque user-supplied values and thus not
 * guaranteed to address valid objects or be pointers at all.
 *
 * Returns the number of pointers found (which may exceed buffersize), or -1 on
 * failure and errno set appropriately.
 */</span>
<span class="enscript-type">int</span> <span class="enscript-function-name">proc_list_uptrs</span>(pid_t pid, uint64_t *buffer, uint32_t buffersize);
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* PRIVATE */</span>

__END_DECLS

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/*_LIBPROC_H_ */</span>
</pre>
<hr />
</body></html>