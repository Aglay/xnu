<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>mach_subsystem_create.html</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">mach_subsystem_create.html&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-keyword">&lt;h2&gt;</span>mach_subsystem_create<span class="enscript-keyword">&lt;/h2&gt;</span>
<span class="enscript-keyword">&lt;hr&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;strong&gt;</span>Function<span class="enscript-keyword">&lt;/strong&gt;</span> - Register information about an RPC subsystem.
<span class="enscript-keyword">&lt;h3&gt;</span>SYNOPSIS<span class="enscript-keyword">&lt;/h3&gt;</span>
<span class="enscript-keyword">&lt;pre&gt;</span>
<span class="enscript-keyword">&lt;strong&gt;</span>kern_return_t   mach_subsystem_create<span class="enscript-keyword">&lt;/strong&gt;</span>
                <span class="enscript-keyword">&lt;strong&gt;</span>(task_t<span class="enscript-keyword">&lt;/strong&gt;</span>                             <span class="enscript-keyword">&lt;var&gt;</span>target_task<span class="enscript-keyword">&lt;/var&gt;</span>,
                 <span class="enscript-keyword">&lt;strong&gt;</span>user_subsystem_t<span class="enscript-keyword">&lt;/strong&gt;</span>                   <span class="enscript-keyword">&lt;var&gt;</span>user_subsys<span class="enscript-keyword">&lt;/var&gt;</span>,
                 <span class="enscript-keyword">&lt;strong&gt;</span>mach_msg_type_number_t<span class="enscript-keyword">&lt;/strong&gt;</span>          <span class="enscript-keyword">&lt;var&gt;</span>user_subsysCnt<span class="enscript-keyword">&lt;/var&gt;</span>,
                 <span class="enscript-keyword">&lt;strong&gt;</span>subsystem_t<span class="enscript-keyword">&lt;/strong&gt;</span>                        <span class="enscript-keyword">&lt;var&gt;</span>subsystem_t<span class="enscript-keyword">&lt;/var&gt;</span><span class="enscript-keyword">&lt;strong&gt;</span>);<span class="enscript-keyword">&lt;/strong&gt;</span>
<span class="enscript-keyword">&lt;/pre&gt;</span>
<span class="enscript-keyword">&lt;h3&gt;</span>PARAMETERS<span class="enscript-keyword">&lt;/h3&gt;</span>
<span class="enscript-keyword">&lt;dl&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;var&gt;</span>target_task<span class="enscript-keyword">&lt;/var&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
The task for which the subsystem is registered; normally the calling 
task, but not necessarily.
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;var&gt;</span>user_subsys<span class="enscript-keyword">&lt;/var&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
The MIG-generated data structure describing the exported routines and 
their input/output characteristics (e.g. arguments and return values).
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;var&gt;</span>user_subsysCnt<span class="enscript-keyword">&lt;/var&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
The size of the user_subsys data structure argument, in bytes.
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;var&gt;</span>subsys<span class="enscript-keyword">&lt;/var&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
The port returned that names the registered subsystem.
<span class="enscript-keyword">&lt;/dl&gt;</span>
<span class="enscript-keyword">&lt;h3&gt;</span>DESCRIPTION<span class="enscript-keyword">&lt;/h3&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
The <span class="enscript-keyword">&lt;strong&gt;</span>mach_subsystem_create<span class="enscript-keyword">&lt;/strong&gt;</span> function is used by a server to register
information about an RPC subsystem with the kernel.
MIG automatically generates, in the server source file, a
<span class="enscript-keyword">&lt;strong&gt;</span>user_subsystem_t<span class="enscript-keyword">&lt;/strong&gt;</span> data structure that is appropriate for registering
the subsystem. This data structure includes a per-routine array that
specifies:
<span class="enscript-keyword">&lt;ul&gt;</span>
<span class="enscript-keyword">&lt;li&gt;</span>
The address of the server function that performs the work.
<span class="enscript-keyword">&lt;li&gt;</span>
The address of the MIG-generated server-side marshalling stub, to be 
used with <span class="enscript-keyword">&lt;strong&gt;</span>mach_msg<span class="enscript-keyword">&lt;/strong&gt;</span>.
<span class="enscript-keyword">&lt;li&gt;</span>
The argument signature (i.e. NDR-style argument format) of the
routine.
<span class="enscript-keyword">&lt;/ul&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
Upon successful completion, <span class="enscript-keyword">&lt;strong&gt;</span>mach_subsystem_create<span class="enscript-keyword">&lt;/strong&gt;</span> returns,
via the <span class="enscript-keyword">&lt;var&gt;</span>subsys<span class="enscript-keyword">&lt;/var&gt;</span> parameter, a port naming the registered subsystem.
<span class="enscript-keyword">&lt;p&gt;</span>
Each port on which the server is to receive short-circuited RPC's (or
a <span class="enscript-keyword">&lt;strong&gt;</span>mach_rpc<span class="enscript-keyword">&lt;/strong&gt;</span> call) must be associated with a registered subsystem, by
calling <span class="enscript-keyword">&lt;strong&gt;</span>mach_port_allocate_subsystem<span class="enscript-keyword">&lt;/strong&gt;</span>.
<span class="enscript-keyword">&lt;h3&gt;</span>RETURN VALUES<span class="enscript-keyword">&lt;/h3&gt;</span>
<span class="enscript-keyword">&lt;dl&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;strong&gt;</span>KERN_INVALD_ADDRESS<span class="enscript-keyword">&lt;/strong&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
One or more of the addresses in the range specified by the subsystem
address and size are not valid addresses in the caller, or some of the
internal pointers in the subsystem do not point to places within the
address range (all of the data of the subsystem is required to be
contiguous, even the parts that are pointed to by other parts).
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;strong&gt;</span>KERN_INVALID_ARGUMENT<span class="enscript-keyword">&lt;/strong&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
The port name specified by <span class="enscript-keyword">&lt;var&gt;</span>target_task<span class="enscript-keyword">&lt;/var&gt;</span> is not a send right naming a task,
or the subsystem size is too small to be valid.
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;strong&gt;</span>KERN_INVALID_TASK<span class="enscript-keyword">&lt;/strong&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
The target task is dead.
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;strong&gt;</span>KERN_RESOURCE_SHORTAGE<span class="enscript-keyword">&lt;/strong&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
The kernel cannot allocate the subsystem due to insufficient available 
memory.
<span class="enscript-keyword">&lt;/dl&gt;</span>
<span class="enscript-keyword">&lt;h3&gt;</span>RELATED INFORMATION<span class="enscript-keyword">&lt;/h3&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
Functions:
<span class="enscript-keyword">&lt;a href=</span><span class="enscript-string">&quot;MP_allocate_subsystem.html&quot;</span><span class="enscript-keyword">&gt;</span><span class="enscript-keyword">&lt;strong&gt;</span>mach_port_allocate_subsystem<span class="enscript-keyword">&lt;/strong&gt;</span><span class="enscript-keyword">&lt;/a&gt;</span>,
<span class="enscript-keyword">&lt;a href=</span><span class="enscript-string">&quot;thread_activation_create.html&quot;</span><span class="enscript-keyword">&gt;</span><span class="enscript-keyword">&lt;strong&gt;</span>thread_activation_create<span class="enscript-keyword">&lt;/strong&gt;</span><span class="enscript-keyword">&lt;/a&gt;</span>.
</pre>
<hr />
</body></html>