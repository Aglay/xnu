<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>etap_trace_event.html</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">etap_trace_event.html&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-keyword">&lt;h2&gt;</span>etap_trace_event<span class="enscript-keyword">&lt;/h2&gt;</span>
<span class="enscript-keyword">&lt;hr&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;strong&gt;</span>System Trap<span class="enscript-keyword">&lt;/strong&gt;</span> -
manipulate event probes and lock event tracing.
<span class="enscript-keyword">&lt;h3&gt;</span>SYNOPSIS<span class="enscript-keyword">&lt;/h3&gt;</span>
<span class="enscript-keyword">&lt;pre&gt;</span>
<span class="enscript-keyword">&lt;strong&gt;</span>#include<span class="enscript-keyword">&amp;ltmach/etap.h&amp;gt&lt;/strong&gt;

&lt;strong&gt;kern_return_t   etap_trace_event&lt;/strong&gt;
                &lt;strong&gt;(etap_data_t&lt;/strong&gt;                               &lt;var&gt;mode&lt;/var&gt;,
                 &lt;strong&gt;mode&lt;/strong&gt;                                      &lt;var&gt;type&lt;/var&gt;,
                 &lt;strong&gt;boolean_t&lt;/strong&gt;                               &lt;var&gt;enable&lt;/var&gt;,
                 &lt;strong&gt;enable&lt;/strong&gt;                                   &lt;var&gt;nargs&lt;/var&gt;,
                 &lt;strong&gt;mode&lt;/strong&gt;                                      &lt;var&gt;mode&lt;/var&gt;&lt;strong&gt;);</span><span class="enscript-keyword">&lt;/strong&gt;</span>
<span class="enscript-keyword">&lt;/pre&gt;</span>
<span class="enscript-keyword">&lt;h3&gt;</span>PARAMETERS<span class="enscript-keyword">&lt;/h3&gt;</span>
<span class="enscript-keyword">&lt;dl&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;var&gt;</span>mode<span class="enscript-keyword">&lt;/var&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
indicates the desired trace flavor or reset option and may be one,
or more, of the following:
<span class="enscript-keyword">&lt;ul&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
  <span class="enscript-keyword">&lt;li&gt;</span>
ETAP_CUMULATIVE: cumulative lock event trace mode.
     <span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;li&gt;</span>
ETAP_MONITORED: monitored event trace mode (for probes or locks)
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;li&gt;</span>
ETAP_RESET: reset mode, clears all trace status and cumulative buffer entries
<span class="enscript-keyword">&lt;/ul&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;var&gt;</span>type<span class="enscript-keyword">&lt;/var&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
used when measuring lock event contention or durations
and may be one, or more, of the following:
<span class="enscript-keyword">&lt;ul&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
  <span class="enscript-keyword">&lt;li&gt;</span>
ETAP_CONTENT
<span class="enscript-keyword">&lt;p&gt;</span>
  <span class="enscript-keyword">&lt;li&gt;</span>
ETAP_DURATION
<span class="enscript-keyword">&lt;/ul&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;var&gt;</span>enable<span class="enscript-keyword">&lt;/var&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
a boolean value  indicattin whether the event trace operation is
to be enabled (TRUE) or disabled (FALSE). 
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;var&gt;</span>nargs<span class="enscript-keyword">&lt;/var&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
specifies how many arguments are passed in the args array.
<span class="enscript-keyword">&lt;p&gt;</span>
<span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;var&gt;</span>args<span class="enscript-keyword">&lt;/var&gt;</span>
<span class="enscript-keyword">&lt;dd&gt;</span>
an array, each element of which is a character string
representing a specific subsystem or event type. These values must
correspond to the ones the kernel uses to represent the same
subsystems and event types. The maximum length of a character string
is EVENT_NAME_LENGTH (defined in <span class="enscript-keyword">&lt;strong&gt;</span>mach/etap.h<span class="enscript-keyword">&lt;/strong&gt;</span>).
<span class="enscript-keyword">&lt;/dl&gt;</span>
<span class="enscript-keyword">&lt;h3&gt;</span>DESCRIPTION<span class="enscript-keyword">&lt;/h3&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
The <span class="enscript-keyword">&lt;strong&gt;</span>etap_trace_event<span class="enscript-keyword">&lt;/strong&gt;</span> system call is used to enable
and disable kernel event probes (of a specified type) and all modes of lock event
tracing. The call also supports a reset option, where the cumulative
buffer data and all event type tracing is reset to zero. When the
reset option is used, a new interval width can also be defined, using
the <span class="enscript-keyword">&lt;var&gt;</span>nargs<span class="enscript-keyword">&lt;/var&gt;</span> parameter.
<span class="enscript-keyword">&lt;p&gt;</span>
To reset the ETAP instrumentation,
the system call would utilize the mode parameter, passing the value of
ETAP_RESET (All other parameters may equal NULL). If, at the time of
reset, the <span class="enscript-keyword">&lt;var&gt;</span>nargs<span class="enscript-keyword">&lt;/var&gt;</span> parameter is assigned a value, then the
cumulative buffer interval width will be adjusted to be the size of
that value.  For example, the following system call would reset the
ETAP instrumentation and adjust the cumulative buffer's interval width
to 100ms:
<span class="enscript-keyword">&lt;pre&gt;</span>
         etap_trace_event(ETAP_RESET, 0, 0, 100, 0);

<span class="enscript-keyword">&lt;/pre&gt;</span>
<span class="enscript-keyword">&lt;h3&gt;</span>RETURN VALUES<span class="enscript-keyword">&lt;/h3&gt;</span>
<span class="enscript-keyword">&lt;dl&gt;</span>
  <span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;strong&gt;</span>KERN_SUCCESS<span class="enscript-keyword">&lt;/strong&gt;</span>
       <span class="enscript-keyword">&lt;dd&gt;</span>
	    The call was performed successfully.
<span class="enscript-keyword">&lt;p&gt;</span>
  <span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;strong&gt;</span>KERN_NO_SPACE<span class="enscript-keyword">&lt;/strong&gt;</span>
       <span class="enscript-keyword">&lt;dd&gt;</span>
	    A shortage of kernel resources prevented the operation from completing;
	    the kernel has cleaned up all residual state (the error indicates a &quot;clean&quot;
	    failure).
<span class="enscript-keyword">&lt;p&gt;</span>
  <span class="enscript-keyword">&lt;dt&gt;</span> <span class="enscript-keyword">&lt;strong&gt;</span>KERN_FAILURE<span class="enscript-keyword">&lt;/strong&gt;</span>
       <span class="enscript-keyword">&lt;dd&gt;</span>
	    ETAP is not configured in the kernel.
<span class="enscript-keyword">&lt;/dl&gt;</span>
<span class="enscript-keyword">&lt;h3&gt;</span>RELATED INFORMATION<span class="enscript-keyword">&lt;/h3&gt;</span>
<span class="enscript-keyword">&lt;p&gt;</span>
Functions:
<span class="enscript-keyword">&lt;a href=</span><span class="enscript-string">&quot;etap_probe.html&quot;</span><span class="enscript-keyword">&gt;</span><span class="enscript-keyword">&lt;strong&gt;</span>etap_probe<span class="enscript-keyword">&lt;/strong&gt;</span><span class="enscript-keyword">&lt;/a&gt;</span>,
<span class="enscript-keyword">&lt;a href=</span><span class="enscript-string">&quot;etap_trace_thread.html&quot;</span><span class="enscript-keyword">&gt;</span><span class="enscript-keyword">&lt;strong&gt;</span>etap_trace_thread<span class="enscript-keyword">&lt;/strong&gt;</span><span class="enscript-keyword">&lt;/a&gt;</span>,
<span class="enscript-keyword">&lt;a href=</span><span class="enscript-string">&quot;etap_get_info.html&quot;</span><span class="enscript-keyword">&gt;</span><span class="enscript-keyword">&lt;strong&gt;</span>etap_get_info<span class="enscript-keyword">&lt;/strong&gt;</span><span class="enscript-keyword">&lt;/a&gt;</span>.
</pre>
<hr />
</body></html>