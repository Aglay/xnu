<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>vm_statistics.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">vm_statistics.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2000-2009 Apple Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>
<span class="enscript-comment">/*
 * @OSF_COPYRIGHT@
 */</span>
<span class="enscript-comment">/* 
 * Mach Operating System
 * Copyright (c) 1991,1990,1989,1988,1987 Carnegie Mellon University
 * All Rights Reserved.
 * 
 * Permission to use, copy, modify and distribute this software and its
 * documentation is hereby granted, provided that both the copyright
 * notice and this permission notice appear in all copies of the
 * software, derivative works or modified versions, and any portions
 * thereof, and that both notices appear in supporting documentation.
 * 
 * CARNEGIE MELLON ALLOWS FREE USE OF THIS SOFTWARE IN ITS &quot;AS IS&quot;
 * CONDITION.  CARNEGIE MELLON DISCLAIMS ANY LIABILITY OF ANY KIND FOR
 * ANY DAMAGES WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
 * 
 * Carnegie Mellon requests users of this software to return to
 * 
 *  Software Distribution Coordinator  or  <a href="mailto:Software.Distribution@CS.CMU.EDU">Software.Distribution@CS.CMU.EDU</a>
 *  School of Computer Science
 *  Carnegie Mellon University
 *  Pittsburgh PA 15213-3890
 * 
 * any improvements or extensions that they make and grant Carnegie Mellon
 * the rights to redistribute these changes.
 */</span>
<span class="enscript-comment">/*
 */</span>
<span class="enscript-comment">/*
 *	File:	mach/vm_statistics.h
 *	Author:	Avadis Tevanian, Jr., Michael Wayne Young, David Golub
 *
 *	Virtual memory statistics structure.
 *
 */</span>

#<span class="enscript-reference">ifndef</span>	<span class="enscript-variable-name">_MACH_VM_STATISTICS_H_</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">_MACH_VM_STATISTICS_H_</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;mach/machine/vm_types.h&gt;</span>


<span class="enscript-comment">/*
 * vm_statistics
 *
 * History:
 *	rev0 - 	original structure.
 *	rev1 - 	added purgable info (purgable_count and purges).
 *	rev2 - 	added speculative_count.
 *
 * Note: you cannot add any new fields to this structure. Add them below in
 * 	 vm_statistics64.
 */</span>

<span class="enscript-type">struct</span> vm_statistics {
	natural_t	free_count;		<span class="enscript-comment">/* # of pages free */</span>
	natural_t	active_count;		<span class="enscript-comment">/* # of pages active */</span>
	natural_t	inactive_count;		<span class="enscript-comment">/* # of pages inactive */</span>
	natural_t	wire_count;		<span class="enscript-comment">/* # of pages wired down */</span>
	natural_t	zero_fill_count;	<span class="enscript-comment">/* # of zero fill pages */</span>
	natural_t	reactivations;		<span class="enscript-comment">/* # of pages reactivated */</span>
	natural_t	pageins;		<span class="enscript-comment">/* # of pageins */</span>
	natural_t	pageouts;		<span class="enscript-comment">/* # of pageouts */</span>
	natural_t	faults;			<span class="enscript-comment">/* # of faults */</span>
	natural_t	cow_faults;		<span class="enscript-comment">/* # of copy-on-writes */</span>
	natural_t	lookups;		<span class="enscript-comment">/* object cache lookups */</span>
	natural_t	hits;			<span class="enscript-comment">/* object cache hits */</span>

	<span class="enscript-comment">/* added for rev1 */</span>
	natural_t	purgeable_count;	<span class="enscript-comment">/* # of pages purgeable */</span>
	natural_t	purges;			<span class="enscript-comment">/* # of pages purged */</span>

	<span class="enscript-comment">/* added for rev2 */</span>
	<span class="enscript-comment">/*
	 * NB: speculative pages are already accounted for in &quot;free_count&quot;,
	 * so &quot;speculative_count&quot; is the number of &quot;free&quot; pages that are
	 * used to hold data that was read speculatively from disk but
	 * haven't actually been used by anyone so far.
	 */</span>
	natural_t	speculative_count;	<span class="enscript-comment">/* # of pages speculative */</span>
};

<span class="enscript-comment">/* Used by all architectures */</span>
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> vm_statistics	*vm_statistics_t;
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> vm_statistics	vm_statistics_data_t;

<span class="enscript-comment">/* 
 * vm_statistics64
 *
 * History:
 *	rev0 - 	original structure.
 *	rev1 - 	added purgable info (purgable_count and purges).
 *	rev2 - 	added speculative_count.
 *	   ----
 *	rev3 - 	changed name to vm_statistics64.
 *		changed some fields in structure to 64-bit on 
 *		arm, i386 and x86_64 architectures.
 *	rev4 -  require 64-bit alignment for efficient access
 *		in the kernel. No change to reported data.
 *
 */</span>

<span class="enscript-type">struct</span> vm_statistics64 {
	natural_t	free_count;		<span class="enscript-comment">/* # of pages free */</span>
	natural_t	active_count;		<span class="enscript-comment">/* # of pages active */</span>
	natural_t	inactive_count;		<span class="enscript-comment">/* # of pages inactive */</span>
	natural_t	wire_count;		<span class="enscript-comment">/* # of pages wired down */</span>
	uint64_t	zero_fill_count;	<span class="enscript-comment">/* # of zero fill pages */</span>
	uint64_t	reactivations;		<span class="enscript-comment">/* # of pages reactivated */</span>
	uint64_t	pageins;		<span class="enscript-comment">/* # of pageins */</span>
	uint64_t	pageouts;		<span class="enscript-comment">/* # of pageouts */</span>
	uint64_t	faults;			<span class="enscript-comment">/* # of faults */</span>
	uint64_t	cow_faults;		<span class="enscript-comment">/* # of copy-on-writes */</span>
	uint64_t	lookups;		<span class="enscript-comment">/* object cache lookups */</span>
	uint64_t	hits;			<span class="enscript-comment">/* object cache hits */</span>
	uint64_t	purges;			<span class="enscript-comment">/* # of pages purged */</span>
	natural_t	purgeable_count;	<span class="enscript-comment">/* # of pages purgeable */</span>
	<span class="enscript-comment">/*
	 * NB: speculative pages are already accounted for in &quot;free_count&quot;,
	 * so &quot;speculative_count&quot; is the number of &quot;free&quot; pages that are
	 * used to hold data that was read speculatively from disk but
	 * haven't actually been used by anyone so far.
	 */</span>
	natural_t	speculative_count;	<span class="enscript-comment">/* # of pages speculative */</span>

	<span class="enscript-comment">/* added for rev1 */</span>
	uint64_t	decompressions;		<span class="enscript-comment">/* # of pages decompressed */</span>
	uint64_t	compressions;		<span class="enscript-comment">/* # of pages compressed */</span>
	uint64_t	swapins;		<span class="enscript-comment">/* # of pages swapped in (via compression segments) */</span>
	uint64_t	swapouts;		<span class="enscript-comment">/* # of pages swapped out (via compression segments) */</span>
	natural_t	compressor_page_count;	<span class="enscript-comment">/* # of pages used by the compressed pager to hold all the compressed data */</span>
	natural_t	throttled_count;	<span class="enscript-comment">/* # of pages throttled */</span>
	natural_t	external_page_count;	<span class="enscript-comment">/* # of pages that are file-backed (non-swap) */</span>
	natural_t	internal_page_count;	<span class="enscript-comment">/* # of pages that are anonymous */</span>
	uint64_t	total_uncompressed_pages_in_compressor; <span class="enscript-comment">/* # of pages (uncompressed) held within the compressor. */</span>
} __attribute__((aligned(8)));

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> vm_statistics64	*vm_statistics64_t;
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> vm_statistics64	vm_statistics64_data_t;

<span class="enscript-comment">/* 
 * VM_STATISTICS_TRUNCATE_TO_32_BIT
 *
 * This is used by host_statistics() to truncate and peg the 64-bit in-kernel values from
 * vm_statistics64 to the 32-bit values of the older structure above (vm_statistics).
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-function-name">VM_STATISTICS_TRUNCATE_TO_32_BIT</span>(value) ((uint32_t)(((value) &gt; UINT32_MAX ) ? UINT32_MAX : (value)))

<span class="enscript-comment">/* 
 * vm_extmod_statistics
 *
 * Structure to record modifications to a task by an
 * external agent.
 *
 * History:
 *	rev0 - 	original structure.
 */</span>

<span class="enscript-type">struct</span> vm_extmod_statistics {
	int64_t	task_for_pid_count;			<span class="enscript-comment">/* # of times task port was looked up */</span>
	int64_t task_for_pid_caller_count;	<span class="enscript-comment">/* # of times this task called task_for_pid */</span>
	int64_t	thread_creation_count;		<span class="enscript-comment">/* # of threads created in task */</span>
	int64_t	thread_creation_caller_count;	<span class="enscript-comment">/* # of threads created by task */</span>
	int64_t	thread_set_state_count;		<span class="enscript-comment">/* # of register state sets in task */</span>
	int64_t	thread_set_state_caller_count;	<span class="enscript-comment">/* # of register state sets by task */</span>
} __attribute__((aligned(8)));

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> vm_extmod_statistics *vm_extmod_statistics_t;
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> vm_extmod_statistics vm_extmod_statistics_data_t;

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> vm_purgeable_stat {
	uint64_t	count;
	uint64_t	size;
}vm_purgeable_stat_t;

<span class="enscript-type">struct</span> vm_purgeable_info {
	vm_purgeable_stat_t fifo_data[8];
	vm_purgeable_stat_t obsolete_data;
	vm_purgeable_stat_t lifo_data[8];
};

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> vm_purgeable_info	*vm_purgeable_info_t;

<span class="enscript-comment">/* included for the vm_map_page_query call */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_PRESENT</span>      0x1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_FICTITIOUS</span>   0x2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_REF</span>          0x4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_DIRTY</span>        0x8
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_PAGED_OUT</span>    0x10
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_COPIED</span>       0x20
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_SPECULATIVE</span>	0x40
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_EXTERNAL</span>	0x80
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_CS_VALIDATED</span>	0x100
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_CS_TAINTED</span>	0x200
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_PAGE_QUERY_PAGE_CS_NX</span>	0x400

#<span class="enscript-reference">ifdef</span>	<span class="enscript-variable-name">MACH_KERNEL_PRIVATE</span>

<span class="enscript-comment">/*
 *	Each machine dependent implementation is expected to
 *	keep certain statistics.  They may do this anyway they
 *	so choose, but are expected to return the statistics
 *	in the following structure.
 */</span>

<span class="enscript-type">struct</span> pmap_statistics {
	integer_t	resident_count;	<span class="enscript-comment">/* # of pages mapped (total)*/</span>
	integer_t	resident_max;	<span class="enscript-comment">/* # of pages mapped (peak) */</span>
	integer_t	wired_count;	<span class="enscript-comment">/* # of pages wired */</span>

	integer_t	device;
	integer_t	device_peak;
	integer_t	internal;
	integer_t	internal_peak;
	integer_t	external;
	integer_t	external_peak;
	integer_t	reusable;
	integer_t	reusable_peak;
	uint64_t	compressed __attribute__((aligned(8)));
	uint64_t	compressed_peak __attribute__((aligned(8)));
	uint64_t	compressed_lifetime __attribute__((aligned(8)));
};

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> pmap_statistics	*pmap_statistics_t;

#<span class="enscript-reference">define</span> <span class="enscript-function-name">PMAP_STATS_PEAK</span>(field)			\
	MACRO_BEGIN				\
	<span class="enscript-keyword">if</span> (field &gt; field##_peak) {		\
		field##_peak = field;		\
	}					\
	MACRO_END

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* MACH_KERNEL_PRIVATE */</span>

<span class="enscript-comment">/*
 * VM allocation flags:
 * 
 * VM_FLAGS_FIXED
 * 	(really the absence of VM_FLAGS_ANYWHERE)
 *	Allocate new VM region at the specified virtual address, if possible.
 * 
 * VM_FLAGS_ANYWHERE
 *	Allocate new VM region anywhere it would fit in the address space.
 *
 * VM_FLAGS_PURGABLE
 *	Create a purgable VM object for that new VM region.
 *
 * VM_FLAGS_NO_PMAP_CHECK
 *	(for DEBUG kernel config only, ignored for other configs)
 *	Do not check that there is no stale pmap mapping for the new VM region.
 *	This is useful for kernel memory allocations at bootstrap when building
 *	the initial kernel address space while some memory is already in use.
 *
 * VM_FLAGS_OVERWRITE
 *	The new VM region can replace existing VM regions if necessary
 *	(to be used in combination with VM_FLAGS_FIXED).
 *
 * VM_FLAGS_NO_CACHE
 *	Pages brought in to this VM region are placed on the speculative
 *	queue instead of the active queue.  In other words, they are not
 *	cached so that they will be stolen first if memory runs low.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_FIXED</span>		0x0000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_ANYWHERE</span>	0x0001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_PURGABLE</span>	0x0002
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL_PRIVATE</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL_PRIVATE */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_NO_CACHE</span>	0x0010
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_RESILIENT_CODESIGN</span>	0x0020
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_RESILIENT_MEDIA</span>	0x0040
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL_PRIVATE</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_PERMANENT</span>	0x0100	<span class="enscript-comment">/* mapping can NEVER be unmapped */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_GUARD_AFTER</span>	0x0200	<span class="enscript-comment">/* guard page after the mapping */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_GUARD_BEFORE</span>	0x0400	<span class="enscript-comment">/* guard page before the mapping */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_SUBMAP</span>		0x0800	<span class="enscript-comment">/* mapping a VM submap */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_ALREADY</span>	0x1000	<span class="enscript-comment">/* OK if same mapping already exists */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_BEYOND_MAX</span>	0x2000	<span class="enscript-comment">/* map beyond the map's max offset */</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL_PRIVATE */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_OVERWRITE</span>	0x4000	<span class="enscript-comment">/* delete any existing mappings first */</span>
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL_PRIVATE</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_NO_PMAP_CHECK</span>	0x8000	<span class="enscript-comment">/* do not check that pmap is empty */</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL_PRIVATE */</span>
<span class="enscript-comment">/*
 * VM_FLAGS_SUPERPAGE_MASK
 *	3 bits that specify whether large pages should be used instead of
 *	base pages (!=0), as well as the requested page size.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_SUPERPAGE_MASK</span>	0x70000	<span class="enscript-comment">/* bits 0x10000, 0x20000, 0x40000 */</span>
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL_PRIVATE</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">VM_FLAGS_MAP_JIT</span>	0x80000	<span class="enscript-comment">/* Used to mark an entry as describing a JIT region */</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL_PRIVATE */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_RETURN_DATA_ADDR</span>	0x100000 <span class="enscript-comment">/* Return address of target data, rather than base of page */</span>
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL_PRIVATE</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_IOKIT_ACCT</span>		0x200000 <span class="enscript-comment">/* IOKit accounting */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_KEEP_MAP_LOCKED</span>	0x400000 <span class="enscript-comment">/* Keep the map locked when returning from vm_map_enter() */</span>
#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL_PRIVATE */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_RETURN_4K_DATA_ADDR</span>	0x800000 <span class="enscript-comment">/* Return 4K aligned address of target data */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_ALIAS_MASK</span>	0xFF000000
#<span class="enscript-reference">define</span> <span class="enscript-function-name">VM_GET_FLAGS_ALIAS</span>(flags, alias)			\
		(alias) = ((flags) &amp; VM_FLAGS_ALIAS_MASK) &gt;&gt; 24	
#<span class="enscript-reference">define</span> <span class="enscript-function-name">VM_SET_FLAGS_ALIAS</span>(flags, alias)			\
		(flags) = (((flags) &amp; ~VM_FLAGS_ALIAS_MASK) |	\
		(((alias) &amp; ~VM_FLAGS_ALIAS_MASK) &lt;&lt; 24))

<span class="enscript-comment">/* These are the flags that we accept from user-space */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_USER_ALLOCATE</span>	(VM_FLAGS_FIXED |		\
				 VM_FLAGS_ANYWHERE |		\
				 VM_FLAGS_PURGABLE |		\
				 VM_FLAGS_NO_CACHE |		\
				 VM_FLAGS_OVERWRITE |		\
				 VM_FLAGS_SUPERPAGE_MASK |	\
				 VM_FLAGS_ALIAS_MASK)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_USER_MAP</span>	(VM_FLAGS_USER_ALLOCATE |	\
				 VM_FLAGS_RETURN_4K_DATA_ADDR |	\
				 VM_FLAGS_RETURN_DATA_ADDR)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_USER_REMAP</span>	(VM_FLAGS_FIXED |    \
				 VM_FLAGS_ANYWHERE | \
				 VM_FLAGS_OVERWRITE| \
				 VM_FLAGS_RETURN_DATA_ADDR |\
				 VM_FLAGS_RESILIENT_CODESIGN)

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_SUPERPAGE_SHIFT</span> 16
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SUPERPAGE_NONE</span>			0	<span class="enscript-comment">/* no superpages, if all bits are 0 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SUPERPAGE_SIZE_ANY</span>		1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_SUPERPAGE_NONE</span>     (SUPERPAGE_NONE     &lt;&lt; VM_FLAGS_SUPERPAGE_SHIFT)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_SUPERPAGE_SIZE_ANY</span> (SUPERPAGE_SIZE_ANY &lt;&lt; VM_FLAGS_SUPERPAGE_SHIFT)
#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">__x86_64__</span>) || !<span class="enscript-reference">defined</span>(<span class="enscript-variable-name">KERNEL</span>)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">SUPERPAGE_SIZE_2MB</span>		2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_FLAGS_SUPERPAGE_SIZE_2MB</span> (SUPERPAGE_SIZE_2MB&lt;&lt;VM_FLAGS_SUPERPAGE_SHIFT)
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_MALLOC</span> 1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_MALLOC_SMALL</span> 2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_MALLOC_LARGE</span> 3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_MALLOC_HUGE</span> 4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_SBRK</span> 5// uninteresting -- no one should call
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_REALLOC</span> 6
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_MALLOC_TINY</span> 7
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_MALLOC_LARGE_REUSABLE</span> 8
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_MALLOC_LARGE_REUSED</span> 9

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_ANALYSIS_TOOL</span> 10

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_MALLOC_NANO</span> 11

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_MACH_MSG</span> 20
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_IOKIT</span>	21
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_STACK</span>  30
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_GUARD</span>  31
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">VM_MEMORY_SHARED_PMAP</span> 32
<span class="enscript-comment">/* memory containing a dylib */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_DYLIB</span>	33
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_OBJC_DISPATCHERS</span> 34

<span class="enscript-comment">/* Was a nested pmap (VM_MEMORY_SHARED_PMAP) which has now been unnested */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">VM_MEMORY_UNSHARED_PMAP</span>	35


<span class="enscript-comment">// Placeholders for now -- as we analyze the libraries and find how they
</span><span class="enscript-comment">// use memory, we can make these labels more specific.
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_APPKIT</span> 40
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_FOUNDATION</span> 41
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_COREGRAPHICS</span> 42
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_CORESERVICES</span> 43
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_CARBON</span> VM_MEMORY_CORESERVICES
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_JAVA</span> 44
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_COREDATA</span> 45
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_COREDATA_OBJECTIDS</span> 46
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_ATS</span> 50
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_LAYERKIT</span> 51
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_CGIMAGE</span> 52
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_TCMALLOC</span> 53

<span class="enscript-comment">/* private raster data (i.e. layers, some images, QGL allocator) */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">VM_MEMORY_COREGRAPHICS_DATA</span>	54

<span class="enscript-comment">/* shared image and font caches */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_COREGRAPHICS_SHARED</span>	55

<span class="enscript-comment">/* Memory used for virtual framebuffers, shadowing buffers, etc... */</span>
#<span class="enscript-reference">define</span>	<span class="enscript-variable-name">VM_MEMORY_COREGRAPHICS_FRAMEBUFFERS</span>	56

<span class="enscript-comment">/* Window backing stores, custom shadow data, and compressed backing stores */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_COREGRAPHICS_BACKINGSTORES</span>	57

<span class="enscript-comment">/* catch-all for other uses, such as the read-only shared data page */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_COREGRAPHICS_MISC</span> VM_MEMORY_COREGRAPHICS

<span class="enscript-comment">/* memory allocated by the dynamic loader for itself */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_DYLD</span> 60
<span class="enscript-comment">/* malloc'd memory created by dyld */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_DYLD_MALLOC</span> 61

<span class="enscript-comment">/* Used for sqlite page cache */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_SQLITE</span> 62

<span class="enscript-comment">/* JavaScriptCore heaps */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_JAVASCRIPT_CORE</span> 63
<span class="enscript-comment">/* memory allocated for the JIT */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_JAVASCRIPT_JIT_EXECUTABLE_ALLOCATOR</span> 64
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_JAVASCRIPT_JIT_REGISTER_FILE</span> 65

<span class="enscript-comment">/* memory allocated for GLSL */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_GLSL</span>  66

<span class="enscript-comment">/* memory allocated for OpenCL.framework */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_OPENCL</span>    67

<span class="enscript-comment">/* memory allocated for QuartzCore.framework */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_COREIMAGE</span> 68

<span class="enscript-comment">/* memory allocated for WebCore Purgeable Buffers */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_WEBCORE_PURGEABLE_BUFFERS</span> 69

<span class="enscript-comment">/* ImageIO memory */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_IMAGEIO</span>	70

<span class="enscript-comment">/* CoreProfile memory */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_COREPROFILE</span>	71

<span class="enscript-comment">/* assetsd / MobileSlideShow memory */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_ASSETSD</span>	72

<span class="enscript-comment">/* libsystem_kernel os_once_alloc */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_OS_ALLOC_ONCE</span> 73

<span class="enscript-comment">/* libdispatch internal allocator */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_LIBDISPATCH</span> 74

<span class="enscript-comment">/* Accelerate.framework image backing stores */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_ACCELERATE</span> 75

<span class="enscript-comment">/* CoreUI image block data */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_COREUI</span> 76

<span class="enscript-comment">/* CoreUI image file */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_COREUIFILE</span> 77

<span class="enscript-comment">/* Genealogy buffers */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_GENEALOGY</span> 78

<span class="enscript-comment">/* RawCamera VM allocated memory */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_RAWCAMERA</span> 79

<span class="enscript-comment">/* corpse info for dead process */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_CORPSEINFO</span> 80

<span class="enscript-comment">/* Apple System Logger (ASL) messages */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_ASL</span> 81

<span class="enscript-comment">/* Reserve 240-255 for application */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_APPLICATION_SPECIFIC_1</span> 240
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_MEMORY_APPLICATION_SPECIFIC_16</span> 255

#<span class="enscript-reference">define</span> <span class="enscript-function-name">VM_MAKE_TAG</span>(tag) ((tag) &lt;&lt; 24)



#<span class="enscript-reference">if</span> <span class="enscript-variable-name">KERNEL_PRIVATE</span>

<span class="enscript-comment">/* kernel map tags */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_NONE</span>		0

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_OSFMK</span>		1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_BSD</span>		2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_IOKIT</span>		3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_LIBKERN</span>		4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_OSKEXT</span>		5
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_KEXT</span>		6
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_IPC</span>		7
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_STACK</span>		8
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_CPU</span>		9
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_PMAP</span>		10
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_PTE</span>		11
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_ZONE</span>		12
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_KALLOC</span>		13
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_COMPRESSOR</span>	14
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_COMPRESSED_DATA</span>	15
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_PHANTOM_CACHE</span>	16
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_WAITQ</span>		17
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_DIAG</span>		18
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_LOG</span>		19
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_FILE</span>		20
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_MBUF</span>		21
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_UBC</span>		22
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_SECURITY</span>		23
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_MLOCK</span>		24
<span class="enscript-comment">//
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_FIRST_DYNAMIC</span>	25
<span class="enscript-comment">/* out of tags: */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_ANY</span>		255
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_MEMORY_COUNT</span>		256

<span class="enscript-comment">/* end kernel map tags */</span>

<span class="enscript-comment">// mach_memory_info.flags
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_SITE_TYPE</span>		0x000000FF
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_SITE_TAG</span>		0x00000000
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_SITE_KMOD</span>		0x00000001
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_SITE_KERNEL</span>		0x00000002
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_SITE_COUNTER</span>		0x00000003
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_SITE_WIRED</span>		0x00000100	<span class="enscript-comment">/* add to wired count */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_SITE_HIDE</span>		0x00000200	<span class="enscript-comment">/* no zprint */</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_COUNT_MANAGED</span>		0
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_COUNT_RESERVED</span>		1
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_COUNT_WIRED</span>		2
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_COUNT_WIRED_MANAGED</span> 	3
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_COUNT_STOLEN</span>		4
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_COUNT_LOPAGE</span>		5
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_COUNT_MAP_KERNEL</span>	6
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_COUNT_MAP_ZONE</span>		7
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_COUNT_MAP_KALLOC</span>	8

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">VM_KERN_COUNTER_COUNT</span>		9

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL_PRIVATE */</span>

#<span class="enscript-reference">endif</span>	<span class="enscript-comment">/* _MACH_VM_STATISTICS_H_ */</span>
</pre>
<hr />
</body></html>