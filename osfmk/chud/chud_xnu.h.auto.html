<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>chud_xnu.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">chud_xnu.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2003-2008 Apple Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_CHUD_XNU_H_</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">_CHUD_XNU_H_</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;stdint.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;mach/boolean.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;mach/mach_types.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;kern/thread_call.h&gt;</span>

<span class="enscript-comment">/* Unslide the provided pointer if it's a kernel address. */</span>
<span class="enscript-type">static</span> inline uint64_t
<span class="enscript-function-name">chudxnu_vm_unslide</span>( uint64_t ptr, <span class="enscript-type">int</span> kaddr )
{
	<span class="enscript-keyword">if</span>( !kaddr )
		<span class="enscript-keyword">return</span> ptr;

	<span class="enscript-keyword">return</span> VM_KERNEL_UNSLIDE(ptr);
}

#<span class="enscript-reference">if</span> 0
#<span class="enscript-reference">pragma</span> <span class="enscript-variable-name">mark</span> **** <span class="enscript-variable-name">version</span> ****
#<span class="enscript-reference">endif</span>
<span class="enscript-type">extern</span> uint32_t <span class="enscript-function-name">chudxnu_version</span>(<span class="enscript-type">void</span>);

#<span class="enscript-reference">if</span> 0
#<span class="enscript-reference">pragma</span> <span class="enscript-variable-name">mark</span> **** <span class="enscript-variable-name">task</span> ****
#<span class="enscript-reference">endif</span>
<span class="enscript-comment">// ********************************************************************************
</span><span class="enscript-comment">// task
</span><span class="enscript-comment">// ********************************************************************************
</span><span class="enscript-type">extern</span> task_t <span class="enscript-function-name">chudxnu_task_for_pid</span>(<span class="enscript-type">int</span> pid);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">chudxnu_pid_for_task</span>(task_t task);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">chudxnu_current_pid</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> task_t <span class="enscript-function-name">chudxnu_current_task</span>(<span class="enscript-type">void</span>);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_task_read</span>(task_t task, <span class="enscript-type">void</span> *kernaddr, uint64_t usraddr, vm_size_t size);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_task_write</span>(task_t task, uint64_t useraddr, <span class="enscript-type">void</span> *kernaddr, vm_size_t size);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_kern_read</span>(<span class="enscript-type">void</span> *destaddr, vm_offset_t srcaddr, vm_size_t size);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_kern_write</span>(vm_offset_t destaddr, <span class="enscript-type">void</span> *srcaddr, vm_size_t size);

<span class="enscript-type">extern</span> boolean_t <span class="enscript-function-name">chudxnu_is_64bit_task</span>(task_t task);

#<span class="enscript-reference">if</span> 0
#<span class="enscript-reference">pragma</span> <span class="enscript-variable-name">mark</span> **** <span class="enscript-variable-name">thread</span> ****
#<span class="enscript-reference">endif</span>
<span class="enscript-comment">// ********************************************************************************
</span><span class="enscript-comment">// thread
</span><span class="enscript-comment">// ********************************************************************************
</span><span class="enscript-type">extern</span> thread_t <span class="enscript-function-name">chudxnu_current_thread</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> task_t <span class="enscript-function-name">chudxnu_task_for_thread</span>(thread_t thread);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_bind_thread</span>(thread_t thread, <span class="enscript-type">int</span> cpu, <span class="enscript-type">int</span> options);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_unbind_thread</span>(thread_t thread, <span class="enscript-type">int</span> options);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_thread_get_state</span>(thread_t thread, thread_flavor_t flavor, thread_state_t tstate, mach_msg_type_number_t *count, boolean_t user_only);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_thread_set_state</span>(thread_t thread, thread_flavor_t flavor, thread_state_t tstate, mach_msg_type_number_t count, boolean_t user_only);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_thread_get_callstack64</span>(thread_t thread, uint64_t *callStack, mach_msg_type_number_t *count, boolean_t user_only);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_thread_get_callstack64_kperf</span>(thread_t thread, uint64_t *callStack, mach_msg_type_number_t *count, boolean_t user_only);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_all_tasks</span>(task_array_t *task_list, mach_msg_type_number_t *count);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_free_task_list</span>(task_array_t *task_list, mach_msg_type_number_t	*count);
									 
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_all_threads</span>(thread_array_t *thread_list, mach_msg_type_number_t *count);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_task_threads</span>(task_t task, thread_array_t *thread_list, mach_msg_type_number_t *count);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_free_thread_list</span>(thread_array_t *thread_list, mach_msg_type_number_t *count);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_thread_info</span>(  thread_t thread, thread_flavor_t flavor, thread_info_t thread_info_out, mach_msg_type_number_t *thread_info_count);

<span class="enscript-type">extern</span> boolean_t <span class="enscript-function-name">chudxnu_thread_set_marked</span>(thread_t thread, boolean_t marked);
<span class="enscript-type">extern</span> boolean_t <span class="enscript-function-name">chudxnu_thread_get_marked</span>(thread_t thread);
<span class="enscript-type">extern</span> boolean_t <span class="enscript-function-name">chudxnu_thread_get_idle</span>(thread_t thread);

<span class="enscript-type">enum</span> {
	CHUDXNU_TS_RUNNING = 0x1,
	CHUDXNU_TS_RUNNABLE = 0x2,
	CHUDXNU_TS_WAIT = 0x4,
	CHUDXNU_TS_UNINT = 0x8,
	CHUDXNU_TS_SUSP = 0x10,
	CHUDXNU_TS_TERMINATE = 0x20,
	CHUDXNU_TS_IDLE = 0x40
};

<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">chudxnu_thread_get_scheduler_state</span>(thread_t thread);

<span class="enscript-type">extern</span> boolean_t <span class="enscript-function-name">chudxnu_thread_get_dirty</span>(thread_t thread);
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">chudxnu_thread_set_dirty</span>(thread_t thread, boolean_t);

#<span class="enscript-reference">if</span> 0
#<span class="enscript-reference">pragma</span> <span class="enscript-variable-name">mark</span> **** <span class="enscript-variable-name">memory</span> ****
#<span class="enscript-reference">endif</span>
<span class="enscript-comment">// ********************************************************************************
</span><span class="enscript-comment">// memory
</span><span class="enscript-comment">// ********************************************************************************
</span>
<span class="enscript-type">extern</span> uint64_t <span class="enscript-function-name">chudxnu_avail_memory_size</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> uint64_t <span class="enscript-function-name">chudxnu_phys_memory_size</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> uint64_t <span class="enscript-function-name">chudxnu_free_memory_size</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> uint64_t <span class="enscript-function-name">chudxnu_inactive_memory_size</span>(<span class="enscript-type">void</span>);

#<span class="enscript-reference">if</span> 0
#<span class="enscript-reference">pragma</span> <span class="enscript-variable-name">mark</span> **** <span class="enscript-variable-name">cpu</span> ****
#<span class="enscript-reference">endif</span>
<span class="enscript-comment">// ********************************************************************************
</span><span class="enscript-comment">// cpu
</span><span class="enscript-comment">// ********************************************************************************
</span><span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">chudxnu_logical_cpu_count</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">chudxnu_phys_cpu_count</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">chudxnu_cpu_number</span>(<span class="enscript-type">void</span>);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_enable_cpu</span>(<span class="enscript-type">int</span> cpu, boolean_t enable);

<span class="enscript-type">extern</span> boolean_t <span class="enscript-function-name">chudxnu_set_interrupts_enabled</span>(boolean_t enable);
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">chudxnu_cause_interrupt</span>(<span class="enscript-type">void</span>);

<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">chudxnu_enable_preemption</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">chudxnu_disable_preemption</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">chudxnu_get_preemption_level</span>(<span class="enscript-type">void</span>);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_perfmon_acquire_facility</span>(task_t);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_perfmon_release_facility</span>(task_t);

<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> {
    uint32_t hwResets;
    uint32_t hwMachineChecks;
    uint32_t hwDSIs;
    uint32_t hwISIs;
    uint32_t hwExternals;
    uint32_t hwAlignments;
    uint32_t hwPrograms;
    uint32_t hwFloatPointUnavailable;
    uint32_t hwDecrementers;
    uint32_t hwIOErrors;
    uint32_t hwSystemCalls;
    uint32_t hwTraces;
    uint32_t hwFloatingPointAssists;
    uint32_t hwPerformanceMonitors;
    uint32_t hwAltivecs;
    uint32_t hwInstBreakpoints;
    uint32_t hwSystemManagements;
    uint32_t hwAltivecAssists;
    uint32_t hwThermal;
    uint32_t hwSoftPatches;
    uint32_t hwMaintenances;
    uint32_t hwInstrumentations;
} interrupt_counters_t;

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_get_cpu_interrupt_counters</span>(<span class="enscript-type">int</span> cpu, interrupt_counters_t *rupts);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_clear_cpu_interrupt_counters</span>(<span class="enscript-type">int</span> cpu);

#<span class="enscript-reference">if</span> 0
#<span class="enscript-reference">pragma</span> <span class="enscript-variable-name">mark</span> **** <span class="enscript-variable-name">callbacks</span> ****
#<span class="enscript-reference">endif</span>
<span class="enscript-comment">// ********************************************************************************
</span><span class="enscript-comment">// callbacks
</span><span class="enscript-comment">// ********************************************************************************
</span>
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">chudxnu_cancel_all_callbacks</span>(<span class="enscript-type">void</span>);

<span class="enscript-comment">// cpu timer - each cpu has its own callback 
</span><span class="enscript-type">typedef</span> <span class="enscript-function-name">kern_return_t</span> (*chudxnu_cpu_timer_callback_func_t)(thread_flavor_t flavor, thread_state_t tstate,  mach_msg_type_number_t count);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_cpu_timer_callback_enter</span>(chudxnu_cpu_timer_callback_func_t func, uint32_t time, uint32_t units); <span class="enscript-comment">// callback is entered on current cpu
</span><span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_cpu_timer_callback_cancel</span>(<span class="enscript-type">void</span>); <span class="enscript-comment">// callback is cleared on current cpu
</span><span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_cpu_timer_callback_cancel_all</span>(<span class="enscript-type">void</span>); <span class="enscript-comment">// callback is cleared on all cpus
</span>
<span class="enscript-type">enum</span> {
    PPC_TRAP_PROGRAM		= 0x700,
    PPC_TRAP_TRACE		= 0xD00,
    PPC_TRAP_PERFMON		= 0xF00,
};

<span class="enscript-type">enum</span> {
	X86_TRAP_DEBUG			= 0x1,
};

<span class="enscript-comment">// trap callback - one callback for system
</span><span class="enscript-type">typedef</span> <span class="enscript-function-name">kern_return_t</span> (*chudxnu_trap_callback_func_t)(uint32_t trapentry, thread_flavor_t flavor, thread_state_t tstate,  mach_msg_type_number_t count);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_trap_callback_enter</span>(chudxnu_trap_callback_func_t func);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_trap_callback_cancel</span>(<span class="enscript-type">void</span>);

<span class="enscript-type">enum</span> {
    PPC_INTERRUPT_DECREMENTER	= 0x900,
    PPC_INTERRUPT_INTERRUPT	= 0x500,
    PPC_INTERRUPT_CPU_SIGNAL	= 0x2200,
};

<span class="enscript-type">enum</span> {
    X86_INTERRUPT_PERFMON	= 0xB,
};

<span class="enscript-comment">// interrupt callback - one callback for system
</span><span class="enscript-type">typedef</span> <span class="enscript-function-name">kern_return_t</span> (*chudxnu_interrupt_callback_func_t)(uint32_t trapentry, thread_flavor_t flavor, thread_state_t tstate,  mach_msg_type_number_t count);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_interrupt_callback_enter</span>(chudxnu_interrupt_callback_func_t func);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_interrupt_callback_cancel</span>(<span class="enscript-type">void</span>);

<span class="enscript-comment">// ast callback - one callback for system
</span><span class="enscript-type">typedef</span> <span class="enscript-function-name">kern_return_t</span> (*chudxnu_perfmon_ast_callback_func_t)(thread_flavor_t flavor, thread_state_t tstate,  mach_msg_type_number_t count);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_perfmon_ast_callback_enter</span>(chudxnu_perfmon_ast_callback_func_t func);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_perfmon_ast_callback_cancel</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_perfmon_ast_send_urgent</span>(boolean_t urgent);

<span class="enscript-comment">// cpusig callback - one callback for system
</span><span class="enscript-type">typedef</span> <span class="enscript-function-name">kern_return_t</span> (*chudxnu_cpusig_callback_func_t)(<span class="enscript-type">int</span> request, thread_flavor_t flavor, thread_state_t tstate, mach_msg_type_number_t count);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_cpusig_callback_enter</span>(chudxnu_cpusig_callback_func_t func);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_cpusig_callback_cancel</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_cpusig_send</span>(<span class="enscript-type">int</span> otherCPU, uint32_t request);

<span class="enscript-comment">// kdebug callback - one callback for system
</span><span class="enscript-type">typedef</span> <span class="enscript-function-name">kern_return_t</span> (*chudxnu_kdebug_callback_func_t)(uint32_t debugid, uintptr_t arg0, uintptr_t arg1, uintptr_t arg2, uintptr_t arg3, uintptr_t arg4);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_kdebug_callback_enter</span>(chudxnu_kdebug_callback_func_t func);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_kdebug_callback_cancel</span>(<span class="enscript-type">void</span>);

<span class="enscript-comment">// timer callback - multiple callbacks
</span><span class="enscript-type">typedef</span> <span class="enscript-function-name">kern_return_t</span> (*chudxnu_timer_callback_func_t)(thread_call_param_t param0, thread_call_param_t param1);
<span class="enscript-type">typedef</span> <span class="enscript-type">void</span> *	chud_timer_t;
<span class="enscript-type">extern</span> chud_timer_t <span class="enscript-function-name">chudxnu_timer_alloc</span>(chudxnu_timer_callback_func_t func, thread_call_param_t param0);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_timer_callback_enter</span>(chud_timer_t timer, thread_call_param_t param1, uint32_t time, uint32_t units);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_timer_callback_cancel</span>(chud_timer_t timer);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_timer_free</span>(chud_timer_t timer);

<span class="enscript-comment">// CHUD systemcall callback - one callback for system
</span><span class="enscript-type">typedef</span> <span class="enscript-function-name">kern_return_t</span> (*chudxnu_syscall_callback_func_t)(uint64_t code, uint64_t arg1, uint64_t arg2, uint64_t arg3, uint64_t arg4, uint64_t arg5);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_syscall_callback_enter</span>(chudxnu_syscall_callback_func_t func);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_syscall_callback_cancel</span>(<span class="enscript-type">void</span>);

<span class="enscript-comment">// DTrace Triggering
</span><span class="enscript-type">typedef</span> <span class="enscript-function-name">kern_return_t</span> (*chudxnu_dtrace_callback_t)(uint64_t selector, uint64_t *args, uint32_t count);
<span class="enscript-type">extern</span> <span class="enscript-type">int</span> <span class="enscript-function-name">chudxnu_dtrace_callback</span>(uint64_t selector, uint64_t *args, uint32_t count);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_dtrace_callback_enter</span>(chudxnu_dtrace_callback_t fn);
<span class="enscript-type">extern</span> <span class="enscript-type">void</span> <span class="enscript-function-name">chudxnu_dtrace_callback_cancel</span>(<span class="enscript-type">void</span>);

<span class="enscript-comment">// ********************************************************************************
</span><span class="enscript-comment">// DEPRECATED
</span><span class="enscript-comment">// ********************************************************************************
</span><span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_thread_get_callstack</span>(thread_t thread, uint32_t *callStack, mach_msg_type_number_t *count, boolean_t user_only);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_set_shadowed_spr</span>(<span class="enscript-type">int</span> cpu, <span class="enscript-type">int</span> spr, uint32_t val);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_set_shadowed_spr64</span>(<span class="enscript-type">int</span> cpu, <span class="enscript-type">int</span> spr, uint64_t val);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_enable_cpu_nap</span>(<span class="enscript-type">int</span> cpu, boolean_t enable);
<span class="enscript-type">extern</span> boolean_t <span class="enscript-function-name">chudxnu_cpu_nap_enabled</span>(<span class="enscript-type">int</span> cpu);

<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_read_spr</span>(<span class="enscript-type">int</span> cpu, <span class="enscript-type">int</span> spr, uint32_t *val_p);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_read_spr64</span>(<span class="enscript-type">int</span> cpu, <span class="enscript-type">int</span> spr, uint64_t *val_p);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_write_spr</span>(<span class="enscript-type">int</span> cpu, <span class="enscript-type">int</span> spr, uint32_t val);
<span class="enscript-type">extern</span> kern_return_t <span class="enscript-function-name">chudxnu_write_spr64</span>(<span class="enscript-type">int</span> cpu, <span class="enscript-type">int</span> spr, uint64_t val);

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* _CHUD_XNU_H_ */</span>
</pre>
<hr />
</body></html>