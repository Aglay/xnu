<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>IOPM.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">IOPM.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 1998-2005 Apple Computer, Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>
#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">_IOKIT_IOPM_H</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">_IOKIT_IOPM_H</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;IOKit/IOTypes.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;IOKit/IOMessage.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;IOKit/IOReturn.h&gt;</span>

<span class="enscript-comment">/*! @header IOPM.h
    @abstract Defines power management constants and keys used by both in-kernel and user space power management.
    @discussion IOPM.h defines a range of power management constants used in several in-kernel and user space APIs. Most significantly, the IOPMPowerFlags used to specify the fields of an IOPMPowerState struct are defined here.

    Most of the constants defined in IOPM.h are deprecated or for Apple internal use only, and are not elaborated on in headerdoc.
*/</span>

<span class="enscript-type">enum</span> {
    kIOPMMaxPowerStates = 10,
    IOPMMaxPowerStates = kIOPMMaxPowerStates
};

<span class="enscript-comment">/*! @enum IOPMPowerFlags
    @abstract Bits are used in defining capabilityFlags, inputPowerRequirements, and outputPowerCharacter in the IOPMPowerState structure.
    @discussion These bits may be bitwise-OR'd together in the IOPMPowerState capabilityFlags field, the outputPowerCharacter field, and/or the inputPowerRequirement field. 
    
    The comments clearly mark whether each flag should be used in the capabilityFlags field, outputPowerCharacter field, and inputPowerRequirement field, or all three.
    
    The value of capabilityFlags, inputPowerRequirement or outputPowerCharacter may be 0. Most drivers implement their 'OFF' state, used when asleep, by defininf each of the 3 fields as 0.
    
    The bits listed below are only the most common bits used to define a device's power states. Your device's IO family may require that your device specify other input or output power flags to interact properly. Consult family-specific documentation to determine if your IOPower plane parents or children require other power flags; they probably don't.

    @constant kIOPMPowerOn Indicates the device is on, requires power, and provides power. Useful as a: Capability, InputPowerRequirement, OutputPowerCharacter

    @constant kIOPMDeviceUsable Indicates the device is usable in this state. Useful only as a Capability

    @constant kIOPMLowPower 
    Indicates device is in a low power state. May be bitwis-OR'd together
    with kIOPMDeviceUsable flag, to indicate the device is still usable.
    
    A device with a capability of kIOPMLowPower may:
       Require either 0 or kIOPMPowerOn from its power parent
       Offer either kIOPMLowPower, kIOPMPowerOn, or 0 (no power at all)
         to its power plane children.

    Useful only as a Capability, although USB drivers should consult USB family documentation for other valid circumstances to use the kIOPMLowPower bit.

    @constant kIOPMPreventIdleSleep
    In the capability field of a power state, disallows idle system sleep while the device is in that state.
    
    For example, displays and disks set this capability for their ON power state; since the system may not idle sleep while the display (and thus keyboard or mouse) or the disk is active.

    Useful only as a Capability.
    
    @constant kIOPMSleepCapability
    Used only by certain IOKit Families (USB). Not defined or used by generic Power Management. Read your family documentation to see if you should define a powerstate using these capabilities.
    
    @constant kIOPMRestartCapability
    Used only by certain IOKit Families (USB). Not defined or used by generic Power Management. Read your family documentation to see if you should define a powerstate using these capabilities.
    
    @constant kIOPMSleep
    Used only by certain IOKit Families (USB). Not defined or used by generic Power Management. Read your family documentation to see if you should define a powerstate using these capabilities.

    @constant kIOPMRestart
    Used only by certain IOKit Families (USB). Not defined or used by generic Power Management. Read your family documentation to see if you should define a powerstate using these capabilities.

    @constant kIOPMInitialDeviceState
    Indicates the initial power state for the device. If &lt;code&gt;initialPowerStateForDomainState()&lt;/code&gt; returns a power state with this flag set in the capability field, then the initial power change is performed without calling the driver's &lt;code&gt;setPowerState()&lt;/code&gt;.

    @constant kIOPMRootDomainState
    An indication that the power flags represent the state of the root power
    domain. This bit must not be set in the IOPMPowerState structure.
    Power Management may pass this bit to initialPowerStateForDomainState()
    to map from a global system state to the desired device state.
*/</span>
<span class="enscript-type">typedef</span> <span class="enscript-type">unsigned</span> <span class="enscript-type">long</span> IOPMPowerFlags;
<span class="enscript-type">enum</span> {
    kIOPMPowerOn                    = 0x00000002,
    kIOPMDeviceUsable               = 0x00008000,
    kIOPMLowPower                   = 0x00010000,
    kIOPMPreventIdleSleep           = 0x00000040,
    kIOPMSleepCapability            = 0x00000004,
    kIOPMRestartCapability          = 0x00000080,
    kIOPMSleep                      = 0x00000001,
    kIOPMRestart                    = 0x00000080,
    kIOPMInitialDeviceState         = 0x00000100,
    kIOPMRootDomainState            = 0x00000200
};

<span class="enscript-comment">/*
 * Private IOPMPowerFlags
 *
 * For Apple use only
 * Not for use with non-Apple drivers
 * Their behavior is undefined
 */</span>
<span class="enscript-type">enum</span> {
    kIOPMClockNormal                = 0x0004,
    kIOPMClockRunning               = 0x0008,
    kIOPMPreventSystemSleep         = 0x0010,
    kIOPMDoze                       = 0x0400,
    kIOPMChildClamp                 = 0x0080,
    kIOPMChildClamp2                = 0x0200,
    kIOPMNotPowerManaged            = 0x0800
};

<span class="enscript-comment">/*
 * Deprecated IOPMPowerFlags
 * Their behavior is undefined when used in IOPMPowerState
 * Capability, InputPowerRequirement, or OutputPowerCharacter fields.
 */</span>
<span class="enscript-type">enum</span> {
    kIOPMMaxPerformance             = 0x4000,
    kIOPMPassThrough                = 0x0100,
    kIOPMAuxPowerOn                 = 0x0020,
    kIOPMNotAttainable              = 0x0001,
    kIOPMContextRetained            = 0x2000,
    kIOPMConfigRetained             = 0x1000,
    kIOPMStaticPowerValid           = 0x0800,
    kIOPMSoftSleep                  = 0x0400,
    kIOPMCapabilitiesMask =     kIOPMPowerOn | kIOPMDeviceUsable | 
                                kIOPMMaxPerformance | kIOPMContextRetained | 
                                kIOPMConfigRetained | kIOPMSleepCapability |
                                kIOPMRestartCapability
};

<span class="enscript-comment">/*
 * Support for old names of IOPMPowerFlag constants
 */</span>
<span class="enscript-type">enum</span> {
    IOPMNotAttainable           = kIOPMNotAttainable,
    IOPMPowerOn                 = kIOPMPowerOn,
    IOPMClockNormal             = kIOPMClockNormal,
    IOPMClockRunning            = kIOPMClockRunning,
    IOPMAuxPowerOn              = kIOPMAuxPowerOn,
    IOPMDeviceUsable            = kIOPMDeviceUsable,
    IOPMMaxPerformance          = kIOPMMaxPerformance,
    IOPMContextRetained         = kIOPMContextRetained,
    IOPMConfigRetained          = kIOPMConfigRetained,
    IOPMNotPowerManaged         = kIOPMNotPowerManaged,
    IOPMSoftSleep               = kIOPMSoftSleep
};


<span class="enscript-type">enum</span> {
    kIOPMNextHigherState        = 1,
    kIOPMHighestState           = 2,
    kIOPMNextLowerState         = 3,
    kIOPMLowestState            = 4
};

<span class="enscript-type">enum</span> {
    IOPMNextHigherState         = kIOPMNextHigherState,
    IOPMHighestState            = kIOPMHighestState,
    IOPMNextLowerState          = kIOPMNextLowerState,
    IOPMLowestState             = kIOPMLowestState
};

<span class="enscript-comment">// Internal commands used by power managment command queue
</span><span class="enscript-type">enum</span> {
    kIOPMBroadcastAggressiveness = 1,
    kIOPMUnidleDevice
};

<span class="enscript-comment">// Power consumption unknown value
</span><span class="enscript-type">enum</span> {
    kIOPMUnknown = 0xFFFF
};

<span class="enscript-comment">/*******************************************************************************
 *
 * Root Domain property keys of interest
 *
 ******************************************************************************/</span>

<span class="enscript-comment">/* AppleClamshellState 
 * reflects the state of the clamshell (lid) on a portable.
 * It has a boolean value.
 *  true        == clamshell is closed
 *  false       == clamshell is open
 *  not present == no clamshell on this hardware
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kAppleClamshellStateKey</span>             <span class="enscript-string">&quot;AppleClamshellState&quot;</span>

<span class="enscript-comment">/* AppleClamshellCausesSleep 
 * reflects the clamshell close behavior on a portable. 
 * It has a boolean value.
 *  true        == system will sleep when clamshell is closed
 *  false       == system will not sleep on clamshell close 
 *                  (typically external display mode)
 *  not present == no clamshell on this hardware
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kAppleClamshellCausesSleepKey</span>       <span class="enscript-string">&quot;AppleClamshellCausesSleep&quot;</span>

<span class="enscript-comment">/* kIOPMSleepWakeUUIDKey
 * Key refers to a CFStringRef that will uniquely identify
 * a sleep/wake cycle for logging &amp; tracking.
 * The key becomes valid at the beginning of a sleep cycle - before we
 * initiate any sleep/wake notifications.
 * The key becomes invalid at the completion of a system wakeup. The
 * property will not be present in the IOPMrootDomain's registry entry
 * when it is invalid.
 * 
 * See IOPMrootDomain notification kIOPMMessageSleepWakeUUIDChange
 */</span>
 #define kIOPMSleepWakeUUIDKey              <span class="enscript-string">&quot;SleepWakeUUID&quot;</span>

<span class="enscript-comment">/* kIOPMBootSessionUUIDKey
 * Key refers to a CFStringRef that will uniquely identify
 * a boot cycle.
 * The key becomes valid at boot time and remains valid 
 * till shutdown. The property value will remain same across 
 * sleep/wake/hibernate cycle.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMBootSessionUUIDKey</span>             <span class="enscript-string">&quot;BootSessionUUID&quot;</span>

<span class="enscript-comment">/* kIOPMDeepSleepEnabledKey
 * Indicates the Deep Sleep enable state.
 * It has a boolean value.
 *  true        == Deep Sleep is enabled
 *  false       == Deep Sleep is disabled
 *  not present == Deep Sleep is not supported on this hardware
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDeepSleepEnabledKey</span>            <span class="enscript-string">&quot;Standby Enabled&quot;</span>

<span class="enscript-comment">/* kIOPMDeepSleepDelayKey
 * Key refers to a CFNumberRef that represents the delay in seconds before
 * entering Deep Sleep state. The property is not present if Deep Sleep is
 * unsupported.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDeepSleepDelayKey</span>              <span class="enscript-string">&quot;Standby Delay&quot;</span>

<span class="enscript-comment">/* kIOPMDestroyFVKeyOnStandbyKey
 * Specifies if FileVault key can be stored when going to standby mode
 * It has a boolean value,
 *  true        == Destroy FV key when going to standby mode
 *  false       == Retain FV key when going to standby mode
 *  not present == Retain FV key when going to standby mode
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDestroyFVKeyOnStandbyKey</span>       <span class="enscript-string">&quot;DestroyFVKeyOnStandby&quot;</span>

<span class="enscript-comment">/*******************************************************************************
 *
 * Properties that can control power management behavior
 *
 ******************************************************************************/</span>

<span class="enscript-comment">/* kIOPMResetPowerStateOnWakeKey
 * If an IOService publishes this key with the value of kOSBooleanTrue,
 * then PM will disregard the influence from changePowerStateToPriv() or
 * any activity tickles that occurred before system sleep when resolving
 * the initial device power state on wake. Influences from power children
 * and changePowerStateTo() are not eliminated. At the earliest opportunity
 * upon system wake, PM will query the driver for a new power state to be
 * installed as the initial changePowerStateToPriv() influence, by calling
 * initialPowerStateForDomainState() with both kIOPMRootDomainState and
 * kIOPMPowerOn flags set. The default implementation will always return
 * the lowest power state. Drivers can override this default behavior to
 * immediately raise the power state when there are work blocked on the
 * power change, and cannot afford to wait until the next activity tickle.
 * This property should be statically added to a driver's plist or set at
 * runtime before calling PMinit().
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMResetPowerStateOnWakeKey</span>       <span class="enscript-string">&quot;IOPMResetPowerStateOnWake&quot;</span>

<span class="enscript-comment">/*******************************************************************************
 *
 * Driver PM Assertions
 *
 ******************************************************************************/</span>

<span class="enscript-comment">/* Driver Assertion bitfield description
 * Driver PM assertions are defined by these bits.
 */</span>
<span class="enscript-type">enum</span> {
    <span class="enscript-comment">/*! kIOPMDriverAssertionCPUBit
     * When set, PM kernel will prefer to leave the CPU and core hardware
     * running in &quot;Dark Wake&quot; state, instead of sleeping.
     */</span>
    kIOPMDriverAssertionCPUBit                      = 0x01,

    <span class="enscript-comment">/*! kIOPMDriverAssertionUSBExternalDeviceBit
     * When set, driver is informing PM that an external USB device is attached.
     */</span>
    kIOPMDriverAssertionUSBExternalDeviceBit        = 0x04,

    <span class="enscript-comment">/*! kIOPMDriverAssertionBluetoothHIDDevicePairedBit
     * When set, driver is informing PM that a Bluetooth HID device is paired.
     */</span>
    kIOPMDriverAssertionBluetoothHIDDevicePairedBit = 0x08,

    <span class="enscript-comment">/*! kIOPMDriverAssertionExternalMediaMountedBit
     * When set, driver is informing PM that an external media is mounted.
     */</span>
    kIOPMDriverAssertionExternalMediaMountedBit     = 0x10,

    <span class="enscript-comment">/*! kIOPMDriverAssertionReservedBit5
     * Reserved for Thunderbolt.
     */</span>
    kIOPMDriverAssertionReservedBit5                = 0x20,

    <span class="enscript-comment">/*! kIOPMDriverAssertionPreventDisplaySleepBit
     * When set, the display should remain powered on while the system's awake.
     */</span>
    kIOPMDriverAssertionPreventDisplaySleepBit      = 0x40,

    <span class="enscript-comment">/*! kIOPMDriverAssertionReservedBit7
     * Reserved for storage family.
     */</span>
    kIOPMDriverAssertionReservedBit7                = 0x80,

    <span class="enscript-comment">/*! kIOPMDriverAssertionMagicPacketWakeEnabledBit
     * When set, driver is informing PM that magic packet wake is enabled.
     */</span>
    kIOPMDriverAssertionMagicPacketWakeEnabledBit   = 0x100,

    <span class="enscript-comment">/*! kIOPMDriverAssertionNetworkKeepAliveActiveBit
     * When set, driver is informing PM that it is holding the network
     * interface up to do TCPKeepAlive
     */</span>
    kIOPMDriverAssertionNetworkKeepAliveActiveBit   = 0x200
};

 <span class="enscript-comment">/* kIOPMAssertionsDriverKey
  * This kIOPMrootDomain key refers to a CFNumberRef property, containing
  * a bitfield describing the aggregate PM assertion levels.
  * Example: A value of 0 indicates that no driver has asserted anything.
  * Or, a value of &lt;link&gt;kIOPMDriverAssertionCPUBit&lt;/link&gt;
  *   indicates that a driver (or drivers) have asserted a need for CPU and video.
  */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMAssertionsDriverKey</span>            <span class="enscript-string">&quot;DriverPMAssertions&quot;</span>

 <span class="enscript-comment">/* kIOPMAssertionsDriverKey
  * This kIOPMrootDomain key refers to a CFNumberRef property, containing
  * a bitfield describing the aggregate PM assertion levels.
  * Example: A value of 0 indicates that no driver has asserted anything.
  * Or, a value of &lt;link&gt;kIOPMDriverAssertionCPUBit&lt;/link&gt;
  *   indicates that a driver (or drivers) have asserted a need for CPU and video.
  */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMAssertionsDriverDetailedKey</span>    <span class="enscript-string">&quot;DriverPMAssertionsDetailed&quot;</span>

<span class="enscript-comment">/*******************************************************************************
 *
 * Kernel Driver assertion detailed dictionary keys
 *
 * Keys decode the Array &amp; dictionary data structure under IOPMrootDomain property 
 *  kIOPMAssertionsDriverKey.
 *
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDriverAssertionIDKey</span>               <span class="enscript-string">&quot;ID&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDriverAssertionCreatedTimeKey</span>      <span class="enscript-string">&quot;CreatedTime&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDriverAssertionModifiedTimeKey</span>     <span class="enscript-string">&quot;ModifiedTime&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDriverAssertionOwnerStringKey</span>      <span class="enscript-string">&quot;Owner&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDriverAssertionOwnerServiceKey</span>     <span class="enscript-string">&quot;ServicePtr&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDriverAssertionRegistryEntryIDKey</span>  <span class="enscript-string">&quot;RegistryEntryID&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDriverAssertionLevelKey</span>            <span class="enscript-string">&quot;Level&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDriverAssertionAssertedKey</span>         <span class="enscript-string">&quot;Assertions&quot;</span>

<span class="enscript-comment">/*******************************************************************************
 *
 * Root Domain general interest messages
 *
 * Available by registering for interest type 'gIOGeneralInterest' 
 * on IOPMrootDomain. 
 *
 ******************************************************************************/</span>

<span class="enscript-comment">/* kIOPMMessageClamshellStateChange
 * Delivered as a general interest notification on the IOPMrootDomain
 * IOPMrootDomain sends this message when state of either AppleClamshellState
 * or AppleClamshellCausesSleep changes. If this clamshell change results in
 * a sleep, the sleep will initiate soon AFTER delivery of this message.
 * The state of both variables is encoded in a bitfield argument sent with
 * the message. Check bits 0 and 1 using kClamshellStateBit &amp; kClamshellSleepBit
 */</span>
<span class="enscript-type">enum</span> {
    kClamshellStateBit = (1 &lt;&lt; 0),
    kClamshellSleepBit = (1 &lt;&lt; 1)
};

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMMessageClamshellStateChange</span>   \
                iokit_family_msg(sub_iokit_powermanagement, 0x100)

<span class="enscript-comment">/* kIOPMMessageFeatureChange
 * Delivered when the set of supported features (&quot;Supported Features&quot; dictionary
 * under IOPMrootDomain registry) changes in some way. Typically addition or
 * removal of a supported feature.
 * RootDomain passes no argument with this message.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMMessageFeatureChange</span>           \
                iokit_family_msg(sub_iokit_powermanagement, 0x110)

<span class="enscript-comment">/* kIOPMMessageInflowDisableCancelled
 * The battery has drained completely to its &quot;Fully Discharged&quot; state. 
 * If a user process has disabled battery inflow for battery 
 * calibration, we forcibly re-enable Inflow at this point.
 * If inflow HAS been forcibly re-enabled, bit 0
 * (kInflowForciblyEnabledBit) will be set.
 */</span>
<span class="enscript-type">enum</span> {
    kInflowForciblyEnabledBit = (1 &lt;&lt; 0)
};

<span class="enscript-comment">/* kIOPMMessageInternalBatteryFullyDischarged
 * The battery has drained completely to its &quot;Fully Discharged&quot; state. 
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMMessageInternalBatteryFullyDischarged</span>  \
                iokit_family_msg(sub_iokit_powermanagement, 0x120)

<span class="enscript-comment">/* kIOPMMessageSystemPowerEventOccurred
 * Some major system thermal property has changed, and interested clients may
 * modify their behavior.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMMessageSystemPowerEventOccurred</span>  \
                iokit_family_msg(sub_iokit_powermanagement, 0x130)

<span class="enscript-comment">/* kIOPMMessageSleepWakeUUIDChange
 * Either a new SleepWakeUUID has been specified at the beginning of a sleep,
 * or we're removing the existing property upon completion of a wakeup.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMMessageSleepWakeUUIDChange</span>  \
                iokit_family_msg(sub_iokit_powermanagement, 0x140)
                
<span class="enscript-comment">/* kIOPMMessageSleepWakeUUIDSet
 * Argument accompanying the kIOPMMessageSleepWakeUUIDChange notification when 
 * a new UUID has been specified.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMMessageSleepWakeUUIDSet</span>                    ((void *)1)

<span class="enscript-comment">/* kIOPMMessageSleepWakeUUIDCleared
 * Argument accompanying the kIOPMMessageSleepWakeUUIDChange notification when 
 * the current UUID has been removed.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMMessageSleepWakeUUIDCleared</span>                ((void *)0)

<span class="enscript-comment">/*! kIOPMMessageDriverAssertionsChanged
 *  Sent when kernel PM driver assertions have changed.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMMessageDriverAssertionsChanged</span>  \
                iokit_family_msg(sub_iokit_powermanagement, 0x150)

<span class="enscript-comment">/*! kIOPMMessageDarkWakeThermalEmergency
 * Sent when machine becomes unsustainably warm in DarkWake.
 * Kernel PM might choose to put the machine back to sleep right after.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMMessageDarkWakeThermalEmergency</span> \
                iokit_family_msg(sub_iokit_powermanagement, 0x160)

<span class="enscript-comment">/*******************************************************************************
 *
 * Power commands issued to root domain
 * Use with IOPMrootDomain::receivePowerNotification()
 *
 * These commands are issued from system drivers only:
 *      ApplePMU, AppleSMU, IOGraphics, AppleACPIFamily
 *
 * TODO: deprecate kIOPMAllowSleep and kIOPMPreventSleep
 ******************************************************************************/</span>
<span class="enscript-type">enum</span> {
  kIOPMSleepNow                 = (1&lt;&lt;0),  <span class="enscript-comment">// put machine to sleep now
</span>  kIOPMAllowSleep               = (1&lt;&lt;1),  <span class="enscript-comment">// allow idle sleep
</span>  kIOPMPreventSleep             = (1&lt;&lt;2),  <span class="enscript-comment">// do not allow idle sleep
</span>  kIOPMPowerButton              = (1&lt;&lt;3),  <span class="enscript-comment">// power button was pressed
</span>  kIOPMClamshellClosed          = (1&lt;&lt;4),  <span class="enscript-comment">// clamshell was closed
</span>  kIOPMPowerEmergency           = (1&lt;&lt;5),  <span class="enscript-comment">// battery dangerously low
</span>  kIOPMDisableClamshell         = (1&lt;&lt;6),  <span class="enscript-comment">// do not sleep on clamshell closure
</span>  kIOPMEnableClamshell          = (1&lt;&lt;7),  <span class="enscript-comment">// sleep on clamshell closure
</span>  kIOPMProcessorSpeedChange     = (1&lt;&lt;8),  <span class="enscript-comment">// change the processor speed
</span>  kIOPMOverTemp                 = (1&lt;&lt;9),  <span class="enscript-comment">// system dangerously hot
</span>  kIOPMClamshellOpened          = (1&lt;&lt;10), <span class="enscript-comment">// clamshell was opened
</span>  kIOPMDWOverTemp               = (1&lt;&lt;11)  <span class="enscript-comment">// DarkWake thermal limits exceeded.
</span>};


<span class="enscript-comment">/*******************************************************************************
 *
 * Power Management Return Codes
 *
 ******************************************************************************/</span>
<span class="enscript-type">enum</span> {
    kIOPMNoErr                  = 0,

    <span class="enscript-comment">// Returned by driver's setPowerState(), powerStateWillChangeTo(),
</span>    <span class="enscript-comment">// powerStateDidChangeTo(), or acknowledgeSetPowerState() to
</span>    <span class="enscript-comment">// implicitly acknowledge power change upon function return.
</span>    kIOPMAckImplied             = 0,

    <span class="enscript-comment">// Deprecated
</span>    kIOPMWillAckLater           = 1,

    <span class="enscript-comment">// Returned by requestPowerDomainState() to indicate
</span>    <span class="enscript-comment">// unrecognized specification parameter.
</span>    kIOPMBadSpecification       = 4,

    <span class="enscript-comment">// Returned by requestPowerDomainState() to indicate
</span>    <span class="enscript-comment">// no power state matches search specification.
</span>    kIOPMNoSuchState            = 5,

    <span class="enscript-comment">// Deprecated
</span>    kIOPMCannotRaisePower       = 6,

    <span class="enscript-comment">// Deprecated
</span>    kIOPMParameterError         = 7,

    <span class="enscript-comment">// Returned when power management state is accessed
</span>    <span class="enscript-comment">// before driver has called PMinit().
</span>    kIOPMNotYetInitialized      = 8,

    <span class="enscript-comment">// And the old constants; deprecated
</span>    IOPMNoErr = kIOPMNoErr,
    IOPMAckImplied = kIOPMAckImplied, 
    IOPMWillAckLater = kIOPMWillAckLater,
    IOPMBadSpecification = kIOPMBadSpecification,
    IOPMNoSuchState = kIOPMNoSuchState,
    IOPMCannotRaisePower = kIOPMCannotRaisePower,
    IOPMParameterError = kIOPMParameterError,
    IOPMNotYetInitialized = kIOPMNotYetInitialized
};


<span class="enscript-comment">// IOPMPowerSource class descriptive strings
</span><span class="enscript-comment">// Power Source state is published as properties to the IORegistry under these 
</span><span class="enscript-comment">// keys.
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSExternalConnectedKey</span>                 <span class="enscript-string">&quot;ExternalConnected&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSExternalChargeCapableKey</span>             <span class="enscript-string">&quot;ExternalChargeCapable&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSBatteryInstalledKey</span>                  <span class="enscript-string">&quot;BatteryInstalled&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSIsChargingKey</span>                        <span class="enscript-string">&quot;IsCharging&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMFullyChargedKey</span>                        <span class="enscript-string">&quot;FullyCharged&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAtWarnLevelKey</span>                       <span class="enscript-string">&quot;AtWarnLevel&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAtCriticalLevelKey</span>                   <span class="enscript-string">&quot;AtCriticalLevel&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSCurrentCapacityKey</span>                   <span class="enscript-string">&quot;CurrentCapacity&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSMaxCapacityKey</span>                       <span class="enscript-string">&quot;MaxCapacity&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSDesignCapacityKey</span>                    <span class="enscript-string">&quot;DesignCapacity&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSTimeRemainingKey</span>                     <span class="enscript-string">&quot;TimeRemaining&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAmperageKey</span>                          <span class="enscript-string">&quot;Amperage&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSVoltageKey</span>                           <span class="enscript-string">&quot;Voltage&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSCycleCountKey</span>                        <span class="enscript-string">&quot;CycleCount&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSMaxErrKey</span>                            <span class="enscript-string">&quot;MaxErr&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAdapterInfoKey</span>                       <span class="enscript-string">&quot;AdapterInfo&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSLocationKey</span>                          <span class="enscript-string">&quot;Location&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSErrorConditionKey</span>                    <span class="enscript-string">&quot;ErrorCondition&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSManufacturerKey</span>                      <span class="enscript-string">&quot;Manufacturer&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSManufactureDateKey</span>                   <span class="enscript-string">&quot;ManufactureDate&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSModelKey</span>                             <span class="enscript-string">&quot;Model&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSSerialKey</span>                            <span class="enscript-string">&quot;Serial&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMDeviceNameKey</span>                          <span class="enscript-string">&quot;DeviceName&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSLegacyBatteryInfoKey</span>                 <span class="enscript-string">&quot;LegacyBatteryInfo&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSBatteryHealthKey</span>                     <span class="enscript-string">&quot;BatteryHealth&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSHealthConfidenceKey</span>                  <span class="enscript-string">&quot;HealthConfidence&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSCapacityEstimatedKey</span>	                <span class="enscript-string">&quot;CapacityEstimated&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSBatteryChargeStatusKey</span>               <span class="enscript-string">&quot;ChargeStatus&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSBatteryTemperatureKey</span>                <span class="enscript-string">&quot;Temperature&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAdapterDetailsKey</span>		    <span class="enscript-string">&quot;AdapterDetails&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSChargerConfigurationKey</span>		    <span class="enscript-string">&quot;ChargerConfiguration&quot;</span>

<span class="enscript-comment">// kIOPMPSBatteryChargeStatusKey may have one of the following values, or may have
</span><span class="enscript-comment">// no value. If kIOPMBatteryChargeStatusKey has a NULL value (or no value) associated with it
</span><span class="enscript-comment">// then charge is proceeding normally. If one of these battery charge status reasons is listed,
</span><span class="enscript-comment">// then the charge may have been interrupted.
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMBatteryChargeStatusTooHot</span>              <span class="enscript-string">&quot;HighTemperature&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMBatteryChargeStatusTooCold</span>             <span class="enscript-string">&quot;LowTemperature&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMBatteryChargeStatusTooHotOrCold</span>	    <span class="enscript-string">&quot;HighOrLowTemperature&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMBatteryChargeStatusGradient</span>            <span class="enscript-string">&quot;BatteryTemperatureGradient&quot;</span>

<span class="enscript-comment">// Definitions for battery location, in case of multiple batteries.
</span><span class="enscript-comment">// A location of 0 is unspecified
</span><span class="enscript-comment">// Location is undefined for single battery systems
</span><span class="enscript-type">enum</span> {
    kIOPMPSLocationLeft = 1001,
    kIOPMPSLocationRight = 1002
};

<span class="enscript-comment">// Battery quality health types, specified by BatteryHealth and HealthConfidence
</span><span class="enscript-comment">// properties in an IOPMPowerSource battery kext.
</span><span class="enscript-type">enum</span> {
    kIOPMUndefinedValue = 0,
    kIOPMPoorValue      = 1,
    kIOPMFairValue      = 2,
    kIOPMGoodValue      = 3
};

<span class="enscript-comment">// Keys for kIOPMPSAdapterDetailsKey dictionary
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAdapterDetailsIDKey</span>		    <span class="enscript-string">&quot;AdapterID&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAdapterDetailsWattsKey</span>		    <span class="enscript-string">&quot;Watts&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAdapterDetailsRevisionKey</span>	    <span class="enscript-string">&quot;AdapterRevision&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAdapterDetailsSerialNumberKey</span>	    <span class="enscript-string">&quot;SerialNumber&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAdapterDetailsFamilyKey</span>		    <span class="enscript-string">&quot;FamilyCode&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAdapterDetailsAmperageKey</span>	    <span class="enscript-string">&quot;Amperage&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAdapterDetailsDescriptionKey</span>	    <span class="enscript-string">&quot;Description&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSAdapterDetailsPMUConfigurationKey</span>    <span class="enscript-string">&quot;PMUConfiguration&quot;</span>

<span class="enscript-comment">// Battery's time remaining estimate is invalid this long (seconds) after a wake
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSInvalidWakeSecondsKey</span>           <span class="enscript-string">&quot;BatteryInvalidWakeSeconds&quot;</span>

<span class="enscript-comment">// Battery must wait this long (seconds) after being completely charged before
</span><span class="enscript-comment">// the battery is settled.
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSPostChargeWaitSecondsKey</span>        <span class="enscript-string">&quot;PostChargeWaitSeconds&quot;</span>

<span class="enscript-comment">// Battery must wait this long (seconds) after being completely discharged 
</span><span class="enscript-comment">// before the battery is settled.
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMPSPostDishargeWaitSecondsKey</span>      <span class="enscript-string">&quot;PostDischargeWaitSeconds&quot;</span>


<span class="enscript-comment">/* CPU Power Management status keys
 * Pass as arguments to IOPMrootDomain::systemPowerEventOccurred
 * Or as arguments to IOPMSystemPowerEventOccurred()
 * Or to decode the dictionary obtained from IOPMCopyCPUPowerStatus()
 * These keys reflect restrictions placed on the CPU by the system
 * to bring the CPU's power consumption within allowable thermal and 
 * power constraints.
 */</span>


<span class="enscript-comment">/* kIOPMGraphicsPowerLimitsKey
 *   The key representing the dictionary of graphics power limits.
 *   The dictionary contains the other kIOPMCPUPower keys &amp; their associated
 *   values (e.g. Speed limit, Processor Count, and Schedule limits).
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMGraphicsPowerLimitsKey</span>                     <span class="enscript-string">&quot;Graphics_Power_Limits&quot;</span>

<span class="enscript-comment">/* kIOPMGraphicsPowerLimitPerformanceKey
 *   The key representing the percent of overall performance made available
 *   by the graphics chip as a percentage (integer 0 - 100).
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMGraphicsPowerLimitPerformanceKey</span>           <span class="enscript-string">&quot;Graphics_Power_Performance&quot;</span>



<span class="enscript-comment">/* kIOPMCPUPowerLimitsKey
 *   The key representing the dictionary of CPU Power Limits.
 *   The dictionary contains the other kIOPMCPUPower keys &amp; their associated
 *   values (e.g. Speed limit, Processor Count, and Schedule limits).
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMCPUPowerLimitsKey</span>                          <span class="enscript-string">&quot;CPU_Power_Limits&quot;</span>

<span class="enscript-comment">/* kIOPMCPUPowerLimitProcessorSpeedKey defines the speed &amp; voltage limits placed 
 *   on the CPU.
 *   Represented as a percentage (0-100) of maximum CPU speed.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMCPUPowerLimitProcessorSpeedKey</span>             <span class="enscript-string">&quot;CPU_Speed_Limit&quot;</span>

<span class="enscript-comment">/* kIOPMCPUPowerLimitProcessorCountKey reflects how many, if any, CPUs have been
 *   taken offline. Represented as an integer number of CPUs (0 - Max CPUs).
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMCPUPowerLimitProcessorCountKey</span>             <span class="enscript-string">&quot;CPU_Available_CPUs&quot;</span>

<span class="enscript-comment">/* kIOPMCPUPowerLimitSchedulerTimeKey represents the percentage (0-100) of CPU time 
 *   available. 100% at normal operation. The OS may limit this time for a percentage
 *   less than 100%.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMCPUPowerLimitSchedulerTimeKey</span>              <span class="enscript-string">&quot;CPU_Scheduler_Limit&quot;</span>


<span class="enscript-comment">/* Thermal Level Warning Key
 * Indicates the thermal constraints placed on the system. This value may 
 * cause clients to action to consume fewer system resources.
 * The value associated with this warning is defined by the platform.
 */</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMThermalLevelWarningKey</span>                     <span class="enscript-string">&quot;Thermal_Level_Warning&quot;</span>

<span class="enscript-comment">/* Thermal Warning Level values
 *      kIOPMThermalLevelNormal   - under normal operating conditions
 *      kIOPMThermalLevelDanger   - thermal pressure may cause system slowdown
 *      kIOPMThermalLevelCritical - thermal conditions may cause imminent shutdown
 *
 * The platform may define additional thermal levels if necessary.
 * Platform specific values are defined from 100 and above
 */</span>
<span class="enscript-type">enum</span> {
  kIOPMThermalLevelNormal    = 0,
  kIOPMThermalLevelDanger    = 5,
  kIOPMThermalLevelCritical  = 10,

  kIOPMThermalLevelWarning = 100,
  kIOPMThermalLevelTrap    = 110,

  kIOPMThermalLevelUnknown = 255,
};

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMThermalWarningLevelNormal</span> kIOPMThermalLevelNormal
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMThermalWarningLevelDanger</span> kIOPMThermalLevelWarning
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMThermalWarningLevelCrisis</span> kIOPMThermalLevelCritical

<span class="enscript-comment">// PM Settings Controller setting types
</span><span class="enscript-comment">// Settings types used primarily with:
</span><span class="enscript-comment">//      IOPMrootDomain::registerPMSettingController
</span><span class="enscript-comment">// The values are identical to the similarly named keys for use in user space
</span><span class="enscript-comment">// PM settings work. Those keys are defined in IOPMLibPrivate.h.
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingWakeOnRingKey</span>                   <span class="enscript-string">&quot;Wake On Modem Ring&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingRestartOnPowerLossKey</span>           <span class="enscript-string">&quot;Automatic Restart On Power Loss&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingWakeOnACChangeKey</span>               <span class="enscript-string">&quot;Wake On AC Change&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingSleepOnPowerButtonKey</span>           <span class="enscript-string">&quot;Sleep On Power Button&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingWakeOnClamshellKey</span>              <span class="enscript-string">&quot;Wake On Clamshell Open&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingReduceBrightnessKey</span>             <span class="enscript-string">&quot;ReduceBrightness&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingDisplaySleepUsesDimKey</span>          <span class="enscript-string">&quot;Display Sleep Uses Dim&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingTimeZoneOffsetKey</span>               <span class="enscript-string">&quot;TimeZoneOffsetSeconds&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingMobileMotionModuleKey</span>           <span class="enscript-string">&quot;MobileMotionModule&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingGraphicsSwitchKey</span>               <span class="enscript-string">&quot;GPUSwitch&quot;</span>

<span class="enscript-comment">// Setting controlling drivers can register to receive scheduled wake data
</span><span class="enscript-comment">// Either in &quot;CF seconds&quot; type, or structured calendar data in a formatted
</span><span class="enscript-comment">// IOPMCalendarStruct defined below.
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingAutoWakeSecondsKey</span>              <span class="enscript-string">&quot;wake&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingAutoWakeCalendarKey</span>             <span class="enscript-string">&quot;WakeByCalendarDate&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingAutoPowerSecondsKey</span>             <span class="enscript-string">&quot;poweron&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingAutoPowerCalendarKey</span>            <span class="enscript-string">&quot;PowerByCalendarDate&quot;</span>

<span class="enscript-comment">// Debug seconds auto wake
</span><span class="enscript-comment">// Used by sleep cycling debug tools
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingDebugWakeRelativeKey</span>            <span class="enscript-string">&quot;WakeRelativeToSleep&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingDebugPowerRelativeKey</span>           <span class="enscript-string">&quot;PowerRelativeToShutdown&quot;</span>

<span class="enscript-comment">// Maintenance wake calendar.
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMSettingMaintenanceWakeCalendarKey</span>      <span class="enscript-string">&quot;MaintenanceWakeCalendarDate&quot;</span>


<span class="enscript-type">struct</span> IOPMCalendarStruct {
    UInt32      year;
    UInt8       month;
    UInt8       day;
    UInt8       hour;
    UInt8       minute;
    UInt8       second;
    UInt8       selector;
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> IOPMCalendarStruct IOPMCalendarStruct;

<span class="enscript-comment">// SetAggressiveness types
</span><span class="enscript-type">enum</span> {
    kPMGeneralAggressiveness = 0,
    kPMMinutesToDim,
    kPMMinutesToSpinDown,
    kPMMinutesToSleep,
    kPMEthernetWakeOnLANSettings,
    kPMSetProcessorSpeed,
    kPMPowerSource,
    kPMMotionSensor,
    kPMLastAggressivenessType
};
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kMaxType</span> (kPMLastAggressivenessType-1)

<span class="enscript-comment">// SetAggressiveness values for the kPMPowerSource aggressiveness type
</span><span class="enscript-type">enum</span> {
    kIOPMInternalPower = 1,
    kIOPMExternalPower
};

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOREMSleepEnabledKey</span>               <span class="enscript-string">&quot;REMSleepEnabled&quot;</span>

<span class="enscript-comment">// Strings for deciphering the dictionary returned from IOPMCopyBatteryInfo
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOBatteryInfoKey</span>                   <span class="enscript-string">&quot;IOBatteryInfo&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOBatteryCurrentChargeKey</span>          <span class="enscript-string">&quot;Current&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOBatteryCapacityKey</span>               <span class="enscript-string">&quot;Capacity&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOBatteryFlagsKey</span>                  <span class="enscript-string">&quot;Flags&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOBatteryVoltageKey</span>                <span class="enscript-string">&quot;Voltage&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOBatteryAmperageKey</span>               <span class="enscript-string">&quot;Amperage&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOBatteryCycleCountKey</span>             <span class="enscript-string">&quot;Cycle Count&quot;</span>

<span class="enscript-type">enum</span> {
    kIOBatteryInstalled         = (1 &lt;&lt; 2),
    kIOBatteryCharge            = (1 &lt;&lt; 1),
    kIOBatteryChargerConnect    = (1 &lt;&lt; 0)
};

<span class="enscript-comment">// Private power management message indicating battery data has changed
</span><span class="enscript-comment">// Indicates new data resides in the IORegistry
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMMessageBatteryStatusHasChanged</span>         iokit_family_msg(sub_iokit_pmu, 0x100)

<span class="enscript-comment">// Apple private Legacy messages for re-routing AutoWake and AutoPower messages to the PMU
</span><span class="enscript-comment">// through newer user space IOPMSchedulePowerEvent API
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMUMessageLegacyAutoWake</span>                 iokit_family_msg(sub_iokit_pmu, 0x200)
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOPMUMessageLegacyAutoPower</span>                iokit_family_msg(sub_iokit_pmu, 0x210)

<span class="enscript-comment">// For use with IOPMPowerSource bFlags
</span>#<span class="enscript-reference">define</span> <span class="enscript-variable-name">IOPM_POWER_SOURCE_REV</span>   2
<span class="enscript-type">enum</span> {
  kIOPMACInstalled      = kIOBatteryChargerConnect,
  kIOPMBatteryCharging  = kIOBatteryCharge,
  kIOPMBatteryInstalled = kIOBatteryInstalled,
  kIOPMUPSInstalled     = (1&lt;&lt;3),
  kIOPMBatteryAtWarn    = (1&lt;&lt;4),
  kIOPMBatteryDepleted  = (1&lt;&lt;5),
  kIOPMACnoChargeCapability = (1&lt;&lt;6),     <span class="enscript-comment">// AC adapter cannot charge battery
</span>  kIOPMRawLowBattery    = (1&lt;&lt;7),         <span class="enscript-comment">// used only by  Platform Expert
</span>  kIOPMForceLowSpeed    = (1&lt;&lt;8),         <span class="enscript-comment">// set by Platfm Expert, chk'd by Pwr Plugin
</span>  kIOPMClosedClamshell  = (1&lt;&lt;9),         <span class="enscript-comment">// set by PMU - reflects state of the clamshell
</span>  kIOPMClamshellStateOnWake = (1&lt;&lt;10)     <span class="enscript-comment">// used only by Platform Expert
</span>};

<span class="enscript-comment">// **********************************************
</span><span class="enscript-comment">// Internal power management data structures
</span><span class="enscript-comment">// **********************************************
</span>
#<span class="enscript-reference">if</span> <span class="enscript-variable-name">KERNEL</span> &amp;&amp; <span class="enscript-variable-name">__cplusplus</span>
class IOService;

<span class="enscript-type">enum</span> {
    kIOPowerEmergencyLevel = 1000
};

<span class="enscript-type">enum</span> {
    kIOPMSubclassPolicy,
    kIOPMSuperclassPolicy1
#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL_PRIVATE</span>
    , kIOPMActivityTickleTypeAdvisory = 128
#<span class="enscript-reference">endif</span>
};

<span class="enscript-type">struct</span> stateChangeNote {
    IOPMPowerFlags    stateFlags;
    <span class="enscript-type">unsigned</span> <span class="enscript-type">long</span>    stateNum;
    <span class="enscript-type">void</span> *         powerRef;
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> stateChangeNote stateChangeNote;

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL &amp;&amp; __cplusplus */</span>
<span class="enscript-type">struct</span> IOPowerStateChangeNotification {
    <span class="enscript-type">void</span> *        powerRef;
    <span class="enscript-type">unsigned</span> <span class="enscript-type">long</span>    returnValue;
    <span class="enscript-type">unsigned</span> <span class="enscript-type">long</span>    stateNumber;
    IOPMPowerFlags    stateFlags;
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> IOPowerStateChangeNotification IOPowerStateChangeNotification;
<span class="enscript-type">typedef</span> IOPowerStateChangeNotification sleepWakeNote;

<span class="enscript-comment">/*! @struct IOPMSystemCapabilityChangeParameters
    @abstract A structure describing a system capability change.
    @discussion A system capability change is a system level transition from a set
        of system capabilities to a new set of system capabilities. Power management
        sends a &lt;code&gt;kIOMessageSystemCapabilityChange&lt;/code&gt; message and provides
        this structure as the message data (by reference) to
        &lt;code&gt;gIOPriorityPowerStateInterest&lt;/code&gt; clients when system capability
        changes.
    @field notifyRef An identifier for this message notification. Clients with pending
        I/O can signal completion by calling &lt;code&gt;allowPowerChange()&lt;/code&gt; with this
        value as the argument. Clients that are able to process the notification
        synchronously should ignore this field.
    @field maxWaitForReply A return value to the caller indicating the maximum time in
        microseconds to wait for the &lt;code&gt;allowPowerChange()&lt;/code&gt; call. The default
        value is zero, which indicates the client processing has finished, and power
        management should not wait for an &lt;code&gt;allowPowerChange()&lt;/code&gt; call.
    @field changeFlags Flags will be set to indicate whether the notification precedes
        the capability change (&lt;code&gt;kIOPMSystemCapabilityWillChange&lt;/code&gt;), or after
        the capability change has occurred (&lt;code&gt;kIOPMSystemCapabilityDidChange&lt;/code&gt;).
    @field __reserved1 Set to zero.
    @field fromCapabilities The system capabilities at the start of the transition.
    @field toCapabilities The system capabilities at the end of the transition.
    @field __reserved2 Set to zero.
 */</span>
<span class="enscript-type">struct</span> IOPMSystemCapabilityChangeParameters {
    uint32_t    notifyRef;
    uint32_t    maxWaitForReply;
    uint32_t    changeFlags;
    uint32_t    __reserved1;
    uint32_t    fromCapabilities;
    uint32_t    toCapabilities;
    uint32_t    __reserved2[4];
};

<span class="enscript-comment">/*! @enum IOPMSystemCapabilityChangeFlags
    @constant kIOPMSystemCapabilityWillChange Indicates the system capability will change.
    @constant kIOPMSystemCapabilityDidChange Indicates the system capability has changed.
*/</span>
<span class="enscript-type">enum</span> {
    kIOPMSystemCapabilityWillChange = 0x01,
    kIOPMSystemCapabilityDidChange  = 0x02
};

<span class="enscript-type">enum</span> {
    kIOPMSystemCapabilityCPU        = 0x01,
    kIOPMSystemCapabilityGraphics   = 0x02,
    kIOPMSystemCapabilityAudio      = 0x04,
    kIOPMSystemCapabilityNetwork    = 0x08
};

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* ! _IOKIT_IOPM_H */</span>
</pre>
<hr />
</body></html>