<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>IOHibernatePrivate.h</title>
<style type="text/css">
.enscript-comment { font-style: italic; color: rgb(178,34,34); }
.enscript-function-name { font-weight: bold; color: rgb(0,0,255); }
.enscript-variable-name { font-weight: bold; color: rgb(184,134,11); }
.enscript-keyword { font-weight: bold; color: rgb(160,32,240); }
.enscript-reference { font-weight: bold; color: rgb(95,158,160); }
.enscript-string { font-weight: bold; color: rgb(188,143,143); }
.enscript-builtin { font-weight: bold; color: rgb(218,112,214); }
.enscript-type { font-weight: bold; color: rgb(34,139,34); }
.enscript-highlight { text-decoration: underline; color: 0; }
</style>
</head>
<body id="top">
<h1 style="margin:8px;" id="f1">IOHibernatePrivate.h&nbsp;&nbsp;&nbsp;<span style="font-weight: normal; font-size: 0.5em;">[<a href="?txt">plain text</a>]</span></h1>
<hr/>
<div></div>
<pre>
<span class="enscript-comment">/*
 * Copyright (c) 2004 Apple Computer, Inc. All rights reserved.
 *
 * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
 * 
 * This file contains Original Code and/or Modifications of Original Code
 * as defined in and that are subject to the Apple Public Source License
 * Version 2.0 (the 'License'). You may not use this file except in
 * compliance with the License. The rights granted to you under the License
 * may not be used to create, or enable the creation or redistribution of,
 * unlawful or unlicensed copies of an Apple operating system, or to
 * circumvent, violate, or enable the circumvention or violation of, any
 * terms of an Apple operating system software license agreement.
 * 
 * Please obtain a copy of the License at
 * <a href="http://www.opensource.apple.com/apsl/">http://www.opensource.apple.com/apsl/</a> and read it before using this file.
 * 
 * The Original Code and all software distributed under the License are
 * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 * Please see the License for the specific language governing rights and
 * limitations under the License.
 * 
 * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
 */</span>

#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;stdint.h&gt;</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__cplusplus</span>
<span class="enscript-type">extern</span> <span class="enscript-string">&quot;C&quot;</span> {
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;libkern/crypto/aes.h&gt;</span>
#<span class="enscript-reference">include</span> <span class="enscript-string">&lt;uuid/uuid.h&gt;</span>
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">__IOKIT_IOHIBERNATEPRIVATE_H</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">__IOKIT_IOHIBERNATEPRIVATE_H</span>

<span class="enscript-type">struct</span> IOPolledFileExtent
{
    uint64_t	start;
    uint64_t	length;
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> IOPolledFileExtent IOPolledFileExtent;

<span class="enscript-type">struct</span> IOHibernateImageHeader
{
    uint64_t	imageSize;
    uint64_t	image1Size;
    
    uint32_t	restore1CodePhysPage;
    uint32_t    reserved1;
    uint64_t	restore1CodeVirt;
    uint32_t	restore1PageCount;
    uint32_t	restore1CodeOffset;
    uint32_t	restore1StackOffset;
    
    uint32_t	pageCount;
    uint32_t	bitmapSize;

    uint32_t	restore1Sum;
    uint32_t	image1Sum;
    uint32_t	image2Sum;

    uint32_t	actualRestore1Sum;
    uint32_t	actualImage1Sum;
    uint32_t	actualImage2Sum;

    uint32_t	actualUncompressedPages;
    uint32_t	conflictCount;
    uint32_t	nextFree;

    uint32_t	signature;
    uint32_t	processorFlags;

    uint32_t    runtimePages;
    uint32_t    runtimePageCount;
    uint64_t    runtimeVirtualPages __attribute__ ((packed));

    uint32_t    performanceDataStart;
    uint32_t    performanceDataSize;
    
    uint64_t	encryptStart __attribute__ ((packed));
    uint64_t	machineSignature __attribute__ ((packed));

    uint32_t    previewSize;
    uint32_t    previewPageListSize;

    uint32_t	diag[4];

    uint32_t    handoffPages;
    uint32_t    handoffPageCount;

    uint32_t    systemTableOffset;

    uint32_t	debugFlags;
    uint32_t	options;
    uint32_t	sleepTime;
    uint32_t    compression;

    uint32_t	reserved[58];		<span class="enscript-comment">// make sizeof == 512
</span>    uint32_t	booterTime0;
    uint32_t	booterTime1;
    uint32_t	booterTime2;

    uint32_t	booterStart;
    uint32_t	smcStart;
    uint32_t	connectDisplayTime;
    uint32_t	splashTime;
    uint32_t	booterTime;
    uint32_t	trampolineTime;

    uint64_t	encryptEnd __attribute__ ((packed));
    uint64_t	deviceBase __attribute__ ((packed));
    uint32_t	deviceBlockSize;

    uint32_t		fileExtentMapSize;
    IOPolledFileExtent	fileExtentMap[2];
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> IOHibernateImageHeader IOHibernateImageHeader;

<span class="enscript-type">enum</span>
{
    kIOHibernateDebugRestoreLogs = 0x00000001
};

<span class="enscript-comment">// options &amp; IOHibernateOptions property
</span><span class="enscript-type">enum</span>
{
    kIOHibernateOptionSSD           = 0x00000001,
    kIOHibernateOptionColor         = 0x00000002,
    kIOHibernateOptionProgress      = 0x00000004,
    kIOHibernateOptionDarkWake      = 0x00000008,
};

<span class="enscript-type">struct</span> hibernate_bitmap_t
{
    uint32_t	first_page;
    uint32_t	last_page;
    uint32_t	bitmapwords;
    uint32_t	bitmap[0];
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> hibernate_bitmap_t hibernate_bitmap_t;

<span class="enscript-type">struct</span> hibernate_page_list_t
{
    uint32_t		  list_size;
    uint32_t		  page_count;
    uint32_t		  bank_count;
    hibernate_bitmap_t    bank_bitmap[0];
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> hibernate_page_list_t hibernate_page_list_t;

#<span class="enscript-reference">if</span> <span class="enscript-reference">defined</span>(<span class="enscript-variable-name">_AES_H</span>)

<span class="enscript-type">struct</span> hibernate_cryptwakevars_t
{
    uint8_t aes_iv[AES_BLOCK_SIZE];
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> hibernate_cryptwakevars_t hibernate_cryptwakevars_t;

<span class="enscript-type">struct</span> hibernate_cryptvars_t
{
    uint8_t aes_iv[AES_BLOCK_SIZE];
    aes_ctx ctx;
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> hibernate_cryptvars_t hibernate_cryptvars_t;

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* defined(_AES_H) */</span>

<span class="enscript-type">enum</span> 
{
    kIOHibernateHandoffType                 = 0x686f0000,
    kIOHibernateHandoffTypeEnd              = kIOHibernateHandoffType + 0,
    kIOHibernateHandoffTypeGraphicsInfo     = kIOHibernateHandoffType + 1,
    kIOHibernateHandoffTypeCryptVars        = kIOHibernateHandoffType + 2,
    kIOHibernateHandoffTypeMemoryMap        = kIOHibernateHandoffType + 3,
    kIOHibernateHandoffTypeDeviceTree       = kIOHibernateHandoffType + 4,
    kIOHibernateHandoffTypeDeviceProperties = kIOHibernateHandoffType + 5,
    kIOHibernateHandoffTypeKeyStore         = kIOHibernateHandoffType + 6,
};

<span class="enscript-type">struct</span> IOHibernateHandoff
{
    uint32_t type;
    uint32_t bytecount;
    uint8_t  data[];
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> IOHibernateHandoff IOHibernateHandoff;

<span class="enscript-type">enum</span> 
{
    kIOHibernateProgressCount         = 19,
    kIOHibernateProgressWidth         = 7,
    kIOHibernateProgressHeight        = 16,
    kIOHibernateProgressSpacing       = 3,
    kIOHibernateProgressOriginY       = 81,

    kIOHibernateProgressSaveUnderSize = 2*5+14*2,

    kIOHibernateProgressLightGray     = 230,
    kIOHibernateProgressMidGray       = 174,
    kIOHibernateProgressDarkGray      = 92
};

<span class="enscript-type">enum</span>
{
    kIOHibernatePostWriteSleep   = 0,
    kIOHibernatePostWriteWake    = 1,
    kIOHibernatePostWriteHalt    = 2,
    kIOHibernatePostWriteRestart = 3
};


<span class="enscript-type">struct</span> hibernate_graphics_t
{
    uint32_t physicalAddress;	<span class="enscript-comment">// Base address of video memory
</span>    int32_t  gfxStatus;         <span class="enscript-comment">// EFI config restore status
</span>    uint32_t rowBytes;   		<span class="enscript-comment">// Number of bytes per pixel row
</span>    uint32_t width;      		<span class="enscript-comment">// Width
</span>    uint32_t height;     		<span class="enscript-comment">// Height
</span>    uint32_t depth;      		<span class="enscript-comment">// Pixel Depth
</span>
    uint8_t progressSaveUnder[kIOHibernateProgressCount][kIOHibernateProgressSaveUnderSize];
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> hibernate_graphics_t hibernate_graphics_t;

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">DECLARE_IOHIBERNATEPROGRESSALPHA</span>				\
<span class="enscript-type">static</span> <span class="enscript-type">const</span> uint8_t gIOHibernateProgressAlpha			\
[kIOHibernateProgressHeight][kIOHibernateProgressWidth] = 	\
{								\
    { 0x00,0x63,0xd8,0xf0,0xd8,0x63,0x00 },			\
    { 0x51,0xff,0xff,0xff,0xff,0xff,0x51 },			\
    { 0xae,0xff,0xff,0xff,0xff,0xff,0xae },			\
    { 0xc3,0xff,0xff,0xff,0xff,0xff,0xc3 },			\
    { 0xc3,0xff,0xff,0xff,0xff,0xff,0xc3 },			\
    { 0xc3,0xff,0xff,0xff,0xff,0xff,0xc3 },			\
    { 0xc3,0xff,0xff,0xff,0xff,0xff,0xc3 },			\
    { 0xc3,0xff,0xff,0xff,0xff,0xff,0xc3 },			\
    { 0xc3,0xff,0xff,0xff,0xff,0xff,0xc3 },			\
    { 0xc3,0xff,0xff,0xff,0xff,0xff,0xc3 },			\
    { 0xc3,0xff,0xff,0xff,0xff,0xff,0xc3 },			\
    { 0xc3,0xff,0xff,0xff,0xff,0xff,0xc3 },			\
    { 0xc3,0xff,0xff,0xff,0xff,0xff,0xc3 },			\
    { 0xae,0xff,0xff,0xff,0xff,0xff,0xae },			\
    { 0x54,0xff,0xff,0xff,0xff,0xff,0x54 },			\
    { 0x00,0x66,0xdb,0xf3,0xdb,0x66,0x00 }			\
};

<span class="enscript-type">struct</span> hibernate_preview_t
{
    uint32_t  imageCount;	<span class="enscript-comment">// Number of images
</span>    uint32_t  width;      	<span class="enscript-comment">// Width
</span>    uint32_t  height;     	<span class="enscript-comment">// Height
</span>    uint32_t  depth;      	<span class="enscript-comment">// Pixel Depth
</span>    uint32_t  lockTime;     <span class="enscript-comment">// Lock time
</span>    uint32_t  reservedG[8]; <span class="enscript-comment">// reserved
</span>    uint32_t  reservedK[8]; <span class="enscript-comment">// reserved
</span>};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> hibernate_preview_t hibernate_preview_t;

<span class="enscript-type">struct</span> hibernate_statistics_t
{
    uint64_t image1Size;
    uint64_t imageSize;
    uint32_t image1Pages;
    uint32_t imagePages;
    uint32_t booterStart;
    uint32_t smcStart;
    uint32_t booterDuration;
    uint32_t booterConnectDisplayDuration;
    uint32_t booterSplashDuration;
    uint32_t booterDuration0;
    uint32_t booterDuration1;
    uint32_t booterDuration2;
    uint32_t trampolineDuration;
    uint32_t kernelImageReadDuration;

    uint32_t graphicsReadyTime;
    uint32_t wakeNotificationTime;
    uint32_t lockScreenReadyTime;
    uint32_t hidReadyTime;

    uint32_t wakeCapability;
    uint32_t resvA[15];
};
<span class="enscript-type">typedef</span> <span class="enscript-type">struct</span> hibernate_statistics_t hibernate_statistics_t;

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOSysctlHibernateStatistics</span>	<span class="enscript-string">&quot;kern.hibernatestatistics&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOSysctlHibernateGraphicsReady</span>	<span class="enscript-string">&quot;kern.hibernategraphicsready&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOSysctlHibernateWakeNotify</span>	<span class="enscript-string">&quot;kern.hibernatewakenotification&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOSysctlHibernateScreenReady</span>	<span class="enscript-string">&quot;kern.hibernatelockscreenready&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOSysctlHibernateHIDReady</span>	<span class="enscript-string">&quot;kern.hibernatehidready&quot;</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">KERNEL</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__cplusplus</span>

<span class="enscript-type">void</span>     <span class="enscript-function-name">IOHibernateSystemInit</span>(IOPMrootDomain * rootDomain);

IOReturn <span class="enscript-function-name">IOHibernateSystemSleep</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">void</span>     <span class="enscript-function-name">IOOpenDebugDataFile</span>(<span class="enscript-type">const</span> <span class="enscript-type">char</span> *fname, uint64_t size);
IOReturn <span class="enscript-function-name">IOHibernateIOKitSleep</span>(<span class="enscript-type">void</span>);
IOReturn <span class="enscript-function-name">IOHibernateSystemHasSlept</span>(<span class="enscript-type">void</span>);
IOReturn <span class="enscript-function-name">IOHibernateSystemWake</span>(<span class="enscript-type">void</span>);
IOReturn <span class="enscript-function-name">IOHibernateSystemPostWake</span>(<span class="enscript-type">void</span>);
bool     <span class="enscript-function-name">IOHibernateWasScreenLocked</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">void</span>     <span class="enscript-function-name">IOHibernateSetScreenLocked</span>(uint32_t lockState);
<span class="enscript-type">void</span>     <span class="enscript-function-name">IOHibernateSetWakeCapabilities</span>(uint32_t capability);
<span class="enscript-type">void</span>     <span class="enscript-function-name">IOHibernateSystemRestart</span>(<span class="enscript-type">void</span>);

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* __cplusplus */</span>

<span class="enscript-type">void</span>
<span class="enscript-function-name">vm_compressor_do_warmup</span>(<span class="enscript-type">void</span>);


hibernate_page_list_t *
<span class="enscript-function-name">hibernate_page_list_allocate</span>(boolean_t log);

kern_return_t 
<span class="enscript-function-name">hibernate_alloc_page_lists</span>(
		hibernate_page_list_t ** page_list_ret,
		hibernate_page_list_t ** page_list_wired_ret,
		hibernate_page_list_t ** page_list_pal_ret);

kern_return_t 
<span class="enscript-function-name">hibernate_setup</span>(IOHibernateImageHeader * header,
                        boolean_t vmflush,
			hibernate_page_list_t * page_list,
			hibernate_page_list_t * page_list_wired,
			hibernate_page_list_t * page_list_pal);

kern_return_t 
<span class="enscript-function-name">hibernate_teardown</span>(hibernate_page_list_t * page_list,
                    hibernate_page_list_t * page_list_wired,
                    hibernate_page_list_t * page_list_pal);

kern_return_t 
<span class="enscript-function-name">hibernate_processor_setup</span>(IOHibernateImageHeader * header);

<span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_gobble_pages</span>(uint32_t gobble_count, uint32_t free_page_time);
<span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_free_gobble_pages</span>(<span class="enscript-type">void</span>);

<span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_vm_lock_queues</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_vm_unlock_queues</span>(<span class="enscript-type">void</span>);

<span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_vm_lock</span>(<span class="enscript-type">void</span>);
<span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_vm_unlock</span>(<span class="enscript-type">void</span>);

<span class="enscript-comment">// mark pages not to be saved, based on VM system accounting
</span><span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_page_list_setall</span>(hibernate_page_list_t * page_list,
			   hibernate_page_list_t * page_list_wired,
			   hibernate_page_list_t * page_list_pal,
			   boolean_t preflight, 
			   boolean_t discard_all,
			   uint32_t * pagesOut);

<span class="enscript-comment">// mark pages to be saved, or pages not to be saved but available 
</span><span class="enscript-comment">// for scratch usage during restore
</span><span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_page_list_setall_machine</span>(hibernate_page_list_t * page_list,
                                    hibernate_page_list_t * page_list_wired,
                                    boolean_t preflight,
                                    uint32_t * pagesOut);

<span class="enscript-comment">// mark pages not to be saved and not for scratch usage during restore
</span><span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_page_list_set_volatile</span>( hibernate_page_list_t * page_list,
				  hibernate_page_list_t * page_list_wired,
				  uint32_t * pagesOut);

<span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_page_list_discard</span>(hibernate_page_list_t * page_list);

<span class="enscript-type">int</span>
<span class="enscript-function-name">hibernate_should_abort</span>(<span class="enscript-type">void</span>);

<span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_set_page_state</span>(hibernate_page_list_t * page_list, hibernate_page_list_t * page_list_wired,
				vm_offset_t ppnum, vm_offset_t count, uint32_t kind);

<span class="enscript-type">void</span> 
<span class="enscript-function-name">hibernate_page_bitset</span>(hibernate_page_list_t * list, boolean_t set, uint32_t page);

boolean_t 
<span class="enscript-function-name">hibernate_page_bittst</span>(hibernate_page_list_t * list, uint32_t page);

hibernate_bitmap_t *
<span class="enscript-function-name">hibernate_page_bitmap_pin</span>(hibernate_page_list_t * list, uint32_t * page);

uint32_t
<span class="enscript-function-name">hibernate_page_bitmap_count</span>(hibernate_bitmap_t * bitmap, uint32_t set, uint32_t page);

uintptr_t 
<span class="enscript-function-name">hibernate_restore_phys_page</span>(uint64_t src, uint64_t dst, uint32_t len, uint32_t procFlags);

<span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_machine_init</span>(<span class="enscript-type">void</span>);

uint32_t
<span class="enscript-function-name">hibernate_write_image</span>(<span class="enscript-type">void</span>);

<span class="enscript-type">long</span>
<span class="enscript-function-name">hibernate_machine_entrypoint</span>(uint32_t p1, uint32_t p2, uint32_t p3, uint32_t p4);
<span class="enscript-type">long</span>
<span class="enscript-function-name">hibernate_kernel_entrypoint</span>(uint32_t p1, uint32_t p2, uint32_t p3, uint32_t p4);
<span class="enscript-type">void</span>
<span class="enscript-function-name">hibernate_newruntime_map</span>(<span class="enscript-type">void</span> * map, vm_size_t map_size, 
			    uint32_t system_table_offset);


<span class="enscript-type">extern</span> uint32_t    gIOHibernateState;
<span class="enscript-type">extern</span> uint32_t    gIOHibernateMode;
<span class="enscript-type">extern</span> uint32_t    gIOHibernateDebugFlags;
<span class="enscript-type">extern</span> uint32_t    gIOHibernateFreeTime;	<span class="enscript-comment">// max time to spend freeing pages (ms)
</span><span class="enscript-type">extern</span> uint8_t     gIOHibernateRestoreStack[];
<span class="enscript-type">extern</span> uint8_t     gIOHibernateRestoreStackEnd[];
<span class="enscript-type">extern</span> IOHibernateImageHeader *    gIOHibernateCurrentHeader;

#<span class="enscript-reference">define</span> <span class="enscript-function-name">HIBLOG</span>(fmt, args...)	\
    { kprintf(fmt, ## args); printf(fmt, ## args); }

#<span class="enscript-reference">define</span> <span class="enscript-function-name">HIBPRINT</span>(fmt, args...)	\
    { kprintf(fmt, ## args); }

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* KERNEL */</span>

<span class="enscript-comment">// gIOHibernateState, kIOHibernateStateKey
</span><span class="enscript-type">enum</span>
{
    kIOHibernateStateInactive            = 0,
    kIOHibernateStateHibernating 	 = 1,	<span class="enscript-comment">/* writing image */</span>
    kIOHibernateStateWakingFromHibernate = 2	<span class="enscript-comment">/* booted and restored image */</span>
};

<span class="enscript-comment">// gIOHibernateMode, kIOHibernateModeKey
</span><span class="enscript-type">enum</span>
{
    kIOHibernateModeOn      = 0x00000001,
    kIOHibernateModeSleep   = 0x00000002,
    kIOHibernateModeEncrypt = 0x00000004,
    kIOHibernateModeDiscardCleanInactive = 0x00000008,
    kIOHibernateModeDiscardCleanActive   = 0x00000010,
    kIOHibernateModeSwitch	= 0x00000020,
    kIOHibernateModeRestart	= 0x00000040,
    kIOHibernateModeSSDInvert	= 0x00000080,
    kIOHibernateModeFileResize	= 0x00000100,
};

<span class="enscript-comment">// IOHibernateImageHeader.signature
</span><span class="enscript-type">enum</span>
{
    kIOHibernateHeaderSignature        = 0x73696d65,
    kIOHibernateHeaderInvalidSignature = 0x7a7a7a7a,
    kIOHibernateHeaderOpenSignature    = 0xf1e0be9d,
    kIOHibernateHeaderDebugDataSignature = 0xfcddfcdd
};

<span class="enscript-comment">// kind for hibernate_set_page_state()
</span><span class="enscript-type">enum</span>
{
    kIOHibernatePageStateFree        = 0,
    kIOHibernatePageStateWiredSave   = 1,
    kIOHibernatePageStateUnwiredSave = 2
};

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateModeKey</span>		<span class="enscript-string">&quot;Hibernate Mode&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateFileKey</span>		<span class="enscript-string">&quot;Hibernate File&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateFileMinSizeKey</span>	<span class="enscript-string">&quot;Hibernate File Min&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateFileMaxSizeKey</span>	<span class="enscript-string">&quot;Hibernate File Max&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateFreeRatioKey</span>	<span class="enscript-string">&quot;Hibernate Free Ratio&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateFreeTimeKey</span>		<span class="enscript-string">&quot;Hibernate Free Time&quot;</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateStateKey</span>		<span class="enscript-string">&quot;IOHibernateState&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateFeatureKey</span>		<span class="enscript-string">&quot;Hibernation&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernatePreviewBufferKey</span>	<span class="enscript-string">&quot;IOPreviewBuffer&quot;</span>

#<span class="enscript-reference">ifndef</span> <span class="enscript-variable-name">kIOHibernatePreviewActiveKey</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernatePreviewActiveKey</span>	<span class="enscript-string">&quot;IOHibernatePreviewActive&quot;</span>
<span class="enscript-comment">// values for kIOHibernatePreviewActiveKey
</span><span class="enscript-type">enum</span> {
    kIOHibernatePreviewActive  = 0x00000001,
    kIOHibernatePreviewUpdates = 0x00000002
};
#<span class="enscript-reference">endif</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateOptionsKey</span>      <span class="enscript-string">&quot;IOHibernateOptions&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateGfxStatusKey</span>    <span class="enscript-string">&quot;IOHibernateGfxStatus&quot;</span>
<span class="enscript-type">enum</span> {
    kIOHibernateGfxStatusUnknown = ((int32_t) 0xFFFFFFFF)
};

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateBootImageKey</span>	<span class="enscript-string">&quot;boot-image&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateBootImageKeyKey</span>	<span class="enscript-string">&quot;boot-image-key&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateBootSignatureKey</span>	<span class="enscript-string">&quot;boot-signature&quot;</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateMemorySignatureKey</span>	  <span class="enscript-string">&quot;memory-signature&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateMemorySignatureEnvKey</span> <span class="enscript-string">&quot;mem-sig&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateMachineSignatureKey</span>	  <span class="enscript-string">&quot;machine-signature&quot;</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateRTCVariablesKey</span>	<span class="enscript-string">&quot;IOHibernateRTCVariables&quot;</span>
#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateSMCVariablesKey</span>	<span class="enscript-string">&quot;IOHibernateSMCVariables&quot;</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateBootSwitchVarsKey</span>	<span class="enscript-string">&quot;boot-switch-vars&quot;</span>

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateBootNoteKey</span>		<span class="enscript-string">&quot;boot-note&quot;</span>


#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOHibernateUseKernelInterpreter</span>    0x80000000

<span class="enscript-type">enum</span>
{
	kIOPreviewImageIndexDesktop = 0, 
	kIOPreviewImageIndexLockScreen = 1, 
	kIOPreviewImageCount = 2
};

<span class="enscript-type">enum</span>
{
	kIOScreenLockNoLock          = 1,
	kIOScreenLockUnlocked        = 2,
	kIOScreenLockLocked          = 3,
	kIOScreenLockFileVaultDialog = 4,
};	

#<span class="enscript-reference">define</span> <span class="enscript-variable-name">kIOScreenLockStateKey</span>      <span class="enscript-string">&quot;IOScreenLockState&quot;</span>

#<span class="enscript-reference">endif</span> <span class="enscript-comment">/* ! __IOKIT_IOHIBERNATEPRIVATE_H */</span>

#<span class="enscript-reference">ifdef</span> <span class="enscript-variable-name">__cplusplus</span>
}
#<span class="enscript-reference">endif</span>
</pre>
<hr />
</body></html>